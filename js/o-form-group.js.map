{"version":3,"sources":["o-form-group.js"],"names":["KEYCODE","DOWN","LEFT","RIGHT","SPACE","UP","$","document","ready","radiobuttons","querySelectorAll","i","length","rb","addEventListener","clickRadioGroup","keyDownRadioGroup","focusRadioButton","blurRadioButton","firstRadioButton","node","first","parentNode","firstChild","nodeType","Node","ELEMENT_NODE","getAttribute","nextSibling","lastRadioButton","last","lastChild","previousSibling","nextRadioButton","next","previousRadioButton","prev","getImage","child","tagName","setRadioButton","state","image","setAttribute","tabIndex","focus","event","type","currentTarget","radioButton","preventDefault","stopPropagation","keyCode","className","replace"],"mappings":"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","sourcesContent":["var KEYCODE = {\n    DOWN: 40,\n    LEFT: 37,\n    RIGHT: 39,\n    SPACE: 32,\n    UP: 38\n}\n\n// Al cargar la página se buscan todos los elementos con 'role=radio' y se guardan en un array\n// Se escuchan los eventos: click, keydown, focus y blur de cada elemento, llamando a la correspondiente función.\n$(document).ready(function(){\n\n  var radiobuttons = document.querySelectorAll('[role=radio]');\n\n  for(var i = 0; i < radiobuttons.length; i++ ) {\n    var rb = radiobuttons[i];\n\n    rb.addEventListener('click', clickRadioGroup);\n    rb.addEventListener('keydown', keyDownRadioGroup);\n    rb.addEventListener('focus', focusRadioButton);\n    rb.addEventListener('blur', blurRadioButton);\n  }\n\n});\n\n\n/*\n* @function firstRadioButton\n*\n* @desc Returns the first radio button\n*\n* @param   {Object}  event  =  Standard W3C event object\n*/\n\nfunction firstRadioButton(node) {\n\n  var first = node.parentNode.firstChild;\n\n  while(first) {\n    if (first.nodeType === Node.ELEMENT_NODE) {\n      if (first.getAttribute(\"role\") === 'radio') return first;\n    }\n    first = first.nextSibling;\n  }\n\n  return null;\n}\n\n/*\n* @function lastRadioButton\n*\n* @desc Returns the last radio button\n*\n* @param   {Object}  event  =  Standard W3C event object\n*/\n\nfunction lastRadioButton(node) {\n\n  var last = node.parentNode.lastChild;\n\n  while(last) {\n    if (last.nodeType === Node.ELEMENT_NODE) {\n      if (last.getAttribute(\"role\") === 'radio') return last;\n    }\n    last = last.previousSibling;\n  }\n\n  return last;\n}\n\n/*\n* @function nextRadioButton\n*\n* @desc Returns the next radio button\n*\n* @param   {Object}  event  =  Standard W3C event object\n*/\n\nfunction nextRadioButton(node) {\n\n  var next = node.nextSibling;\n\n  while(next) {\n    if (next.nodeType === Node.ELEMENT_NODE) {\n      if (next.getAttribute(\"role\") === 'radio') return next;\n    }\n    next = next.nextSibling;\n  }\n\n  return null;\n}\n\n/*\n* @function previousRadioButton\n*\n* @desc Returns the previous radio button\n*\n* @param   {Object}  event  =  Standard W3C event object\n*/\n\nfunction previousRadioButton(node) {\n\n  var prev = node.previousSibling;\n\n  while(prev) {\n    if (prev.nodeType === Node.ELEMENT_NODE) {\n      if (prev.getAttribute(\"role\") === 'radio') return prev;\n    }\n    prev = prev.previousSibling;\n  }\n\n  return null;\n}\n\n/*\n* @function getImage\n*\n* @desc Gets the image for radio box\n*\n* @param   {Object}  event  =  Standard W3C event object\n*/\n\nfunction getImage(node) {\n\n  var child = node.firstChild;\n\n  while(child) {\n    if (child.nodeType === Node.ELEMENT_NODE) {\n      if (child.tagName === 'IMG') return child;\n    }\n    child = child.nextSibling;\n  }\n\n  return null;\n}\n\n/*\n* @function setRadioButton\n*\n* @desc Toogles the state of a radio button\n*\n* @param   {Object}  event  -  Standard W3C event object\n*\n*/\n\nfunction setRadioButton(node, state) {\n  var image = getImage(node);\n\n  if (state == 'true') {\n    node.setAttribute('aria-checked', 'true')\n    node.tabIndex = 0;\n    node.focus()\n  }\n  else {\n    node.setAttribute('aria-checked', 'false') \n    node.tabIndex = -1;\n  }\n}\n\n/*\n* @function clickRadioGroup\n*\n* @desc\n*\n* @param   {Object}  node  -  DOM node of updated group radio buttons\n*/\n\nfunction clickRadioGroup(event) {\n  var type = event.type;\n\n  if (type === 'click') {\n    // If either enter or space is pressed, execute the funtion\n\n    var node = event.currentTarget;\n\n    var radioButton = firstRadioButton(node);\n\n    while (radioButton) {\n      setRadioButton(radioButton, \"false\");\n      radioButton = nextRadioButton(radioButton);\n    }\n\n    setRadioButton(node, \"true\");\n\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\n/*\n* @function keyDownRadioGroup\n*\n* @desc\n*\n* @param   {Object}   node  -  DOM node of updated group radio buttons\n*/\n\nfunction keyDownRadioGroup(event) {\n  var type = event.type;\n  var next = false;\n\n  if(type === \"keydown\"){\n    var node = event.currentTarget;\n\n    switch (event.keyCode) {\n      case KEYCODE.DOWN:\n      case KEYCODE.RIGHT:\n        var next = nextRadioButton(node);\n        if (!next) next = firstRadioButton(node); //if node is the last node, node cycles to first.\n        break;\n\n      case KEYCODE.UP:\n      case KEYCODE.LEFT:\n        next = previousRadioButton(node);\n        if (!next) next = lastRadioButton(node); //if node is the last node, node cycles to first.\n        break;\n\n      case KEYCODE.SPACE:\n        next = node;\n        break;\n    }\n\n    if (next) {\n      var radioButton = firstRadioButton(node);\n\n      while (radioButton) {\n        setRadioButton(radioButton, \"false\");\n        radioButton = nextRadioButton(radioButton);\n      }\n\n      setRadioButton(next, \"true\");\n\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n}\n\n/*\n* @function focusRadioButton\n*\n* @desc Adds focus styling to label element encapsulating standard radio button\n*\n* @param   {Object}  event  -  Standard W3C event object\n*/\n\nfunction focusRadioButton(event) {\n  event.currentTarget.className += ' is-checked';\n}\n\n/*\n* @function blurRadioButton\n*\n* @desc Adds focus styling to the label element encapsulating standard radio button\n*\n* @param   {Object}  event  -  Standard W3C event object\n*/\n\nfunction blurRadioButton(event) {\n   event.currentTarget.className = event.currentTarget.className.replace(' is-checked','');\n}"],"file":"o-form-group.js"}