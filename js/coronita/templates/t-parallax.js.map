{"version":3,"sources":["coronita/templates/t-parallax.js"],"names":["Coronita","ui","tParallax","animationTime","activeClass","activateNavigationLink","$parallaxNavigationLinks","index","$currentLink","eq","isReversed","is","removeClass","addClass","closest","toggleClass","animateNavigation","$parallaxNavigation","$parallaxSection","animate","top","position","Math","floor","outerHeight","navigate","$parallax","$parallaxLinks","$link","$","attr","find","parallaxSectionIndex","scrollTop","offset","focus","parallax","on","ev","preventDefault","scroll","document","trigger","milestones","sectionMilestones","previousSectionTop","each","currentSectionTop","push","bottom","scrollHandler","item","scrollTimeout","clearTimeout","setTimeout","init"],"mappings":"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","sourcesContent":["// TEMPLATE - t-parallax\n\nCoronita.ui.tParallax = (function () {\n  var\n    animationTime = 500,\n    activeClass = 'is-active';\n  \n  function activateNavigationLink ($parallaxNavigationLinks, index) {\n    var\n      $currentLink = $parallaxNavigationLinks.eq(index),\n      isReversed = $currentLink.is('[data-layout-parallax-nav-reversed]');\n\n    $parallaxNavigationLinks\n      .removeClass(activeClass);\n    $currentLink\n      .addClass(activeClass)\n      .closest('[data-layout-parallax-nav]')\n      .toggleClass('is-color-reversed', isReversed);\n  }\n\n  function animateNavigation ($parallaxNavigation, $parallaxSection) {\n    $parallaxNavigation.animate({\n      top: $parallaxSection.position().top + Math.floor(($parallaxSection.outerHeight() - $parallaxNavigation.outerHeight()) / 2)\n    }, animationTime);\n  }\n\n  function navigate ($parallax, $parallaxNavigation, $parallaxLinks, $link) {\n    var\n      $parallaxSection = $($link.attr('href')),\n      $parallaxNavigationLinks = $parallaxNavigation.find('[data-layout-parallax-nav-item]');\n      parallaxSectionIndex = $parallaxSection.index('.t-parallax__section');\n\n    activateNavigationLink ($parallaxNavigationLinks, parallaxSectionIndex);\n    animateNavigation($parallaxNavigation, $parallaxSection);\n\n    $('html, body').animate({\n      scrollTop: $parallaxSection.offset().top - 110\n    }, animationTime, function () {\n      $parallaxSection.focus();\n    });\n  }\n\n  function parallax ($parallax) {\n    var\n      $parallaxNavigation = $parallax.find('[data-layout-parallax-nav]'),\n      $parallaxLinks = $parallax.find('[data-layout-parallax-nav-item]');\n\n    $parallaxLinks.on('click.parallax', function (ev) {\n      ev.preventDefault();\n      navigate($parallax, $parallaxNavigation, $parallaxLinks, $(this));\n    });\n\n    scroll($parallax);\n    $(document).trigger('scroll');\n  }\n\n  function milestones ( $parallaxNavigationLinks) {\n    var\n      sectionMilestones = [],\n      previousSectionTop = 0;\n    $parallaxNavigationLinks.each(function (index) {\n      var currentSectionTop = $($(this).attr('href')).offset().top;\n      sectionMilestones.push({\n        index: index,\n        top: previousSectionTop,\n        bottom: currentSectionTop\n      });\n      previousSectionTop = currentSectionTop;\n    });\n\n    return sectionMilestones;\n  }\n\n  function scrollHandler (sectionMilestones, $parallaxNavigationLinks, $parallaxNavigation) {\n    var scrollTop = $(document).scrollTop();\n    $.each(sectionMilestones, function (index, item) {\n      if (scrollTop >= item.top && scrollTop < item.bottom) {\n        var $parallaxSection = $($parallaxNavigationLinks.eq(item.index).attr('href'));\n        activateNavigationLink ($parallaxNavigationLinks, item.index);\n        animateNavigation($parallaxNavigation, $parallaxSection);\n      }\n    });\n  }\n  \n\n  function scroll ($parallax) {\n    var\n      $parallaxNavigation = $parallax.find('[data-layout-parallax-nav]'),\n      $parallaxNavigationLinks = $parallaxNavigation.find('[data-layout-parallax-nav-item]'),\n      sectionMilestones = milestones($parallaxNavigationLinks),\n      scrollTimeout;\n\n    $(document).scroll(function () {\n      if (scrollTimeout) {\n        clearTimeout(scrollTimeout);\n        scrollTimeout = null;\n      }\n      scrollTimeout = setTimeout(function () {\n        scrollHandler(sectionMilestones, $parallaxNavigationLinks, $parallaxNavigation);\n      }, 100);\n\n      \n    });\n  }\n\n  function init () {\n    $('[data-layout-parallax]').each(function (ev) {\n      parallax($(this));\n    });\n  }\n\n  return {\n    init: init\n  };\n})();\n"],"file":"t-parallax.js"}