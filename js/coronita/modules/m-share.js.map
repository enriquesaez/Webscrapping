{"version":3,"sources":["coronita/modules/m-share.js"],"names":["Coronita","clientflow","mShare","SELECTOR_CORONITA_M_SHARE","SELECTOR_CORONITA_M_SHARE_TOOLTIP_COPY","SELECTOR_CORONITA_M_SHARE_BUTTON","SELECTOR_CORONITA_M_SHARE_INPUT_COPY","shareServices","copy","content","$mShare","$mShareInput","find","$mShareTooltipCopy","select","document","execCommand","blur","is","show","attr","setTimeout","hide","email","openShareService","subject","body","url","reference","facebook","twitter","hashtag","window","open","share","$","textContent","encodeURI","encodeURIComponent","btoa","on","ev","keyCode","type","currentTarget","init","$view","each","ui"],"mappings":"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","sourcesContent":["// MODULE - m-share\n\nCoronita.clientflow.mShare = (function () {\n  var SELECTOR_CORONITA_M_SHARE = '[data-coronita-m-share]';\n  var SELECTOR_CORONITA_M_SHARE_TOOLTIP_COPY = '[data-coronita-c-tooltip]';\n  var SELECTOR_CORONITA_M_SHARE_BUTTON = '[data-coronita-m-share-button]';\n  var SELECTOR_CORONITA_M_SHARE_INPUT_COPY = '[data-coronita-m-share-input-copy]';\n\n  var shareServices = {\n    copy: function (content, $mShare) {\n      var $mShareInput = $mShare.find(SELECTOR_CORONITA_M_SHARE_INPUT_COPY);\n      var $mShareTooltipCopy = $mShare.find(SELECTOR_CORONITA_M_SHARE_TOOLTIP_COPY);\n      if ($mShareInput && $mShareInput.select) {\n        $mShareInput.select();\n        document.execCommand('copy');\n        $mShareInput.blur();\n        if (!$mShareTooltipCopy.is(':visible')) {\n          $mShareTooltipCopy.show().attr('aria-hidden', 'false');\n          setTimeout(function () {\n            $mShareTooltipCopy.hide().attr('aria-hidden', 'true');\n          }, 1000);\n        }\n      }\n    },\n    email: function (content) {\n      openShareService('mailto:?Subject=' + content.subject + '&body=' + content.body + '%20' + content.url + content.reference);\n    },\n    facebook: function (content) {\n      openShareService('https://www.facebook.com/sharer.php?u=' + content.url + content.reference);\n    },\n    twitter: function (content) {\n      openShareService('https://twitter.com/intent/tweet?url=' + content.url + content.reference + '&text=' + content.body + '&hashtags=' + content.hashtag);\n    }\n  };\n\n  function openShareService (url) {\n    window.open(url, '_blank');\n  }\n\n  function share () {\n    var $mShare = $(this);\n    var textContent = {\n      body: encodeURI($mShare.attr('data-coronita-m-share-body')),\n      subject: encodeURI($mShare.attr('data-coronita-m-share-subject')),\n      hashtag: $mShare.attr('data-coronita-m-share-hashtag'),\n      url: encodeURI($mShare.attr('data-coronita-m-share-url')),\n      reference: encodeURIComponent(btoa($mShare.attr('data-coronita-m-share-reference') || ''))\n    };\n\n    $mShare.find(SELECTOR_CORONITA_M_SHARE_BUTTON).on('keypress click', function (ev) {\n      if (ev.keyCode === 13 || ev.type === 'click') {\n        shareServices[$(ev.currentTarget).attr('data-coronita-m-share-button')](textContent, $mShare);\n      }\n    });\n  }\n\n  /**\n   * init method\n   * Call template mixin '_.c_coronita_m_share()' (c_coronita_m_share.tmpl.html) in the html file\n   * Call init in *.mvc.js, for example in 'afterRender' method:\n   * uiCoronitaModulesShare.init(this.$el);\n   * @param $idViewContainer - jquery object container element selector\n   * @public\n   */\n  function init ($view) {\n    $view.find(SELECTOR_CORONITA_M_SHARE).each(share);\n  }\n\n  return {\n    init: init\n  };\n})();\n\nCoronita.ui.mShare = (function () {\n  function init () {\n    Coronita.clientflow.mShare.init($('body'));\n  }\n\n  return {\n    init: init\n  };\n})();\n"],"file":"m-share.js"}