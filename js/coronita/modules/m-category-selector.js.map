{"version":3,"sources":["coronita/modules/m-category-selector.js"],"names":["Coronita","clientflow","mCategorySelector","SELECTOR_CORONITA_M_CATEGORY_SELECTOR","SELECTOR_CORONITA_M_CATEGORY_TRACK_SELECTOR","SELECTOR_CORONITA_M_CATEGORY_TRACK_ATTR","SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_PREVIOUS","SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_NEXT","CLASS_HIDE_CONTENT","track","$mCategorySelector","$track","find","trackWidth","width","$list","$listItems","$controlNext","$controlPrev","listItemWidth","eq","listWidth","getListWidth","length","setNewPosition","newPosition","attr","css","left","getCurrentPosition","parseFloat","trackControls","ev","type","key","currentPosition","$","currentTarget","is","movementLength","gap","trackControlsToggleNext","trackControlsTogglePrevious","toggleClass","trackControlsKeys","keyCode","$target","prev","focus","click","next","removeClass","movements","Math","floor","ceil","on","toggleTabs","siblings","init","$view","each","ui"],"mappings":"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","sourcesContent":["// MODULE - m-share\n\nCoronita.clientflow.mCategorySelector = (function () {\n  var SELECTOR_CORONITA_M_CATEGORY_SELECTOR = '[data-coronita-m-category-selector]';\n  var SELECTOR_CORONITA_M_CATEGORY_TRACK_SELECTOR = '[data-coronita-m-category-selector-track]';\n  var SELECTOR_CORONITA_M_CATEGORY_TRACK_ATTR = 'data-coronita-m-category-selector-track';\n  var SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_PREVIOUS = '[data-coronita-m-category-selector-control=\"previous\"]';\n  var SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_NEXT = '[data-coronita-m-category-selector-control=\"next\"]';\n  var CLASS_HIDE_CONTENT = 'hide-content';\n\n  function track ($mCategorySelector) {\n    var $track = $mCategorySelector.find(SELECTOR_CORONITA_M_CATEGORY_TRACK_SELECTOR);\n    var trackWidth = $track.width();\n    var $list = $mCategorySelector.find('[role=\"tablist\"]');\n    var $listItems = $list.find('[role=\"tab\"]');\n    var $controlNext = $mCategorySelector.find(SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_NEXT);\n    var $controlPrev = $mCategorySelector.find(SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_PREVIOUS);\n    var listItemWidth = $listItems.eq(0).width();\n    var listWidth = getListWidth($list);\n\n    function getListWidth ($list) {\n      return listItemWidth * $listItems.length;\n    }\n\n    function setNewPosition (newPosition) {\n      $track.attr(SELECTOR_CORONITA_M_CATEGORY_TRACK_ATTR, newPosition);\n      $list.css({\n        left: (newPosition * -1)\n      });\n    }\n    function getCurrentPosition () {\n      return parseFloat($track.attr(SELECTOR_CORONITA_M_CATEGORY_TRACK_ATTR));\n    }\n\n    function trackControls (ev) {\n      if (ev.type === 'click' || ev.key === 'Enter') {\n        var currentPosition = getCurrentPosition();\n        var newPosition;\n        if ($(ev.currentTarget).is(SELECTOR_CORONITA_M_CATEGORY_TRACK_CONTROL_NEXT)) {\n          newPosition = currentPosition + movementLength;\n          newPosition = (newPosition > gap) ? gap : newPosition;\n          trackControlsToggleNext(newPosition);\n        } else {\n          newPosition = currentPosition - movementLength;\n          newPosition = (newPosition < 0) ? 0 : newPosition;\n          trackControlsTogglePrevious(newPosition);\n        }\n        setNewPosition(newPosition);\n      }\n    }\n\n    function trackControlsTogglePrevious (newPosition) {\n      $controlPrev.toggleClass(CLASS_HIDE_CONTENT, !(newPosition > 0));\n      $controlNext.toggleClass(CLASS_HIDE_CONTENT, newPosition > gap);\n    }\n\n    function trackControlsToggleNext (newPosition) {\n      $controlNext.toggleClass(CLASS_HIDE_CONTENT, newPosition >= gap);\n      $controlPrev.toggleClass(CLASS_HIDE_CONTENT, !(newPosition > 0));\n    }\n\n    function trackControlsKeys (ev) {\n      if (ev.keyCode === 37 || ev.keyCode === 39) {\n        var $target = $(ev.currentTarget);\n        var currentPosition = getCurrentPosition();\n        var newPosition;\n        if (ev.keyCode === 37) {\n          newPosition = 0;\n          if ($target.prev().length) {\n            newPosition = currentPosition - listItemWidth;\n            newPosition = newPosition < 0 ? 0 : newPosition;\n            $target.prev().focus().click();\n          } else {\n            newPosition = getListWidth() - gap;\n            $listItems.eq($listItems.length - 1).focus().click();\n          }\n        } else if (ev.keyCode === 39) {\n          newPosition = currentPosition;\n          if ($target.next().length) {\n            newPosition = currentPosition + listItemWidth;\n            newPosition = (newPosition > gap) ? gap : newPosition;\n            $target.next().focus().click();\n          } else {\n            newPosition = 0;\n            $listItems.eq(0).focus().click();\n          }\n        }\n        if (trackWidth < listWidth) {\n          if (ev.keyCode === 37) {\n            trackControlsTogglePrevious(newPosition);\n          }\n          if (ev.keyCode === 39) {\n            trackControlsToggleNext(newPosition);\n          }\n          setNewPosition(newPosition);\n        }\n      }\n    }\n\n    if (trackWidth < listWidth) {\n      $controlNext.removeClass(CLASS_HIDE_CONTENT);\n      trackWidth = $track.width();\n      listWidth = getListWidth($list);\n      var gap = listWidth - trackWidth;\n      var movements = Math.floor(gap / trackWidth);\n      var movementLength = Math.ceil(gap / movements);\n\n      $controlNext.on('click keyup', trackControls);\n\n      $controlPrev.on('click keyup', trackControls);\n    }\n\n    $listItems.on('keyup', trackControlsKeys);\n  }\n\n  function toggleTabs (ev) {\n    if (ev.type === 'click' || ev.key === 'Enter') {\n      $(ev.currentTarget)\n        .attr({\n          'aria-selected': 'true',\n          'tabindex': '0'\n        })\n        .siblings()\n        .attr({\n          'aria-selected': 'false',\n          'tabindex': '-1'\n        });\n      $('#' + $(ev.currentTarget).attr('aria-controls'))\n        .attr('aria-hidden', 'false')\n        .siblings()\n        .attr('aria-hidden', 'true');\n    }\n  }\n\n  /**\n   * init method\n   * Call template mixin '_.c_coronita_m_share()' (c_coronita_m_share.tmpl.html) in the html file\n   * Call init in *.mvc.js, for example in 'afterRender' method:\n   * uiCoronitaModulesShare.init(this.$el);\n   * @param $idViewContainer - jquery object container element selector\n   * @public\n   */\n  function init ($view) {\n    $view.find(SELECTOR_CORONITA_M_CATEGORY_SELECTOR).each(function () {\n      $(this).find('[role=\"tab\"]').on('click keyup', toggleTabs);\n      track($(this));\n    });\n  }\n\n  return {\n    init: init\n  };\n}());\n\nCoronita.ui.mCategorySelector = (function () {\n  function init () {\n    Coronita.clientflow.mCategorySelector.init($('body'));\n  }\n\n  return {\n    init: init\n  };\n})();\n"],"file":"m-category-selector.js"}