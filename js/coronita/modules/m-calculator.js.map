{"version":3,"sources":["coronita/modules/m-calculator.js"],"names":["Coronita","ui","mCalculator","helper","operations","addition","val1","val2","substraction","multiplication","division","Math","round","setOperation","operator","val1Text","val2Text","_","isNull","parseFloat","result","isNaN","toFixed","toString","replace","calcTotalPage","total","$","each","groupResult","text","eq","find","calcTotalRow","groupRow","$groupRow","closest","index","row","next","setTimeout","calc","$texts","trim","input1","filter","input2","val","checks","$checkEnable","$row","enabled","is","toggleClass","attr","removeAttr","init","siblings","on"],"mappings":"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","sourcesContent":["// MODULE - m-calculator\n\nCoronita.ui.mCalculator = (function () {\n\n  var helper = {\n    operations: {\n      addition: function (val1, val2) {\n        return val1 + val2;\n      },\n      substraction: function (val1, val2) {\n        return val1 - val2;\n      },\n      multiplication: function (val1, val2) {\n        return val1 * val2;\n      },\n      division: function (val1, val2) {\n        return Math.round(val1 / val2 * 100) / 100;\n      }\n    }\n  }\n\n  function setOperation (operator, val1Text, val2Text) {\n    var val1 = !_.isNull(val1Text) ? parseFloat(val1Text) : 0,\n      val2 = !_.isNull(val2Text) ? parseFloat(val2Text) : null,\n      result;\n\n    if (operator === '+') {\n      val2 = !_.isNull(val2) ? val2 : 0;\n      result = helper.operations.addition(val1, val2);\n    } else if (operator === '-') {\n      val2 = !_.isNull(val2) ? val2 : 0;\n      result = helper.operations.substraction(val1, val2);\n    } else if (operator === '/') {\n      val2 = !_.isNull(val2) ? val2 : 1;\n      result = helper.operations.division(val1, val2);\n    } else {\n      val2 = !_.isNull(val2) ? val2 : 1;\n      result = helper.operations.multiplication(val1, val2);\n    }\n    return _.isNaN(result) ? '0,00' : result.toFixed(2).toString().replace('.', ',');\n  }\n\n  function calcTotalPage () {\n    var total = 0;\n    $('[data-layout-result-group]').each(function (groupResult) {\n      total += parseFloat($(this).text().replace(',', '.'));\n    });\n    $('#panel-2 header').eq(0).find('.inblock').text(total.toFixed(2).toString().replace('.', ',') + 'â‚¬');\n  }\n\n  function calcTotalRow (groupRow) {\n    var total = 0,\n      $groupRow = $(groupRow).closest('section');\n    $groupRow.find('.m-calculator').each(function (index, row) {\n      total += parseFloat($(row).next().find('span').eq(1).text().replace(',', '.'));\n    });\n    $groupRow.find('[data-layout-result-group]').text(total.toFixed(2).toString().replace('.', ','));\n    setTimeout(function () {\n      calcTotalPage();\n    }, 10);\n  }\n\n  function calc (row, $texts) {\n    var operator = $.trim($(row).find('.m-calculator__operator').text()),\n      result,\n      input1 = $texts.eq(0).filter(':enabled'),\n      input2 = $texts.eq(1).filter(':enabled'),\n      val1 = input1.val() || null,\n      val2 = input2.val() || null;\n\n    result = setOperation(operator, val1, val2);\n    $(row).next().find('[data-layout-result-item]').text(result);\n    calcTotalRow(row);\n  }\n    \n  function checks ($checkEnable, $texts, $row) {\n    var enabled = $checkEnable.is(':checked')\n    $row.next().find('[data-layout-result-container]').toggleClass('text-grey_300', !enabled);\n    $row.find('[data-layout-operator]').toggleClass('text-grey_300', !enabled);\n    $row.find('.c-input-box').toggleClass('is-disabled', !enabled);\n    if (!enabled) {\n      $texts.attr('disabled', true);\n    } else {\n      $texts.removeAttr('disabled');\n    }\n  }\n\n  function init () {\n    $('.m-calculator').each(function (index, row) {\n      var $texts = $(row).find('[type=\"text\"]'),\n        $checkEnable = $(row).siblings().find('[type=\"checkbox\"]'),\n        enabled = $checkEnable.is(':checked');\n      checks($checkEnable, $texts, $(row));\n      calc(row, $texts);\n      $texts.on('keyup.operation', function () {\n        calc(row, $texts);\n      });\n      $checkEnable.on('change.operation', function () {\n        checks($checkEnable, $texts, $(row));\n        calc(row, $texts);\n      });\n    });\n  }\n\n  return {\n    init: init\n  };\n\n})();\n"],"file":"m-calculator.js"}