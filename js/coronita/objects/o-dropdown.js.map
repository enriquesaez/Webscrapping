{"version":3,"sources":["coronita/objects/o-dropdown.js"],"names":["Coronita","ui","oDropdown","closeAll","$menuBarItem","$","find","removeClass","attr","exitDropdown","document","on","event","which","type","$trigger","has","target","length","dropdown","$dropdownController","dropdownControllerData","JSON","parse","is","contents","last","textContent","text","altIcon","addClass","icon","altText","$content","closest","children","toggleClass","hasClass","$this","setTimeout","init"],"mappings":"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","sourcesContent":["// OBJECT - o-dropdown\n\nCoronita.ui.oDropdown = (function () {\n  function closeAll () {\n    var $menuBarItem = $('.o-menubar__item');\n    $menuBarItem\n      .find('.o-dropdown__controller')\n      .removeClass('is-active')\n      .attr('aria-expanded', 'false');\n\n    $menuBarItem\n      .find(\".o-dropdown__content\")\n      .removeClass(\"show-content\")\n      .attr('aria-hidden', 'true');\n  }\n\n  function exitDropdown () {\n    $(document).on('keypress click', function (event) {\n      if (event.which === 13 || event.type === 'click') {\n        var $trigger = $('.o-menubar__item');\n        if(!$trigger.has(event.target).length) {\n          closeAll();\n        }\n      }\n    });\n  }\n\n  function dropdown (event) {\n    if (event.which === 13 || event.type === 'click') {\n      if ($(this).find('[data-layout-dropdown]').length) {\n        var $dropdownController = $(this).find('[data-layout-dropdown]');\n          dropdownControllerData = JSON.parse($dropdownController.attr('data-layout-dropdown'));\n        if ($(this).is('.is-active')) {\n          $dropdownController.contents().last()[0].textContent = dropdownControllerData.text;\n          $dropdownController.find('[class^=\"c-icon-\"]').removeClass('c-icon-' + dropdownControllerData.altIcon).addClass('c-icon-' + dropdownControllerData.icon);\n        } else {\n          $dropdownController.contents().last()[0].textContent = dropdownControllerData.altText;\n          $dropdownController.find('[class^=\"c-icon-\"]').removeClass('c-icon-' + dropdownControllerData.icon).addClass('c-icon-' + dropdownControllerData.altIcon);\n        }\n      }\n\n      var $content = $(this).closest('.o-dropdown').children('.o-dropdown__content')\n\n      if ($(this).closest('.o-menubar__item').length) {\n        closeAll();\n        $(this)\n          .addClass('is-active')\n          .attr('aria-expanded', 'true')\n          .closest('.o-menubar__item')\n          .find('.o-dropdown__content')\n          .toggleClass('show-content')\n          .attr('aria-hidden', 'false');\n      }\n      if ($(this).hasClass('is-active') && !($(this).closest('.o-menubar__item').length) ) {\n        $content.removeClass('m-product-operations__content--visible');\n        var $this = $(this);\n          \n          setTimeout(function() {\n            $this\n            .removeClass('is-active')\n            .attr('aria-expanded', 'false')\n            .closest('.o-dropdown')\n            .children('.o-dropdown__content')\n            .removeClass('show-content')\n            .attr('aria-hidden', 'true');\n            \n          }, 0);\n      } else {\n        $(this)\n          .addClass('is-active')\n          .attr('aria-expanded', 'true')\n          .closest('.o-dropdown')\n          .children('.o-dropdown__content')\n          .addClass('show-content')\n          .attr('aria-hidden', 'false');\n          $content.addClass('m-product-operations__content--visible');\n      }\n    }\n    if($(this).attr('data-layout-controller-hidden')){\n      $(this).addClass('hide-content');\n    }\n    return false;\n  }\n\n  function init () {\n    $('.o-dropdown').on('keypress click', '.o-dropdown__controller', dropdown);\n    exitDropdown();\n  }\n\n  return {\n    init: init\n  };\n})();"],"file":"o-dropdown.js"}