{"version":3,"sources":["coronita/objects/o-tabs.js"],"names":["Coronita","clientflow","oTabs","KEY_SPACE","KEY_ENTER","KEY_END","KEY_HOME","KEY_ARROW_LEFT","KEY_ARROW_RIGHT","KEY_TAB","KEY_DOWN_EVENTS","CLASS_ACTIVE","SELECTOR_ACTIVE","userData","data","changeTab","tab","focus","autoloadPanel","selectTab","selectPanel","keydownTab","ev","currentTab","currentTarget","tabs","$refs","indexOf","keyCode","preventDefault","previousElementSibling","Array","from","length","nextElementSibling","clickTab","isClick","type","panelId","getAttribute","panel","document","getElementById","previousTab","activeTab","previousPanel","classList","remove","add","setAttribute","onChangeTab","parentNode","querySelector","setActiveTabindex","currentSelected","init","id","querySelectorAll","forEach","addEventListener","ui","$","each","attr"],"mappings":"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","sourcesContent":["// OBJECT - o-tabs\n\nCoronita.clientflow.oTabs = (function () {\n  const KEY_SPACE = 32;\n  const KEY_ENTER = 13;\n  const KEY_END = 35;\n  const KEY_HOME = 36;\n  const KEY_ARROW_LEFT = 37;\n  const KEY_ARROW_RIGHT = 39;\n  const KEY_TAB = 9;\n  const KEY_DOWN_EVENTS = [KEY_ARROW_LEFT, KEY_ARROW_RIGHT, KEY_HOME, KEY_END];\n  const CLASS_ACTIVE = 'is-active';\n  const SELECTOR_ACTIVE = `.${CLASS_ACTIVE}`;\n\n  return function (userData) {\n    let data = {};\n\n    function changeTab (tab) {\n      tab.focus();\n      if (userData.autoloadPanel) {\n        selectTab(tab);\n        selectPanel(tab);\n      }\n    }\n    function keydownTab (ev) {\n      const currentTab = ev.currentTarget;\n      const tabs = data.$refs.tabs;\n\n      if (KEY_DOWN_EVENTS.indexOf(ev.keyCode) !== -1) {\n        ev.preventDefault();\n      }\n      if (ev.keyCode === KEY_ARROW_LEFT) {\n        changeTab(currentTab.previousElementSibling || Array.from(tabs)[tabs.length - 1]);\n      } else if (ev.keyCode === KEY_ARROW_RIGHT) {\n        changeTab(currentTab.nextElementSibling || tabs[0]);\n      } else if (ev.keyCode === KEY_HOME) {\n        changeTab(tabs[0]);\n      } else if (ev.keyCode === KEY_END) {\n        changeTab(tabs[tabs.length - 1]);\n      }\n    }\n\n    function clickTab (ev) {\n      if (isClick(ev)) {\n        const tab = ev.currentTarget;\n        ev.preventDefault();\n        selectTab(tab);\n        selectPanel(tab);\n      }\n    }\n\n    function isClick (ev) {\n      return ev.type === 'click' || [KEY_ENTER, KEY_SPACE].indexOf(ev.keyCode) !== -1;\n    }\n\n    function selectPanel (tab) {\n      const panelId = tab.getAttribute('aria-controls');\n      const panel = document.getElementById(panelId);\n      const previousTab = data.$refs.activeTab;\n      const previousPanel = document.getElementById(previousTab.getAttribute('aria-controls'));\n\n      previousTab.classList.remove(CLASS_ACTIVE);\n      tab.classList.add(CLASS_ACTIVE);\n      data.$refs.activeTab = tab;\n\n      previousPanel.setAttribute('aria-hidden', 'true');\n      panel.setAttribute('aria-hidden', 'false');\n\n      if (typeof userData.onChangeTab === 'function') {\n        userData.onChangeTab({\n          currentTarget: tab\n        });\n      }\n    }\n\n    function selectTab (currentTab) {\n      const previousTab = currentTab.parentNode.querySelector('[aria-selected=\"true\"]');\n\n      previousTab.setAttribute('tabindex', '-1');\n      previousTab.setAttribute('aria-selected', 'false');\n\n      currentTab.setAttribute('tabindex', '0');\n      currentTab.setAttribute('aria-selected', 'true');\n    }\n\n    function setActiveTabindex (ev) {\n      if (ev.keyCode === KEY_TAB) {\n        const tab = ev.currentTarget;\n        const currentSelected = data.$refs.activeTab;\n        if (tab !== currentSelected) {\n          currentSelected.setAttribute('tabindex', '0');\n          currentSelected.setAttribute('aria-selected', 'true');\n          tab.setAttribute('tabindex', '-1');\n          tab.setAttribute('aria-selected', 'false');\n        }\n      }\n    }\n\n    /**\n     * Init method\n     * @public\n     */\n    function init () {\n      const oTabs = document.getElementById(`o-tabs-${userData.id}`);\n      data.$refs = {\n        oTabs: oTabs,\n        tabs: oTabs.querySelector('[role=\"tablist\"]').querySelectorAll('[role=\"tab\"]'),\n        activeTab: oTabs.querySelector(SELECTOR_ACTIVE),\n      };\n\n      Array.from(data.$refs.tabs).forEach(tab => {\n        tab.addEventListener('click', clickTab);\n        tab.addEventListener('keydown', keydownTab);\n        tab.addEventListener('keydown', clickTab);\n        tab.addEventListener('keydown', setActiveTabindex);\n      });\n    }\n\n    return {\n      init\n    };\n  };\n})();\n\nCoronita.ui.oTabs = (function () {\n  function init () {\n    $('[data-coronita-o-tabs]').each(function () {\n      const oTabs = Coronita.clientflow.oTabs({\n        id: $(this).attr('data-coronita-o-tabs'),\n        autoloadPanel: false\n      });\n      oTabs.init();\n    });\n  }\n\n  return {\n    init: init\n  };\n})();\n"],"file":"o-tabs.js"}