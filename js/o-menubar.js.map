{"version":3,"sources":["o-menubar.js"],"names":["$","document","ready","setup_navigation","fn","settings","jQuery","extend","menuHoverClass","top_level_links","find","hover","is","attr","closest","removeClass","next","addClass","focus","click","e","stopPropagation"],"mappings":"AAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAW;AAC5BF,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBG,gBAAhB;AACA,CAFD;;AAIAH,CAAC,CAACI,EAAF,CAAKD,gBAAL,GAAwB,UAASE,QAAT,EAAmB;AAE1CA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc;AACxBC,IAAAA,cAAc,EAAE;AADQ,GAAd,EAERH,QAFQ,CAAX,CAF0C,CAM1C;AACA;;AAEA,MAAII,eAAe,GAAGT,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,kBAAb,CAAtB,CAT0C,CAW1C;AACA;AACA;AACA;;AAGAV,EAAAA,CAAC,CAACS,eAAD,CAAD,CAAmBE,KAAnB,CACC,YAAU;AACT,QAAIX,CAAC,CAAC,IAAD,CAAD,CAAQY,EAAR,CAAW,iBAAX,CAAJ,EAAmC;AAClCZ,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,eAAb,EAA8B,MAA9B;AACA;;AAAA;AACDb,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQc,OAAR,CAAgB,YAAhB,EACEJ,IADF,CACO,MAAIL,QAAQ,CAACG,cADpB,EAEGK,IAFH,CAEQ,aAFR,EAEuB,MAFvB,EAGGE,WAHH,CAGeV,QAAQ,CAACG,cAHxB;AAIAR,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,IAAR,CAAa,kBAAb,EACEH,IADF,CACO,aADP,EACsB,OADtB,EAEEI,QAFF,CAEWZ,QAAQ,CAACG,cAFpB;AAGA,GAZF,EAaC,YAAU;AACT,QAAIR,CAAC,CAAC,IAAD,CAAD,CAAQY,EAAR,CAAW,iBAAX,CAAJ,EAAmC;AAClCZ,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,eAAb,EAA8B,OAA9B;AACA;;AAAA;AACD,GAjBF;AAmBAb,EAAAA,CAAC,CAACS,eAAD,CAAD,CAAmBS,KAAnB,CAAyB,YAAU;AAClC,QAAIlB,CAAC,CAAC,IAAD,CAAD,CAAQY,EAAR,CAAW,iBAAX,CAAJ,EAAmC;AAClCZ,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,eAAb,EAA8B,MAA9B;AACA;;AAAA;AACDb,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQc,OAAR,CAAgB,YAAhB,EACEJ,IADF,CACO,MAAIL,QAAQ,CAACG,cADpB,EAEGK,IAFH,CAEQ,aAFR,EAEuB,MAFvB,EAGGE,WAHH,CAGeV,QAAQ,CAACG,cAHxB;AAIAR,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,IAAR,CAAa,kBAAb,EACEH,IADF,CACO,aADP,EACsB,OADtB,EAEEI,QAFF,CAEWZ,QAAQ,CAACG,cAFpB;AAGA,GAXD;AAaAR,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYkB,KAAZ,CAAkB,YAAU;AAAEnB,IAAAA,CAAC,CAAC,MAAIK,QAAQ,CAACG,cAAd,CAAD,CAA+BK,IAA/B,CAAoC,aAApC,EAAmD,MAAnD,EAA2DE,WAA3D,CAAuEV,QAAQ,CAACG,cAAhF,EAAgGE,IAAhG,CAAqG,kBAArG,EAAyHG,IAAzH,CAA8H,UAA9H,EAAyI,CAAC,CAA1I;AAA+I,GAA7K;AAEAb,EAAAA,CAAC,CAAC,IAAD,CAAD,CAAQmB,KAAR,CAAc,UAASC,CAAT,EAAW;AACxBA,IAAAA,CAAC,CAACC,eAAF;AACA,GAFD;AAGA,CAtDD","sourcesContent":["$(document).ready(function() {\n\t$('.o-menubar').setup_navigation();\n}); \n\n$.fn.setup_navigation = function(settings) {\n\n\tsettings = jQuery.extend({\n\t\tmenuHoverClass: 'show-content',\n\t}, settings);\n\t\n\t// Add ARIA role to menubar and menu items\n\t// $(this).attr('role', 'menubar').find('li').attr('role', 'menuitem');\n\t\n\tvar top_level_links = $(this).find('.o-menubar__link');\n\n\t// Added by Terrill: (removed temporarily: doesn't fix the JAWS problem after all)\n\t// Add tabindex=\"0\" to all top-level links \n\t// Without at least one of these, JAWS doesn't read widget as a menu, despite all the other ARIA\n\t//$(top_level_links).attr('tabindex','0');\n\n\t\n\t$(top_level_links).hover(\n\t\tfunction(){\n\t\t\tif ($(this).is('[aria-haspopup]')) {\n\t\t\t\t$(this).attr('aria-expanded', 'true');\n\t\t\t};\n\t\t\t$(this).closest('.o-menubar')\n\t\t\t\t.find('.'+settings.menuHoverClass)\n\t\t\t\t\t.attr('aria-hidden', 'true')\n\t\t\t\t\t.removeClass(settings.menuHoverClass);\n\t\t\t$(this).next('.o-menubar__menu')\n\t\t\t\t.attr('aria-hidden', 'false')\n\t\t\t\t.addClass(settings.menuHoverClass);\n\t\t},\n\t\tfunction(){\n\t\t\tif ($(this).is('[aria-haspopup]')) {\n\t\t\t\t$(this).attr('aria-expanded', 'false');\n\t\t\t};\n\t\t}\n\t);\n\t$(top_level_links).focus(function(){\n\t\tif ($(this).is('[aria-haspopup]')) {\n\t\t\t$(this).attr('aria-expanded', 'true');\n\t\t};\n\t\t$(this).closest('.o-menubar')\n\t\t\t.find('.'+settings.menuHoverClass)\n\t\t\t\t.attr('aria-hidden', 'true')\n\t\t\t\t.removeClass(settings.menuHoverClass);\n\t\t$(this).next('.o-menubar__menu')\n\t\t\t.attr('aria-hidden', 'false')\n\t\t\t.addClass(settings.menuHoverClass);\n\t});\n\n\t$(document).click(function(){ $('.'+settings.menuHoverClass).attr('aria-hidden', 'true').removeClass(settings.menuHoverClass).find('.o-menubar__link').attr('tabIndex',-1); });\n\t\n\t$(this).click(function(e){\n\t\te.stopPropagation();\n\t});\n}\n"],"file":"o-menubar.js"}