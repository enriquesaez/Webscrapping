{"version":3,"sources":["bbva.ui.js"],"names":["$B","$","_","timeStampArray","customInputClasses","$body","document","body","$B_ui","provide","on","ev","keyCodes","comma","decimalPoint","point","hasClass","keyCode","val","prepareValidationFloat","activeClass","toggleActiveClass","el","parentActive","radioBehavior","is","closest","toggleClass","isActiveItem","item","groupName","data","hideActiveElements","undefined","tagName","each","i","visibility","removeClass","toggle","show","hide","transition","utils","aria","applyVisibility","visibilityShow","$context","currentTarget","visibilityHide","length","siblings","find","switcher","element","tabs","tabsChildren","selected","id","addClassAndDisable","container","addClass","attr","updateCustomElementsStatus","removeClassAndEnable","filter","removeAttr","toggleBasedOnVisibility","changeInputStates","containers","listenClickOutside","bind","unbind","changevisibility","hideWhenClickOutside","closeElement","closableElement","speed","closeElem","slideUp","fadeOut","slideUpFadeOut","animate","height","opacity","effect","options","_options","split","parseInt","c_buscadores_predictivoLiquido","objects","object","obj","itemsmax","camposBuscar","listObj","capaJslist","listAllBtns","$obj","selectorCSSButtons","$buttons","classesOptions","jsListClass","keyUp","listFather","listTable","listTableLength","theadEstatico","theadEstaticoThead","theadEstaticoTipoLabel","mixinClass","mensaje","inputText","listLabel","rowsItems","rowVisible","inputShowAll","searchListObj","isUndefined","List","valueNames","listClass","searchClass","search","last","watermark","off","preventDefault","stopPropagation","appConfig","enableTabletFeatures","capabilities","touch","ui","scrollElement","customScroll2","scrollType","keyup","value","dialogCenter","focus","trigger","c_widget_autocompletar","selector","ulClass","selectorClass","selectedClass","jQSelector","jQSelectorParent","ancho","width","jQSelectorParentLeftPosition","jQSelectorParentViewport","jQSelectorId","autocomplete","source","minLength","position","my","at","of","create","$target","target","focusout","isArray","indexOf","change","open","event","ul","c_widget_autocompletarGetUl","ulStyle","ulWidth","ulHeight","anchoCompleto","outerWidth","css","Math","min","outerHeight","c_widget_autocompletarRemoveScroll","wrap","parents","offset","left","close","remove","unwrap","c_menu_pestanasOperativasConsultas","contenedorMenu","pestanaActual","cerrando","valueDataPestana","contenedorContenido","cerrarSilentWrapper","silentWrapper","end","innerHTML","publish","togglePestanas","index","pestanaAux","$pestana","slideDown","parent","checkShowPersonalizarAndLoadProductData","autoloads","autoload","empty","app","AppView","prototype","prepareAutoload","children","html","isDuplicateEvent","toggleDisabled","wrapper","isChecked","checked","$checkbox","input","targetElement","$inputs","$table","$tableParent","contentPre","get","prepend","customScrollbar","initCropImage","defaults","cropContainer","context","extend","$cropContent","$el","foto","model","inputs","name","coord","$img","initCrop","append","cropFn","cropSelectionEnd","coords","Jcrop","onChange","onSelect","clickToCall","captchaActivated","ClickToCall","viewContext","window","enableCaptcha","$widgetContenedor","$cajaAyuda","$asistenteSpan","$botonEnviarDatos","onFocusOut","mostrarError","msg","recargarImagen","timestamp","Number","Date","llamarTelefono","telefono","tipo","test","replace","getJSON","datos","SeguimientoClickToCallAyudaSC","literals","areapersonal","telefono_invalido","validarCaptcha","codigo","sCaptcha","enviarTelefono","isMobile","initModal","dialog","content","tmpl","button","dialogOptions","openModal","exists","validarTelefono","tlf","bValidado","nTlfno","substring","isNaN","habilitarInput","tlf1","tlf2","habilitarTlfInternacional","check","initClickToCall","insertTabIndex","elements","add","$this","e","key","which","autoCCCInputJump","inputsCCC","inputIBAN","inputIndex","currentLength","text_diff","clipboardData","substr","delete_already_in","checkCCCInput20digits","self","current","introValue","previous","next","not","setTimeout","cccNumber","prepareIBANNumber","formatIbanNumber","checkCCCInput","typeFirst","typeSecond","typeThird","calculoIBANstopper","cccFull","todosWaterMark","todosEmpty","$currentInput","currentInputValue","$inputsCCC","select","listItemNavigation","params","$items","itemsNumber","currentItem","nextItem","getNextItem","direction","goNext","jumpToNext","click","autoInputJump","inputSize","checkInput","printReady","printButton","makePrintable","print","classChecked","classDisabled","classInactivoChecked","updateCustomInputImage","elemento","jQuery","$parentLabel","initFormComponents","elRadios","elCopyButtons","elChecks","classPredictivoLiquido","initStatus","$item","tipoInput","$itemInput","after","addZeroClipboardSWFLayer","zcClient","ie_version","isFunction","ZeroClipboard","readyEvent","copiedToClipboard","isMvc","thisGroupName","first","avoidPaste","disableFormElements","formElements","enableFormElements","tooltip","initConmutador","posicionarPuntero","boton","botonLeft","botonSize","contenedor","puntero","punteroSize","iniciarPuntero","$conmutador","getRSS","url","googleURL","entries","contenido","responseData","feed","cachedTooltip","staticPath","appendTo","accion","comentario","tooltipDiv","elPosition","desplazamientoX","tooltipClose","onMouseMoveFunction","tooltipOpen","cssTooltipWarper","cssTooltipPointerArrow","JSON","parse","top","type","toUpperCase","parentNode","className","src","widget","_create","hover","blur","tooltipBottom","tooltipRightBottom","tooltipFlecha","tooltipVertical","prevAll","altura","minHeight","c_widget_scroll","elementosPorPagina","numeroDePaginas","animatioDuration","indice","autoPlay","autoPlayTime","_autoPlayResource","getPagerItemClicked","initialize","liItems","getDomContentLis","getDivContentWidth","widthSobrante","ceil","getDomContentUl","eq","setInterval","play","$currentTarget","currentClicked","existenFlechas","set","clearInterval","checkIndice","updatePager","updateItems","getDomPagerLi","right","max","numeroElementosPintar","numeroElementosPorPaginacion","reverse","flagStop","stopInterval","startInterval","setLinkedInterval","fn","indexCampania","sendClosedCampaign","getDomCloserLi","reorganizeSlides","reorganizePagination","ajax","success","paginas","paginasPorPaginacion","currentSlide","getActiveIndex","hidePagination","currentIndex","$pags","slice","prevUntil","checkArrows","updateCloser","carousel","currentStep","stepsLength","delegate","eventIds","literalesSelector","setLiterales","setOptions","setClasesWidget","setClasesLi","setEventIds","thisElement","stepStatusText","step","indicadorProgresoOperativa","pasoCompletado","pasoEnProgreso","pasoNoIniciado","literales","isString","pasos","verNums","liItemsLength","delEventIds","destroy","Widget","call","trMax","newDivClass","table","clone","attributesLength","attributes","tableAttrs","thead","tbody","caption","colgroup","replaceWith","minSlider","maxSlider","stepSlider","initialValueSlider","wrapperValuePosition","wrapperValueUnit","wrapperValueSufix","wrapperValueFormat","wrapperCalculation","wrapperCalculationUnit","wrapperCalculationSufix","wrapperCalculationFormat","calculationFactor","applyFactor","inputValue","inputCalculation","slide","stop","customIntervals","customSelect","customInput","valMap","$element","$sliderElement","saldo","_getSalary","valMapLength","middleIndex","halfRange","removeRest","amount","_getRange","inArray","slider","range","customLimits","limitsContainer","isEmpty","_handleSliderPosition","_slide","keypress","ENTER","SPACE","_appendTooltips","_setSliderValue","_updateRangeView","sliderControl","secondaryControls","minValue","maxValue","_setSliderPosition","_setCustomInputValue","_stopDropFn","_preventSlideLess","_preventSlideMore","_stop","_getValueToCalculate","_getStepSize","prevent","valueToCalculate","stepSize","html_wrapperCalculation","tooltips","_getTooltipWrapper","what","wrapperPos","topWrapper","bottomWrapper","tooltip_wrapper","calculation","bottom","Error","_setNormalValue","_setCalculatedValue","pluck","parseFloat","isNextButton","selectedIndex","variation","isNull","selectmenu","result","newValue","interval","newResult","abs","tooltipFormattedValue","_formatTooltipValue","_addValueAndCenterTooltip","formatNumber","_getValue","valueCalculated","_formatTooltipValueCalculated","_positionTooltips","calculatedWidth","cssLeft","floor","formatParam","wrapperValue","map","saldoDisponible","salary","Globalize","m","minmax","updateTooltipPosition","updateValues","truncate","listResizer","truncateText","$select","selectMenuMenu","getSelectMenuMenu","selectMenuMenuUl","defaultText","transferClasses","textMaxLength","parentsUntil","idList","$list","targetOffsetTop","positionTopInViewport","scrollTop","viewportHeight","targetHeight","spaceBelow","spaceAbove","newListHeight","alturaTotal","_select","selectedData","push","enable","text","elMenu","limiter","reversed","maskedRegex","template","truncatedTextSelector","truncateWidth","RegExp","rtl","temporaryContainer","newTextLength","truncatedText","trim","c_contenedores_texto_truncado","texto","textoTruncado","$messageContainer","tipos","messageContainer","onKeyUp","inputSlider","opcionesDependientes","listaPredictivo","listaDependientes","pages","pageWidth","mostrarFlechas","liClass","olCode","olClass","_update","currentPoint","c_widget_datoEditable","action","message","triggerEl","cerrar","editar","error","editando","revert","elementoEditable","elementoTag","originalData","dependantfields","optionSeleccionado","size","DependantFields","esElementoDeFormulario","selectorTag","eliminaClaseDisabled","activaElementoFormulario","disabled","adecuaEstadoElementosElementos","activaElementosAgrupados","anyadeClaseDisabled","desActivaElementoFormulario","desactivaElementosAgrupados","metodos","activaRelacionados","selectores","desactivaRelacionados","actualizaRelacionados","pares","activa","desactiva","actualiza","selectRange","start","setSelectionRange","createTextRange","collapse","moveEnd","moveStart","getCursorPosition","pos","selectionStart","Sel","SelLength","selection","createRange","printSection","objToprint","$printFrame","printContent","staticRegex","printContentHtml","location","protocol","host","makePrint","frame","frames","print_frame","_printFrame","defaultPrintStyleSheet","version","frameBody","printDom","timeForRender","isLegacyIE","when","then","FilterGraphicChartsV2","getDefaults","graphic","charts","buildChart","chartData","series","GraphicCharts","barChart","areaChart","defaultChart","pieChart","destroyChart","createChartData","base","filteredOption","combo","filterDataByInterval","numbers","getId","variations","index1","variationList","types","renderAt","proccessChartData","filterProduct","filterInterval","filterType","selectedProduct","selectedInterval","selectedVariation","graphicData","xAxis","_index","serie","filterFamilies","filterFamily","idFamily","filterFamilyOptions","productFamily","createFilter","graphicId","filterArea","filterCombos","startAjax","toggleMenu","menu","loadViewIntoTmpl","selector2","require","view","viewId","validateNextTooltip","state","buttonCenter","infoTooltip","c_v05_mensajes_informativoTooltip","infoTooltipMsg","offsetTotalLeft","offsetTotalTop","mouseleave","navigateCatalog","numProductos","tipoAsesoramiento","$siblings","$parent","$parentIframe","$grid16","$grid8","$carteraVirtual","$iFrameCatalogo","$botonesAccion","$iframe","$asesoramiento","$buscadorMovimientos","autoloadModificadoPorUrl","alturaContenido","mapaCatalogo","idSeccion","urlAsesoramiento","productoSeleccionado","tipoBuscador","etiquetaSeleccionada","menurizacionArbol","router","appView","navView","publicNavigationGetOpcionMenu","catalogUrl","bridge","executeNavigation","loading","loadingClass","forceLoading","$catalogoProductos","$idIframeCentral","contents","$ofertaComercial","catalogoProductosOffset","idIframeCentralOffset","ofertaComercialOffset","tipoSegmento","setCookie","BreadcrumbView","updateBreadcrumbURL","tieneSegurosUnnim","prependTo","checkAutoloads","markInputWithError","li","messageId","c_v06_mensajes_errorValidacion","inputName","mouseout","getOverlayerProperties","layer","zIndex","loadingDefaults","autoStyle","callback","loadingData","setStyle","elLoadingMessage","measures","getMeasures","imageOffset","margin","imageOffsetInModal","correcionMargin","messageHeight","paddingTop","zindex","marginLeft","marginRight","imageHeight","wideContainer","$loadingContainer","loadingContainerPositionType","alreadyHasLoading","idLoading","nextAll","loadingVisorPdf","c_v06_mensajes_cargando","cargando","image","originalParent","originalPositionType","removeLoadings","_data","has","excludeLoadings","lenght","navigationLoading","defaultOptions","overlayClass","overlayZIndex","$bfirst","$loading","styleLoading","imgWidth","loadingWidth","background","centerLoading","initialClassOverlay","initialClassWrapper","classes","overlay","newUroboroText","lastLoadingClass","navigateAnchor","attrAnchor","animateTime","$destination","updateBodyHeight","$window","heightCorrection","isPublic","resize","totalWidth","totalHeight","launchPdfViewer","settings","widthMobile","divId","divClass","urlViewer","nativeLoadingSelector","selectors","zoomOut","zoomIn","download","numPages","paginator","errors","wrapperForced","prevDoc","nextDoc","urlPdf","legacyPrintable","resizeForcedError","isCrossDomain","visor_pdf","paginaAnterior","paginaSiguiente","pagina","de","replaceText","reducirZoom","ampliarZoom","imprimir","descargarOriginal","cerrarVisor","errores","noEsPosibleCarga","documentoNoValido","documentoNoEncontrado","documentoProtegido","documentoNoRenderizable","error500","headerPdf","miniatura","$contenedorMiniatura","contenedorMiniatura","iframeIndex","whiteOverlay","listaDocumentos","iframeContainer","iframeViewer","iframeViewerContents","errorWrapper","loadingCounter","lateErrorCounter","$pdfViewerContainer","docToSetReadState","disableBodyScroll","disable","closeViewer","pdfList","documentosAMarcar","changeCurrentTab","tab_id","escKey","getStyleForSizeError","errorWrapperId","currentErrorWrapper","style","overflow","sizeError","resizeViewer","newHeight","localization","alt","title","getPrintButton","printButtonContainer","removeViewerLoading","messageWarning","messageText","controlCorrespondenciaVirtualMensajesPdf","c_mensajes_informativoRefuerzo2","titulo","tituloAdvertenciaUps","iconoGrande","opciones","classAside","conContenedorTextoGestionable","interiorVisor","tituloAdvertencia","srcImg","messageError","c_v07_mensajes_errorAplicacion","tituloError","descripcion","manageErrors","isDownloadable","isError500","errorMessageText","getPdfFileName","a","file","createElement","href","pathname","lastIndexOf","trackDownload","pdfname","producto","checkProduct","product","isObject","registroContrato","descripcionProducto","idProducto","tmpFile","fileName","clientFlow","isBrowserCompatible","isIE10orEdge","navigator","msSaveOrOpenBlob","blob","fileExt","modalBrowserNotCompatible","browserNotCompatible","blockedBrowserMessage","logoutOnClose","hideCloseBtn","closeOnEscape","tracking","trackEvent","addDocumentToReadStateIfNotExist","doc","found","iframeLoaded","loadingInterval","renderErrorInterval","srcImgArrowLeftEnabled","srcImgArrowLeftDisabled","srcImgArrowRightEnabled","srcImgArrowRightDisabled","decodeURIComponent","header","conFlechasNavegacion","getPdfUrl","regex","match","getPdfFromUrl","parsePdfUrls","listPdfUrls","pdf","encodeURIComponent","loadTemplate","$templateTarget","viewerHeight","viewerWidth","idIframe","c_contenedores_visor_pdf","viewerId","viewerClass","viewerWidthMobile","c_contenedores_visorTabspdfs","$iframesTemplate","mixinPath","template_visor_pdf","createOpinator","$viewEl","opinatorEnabled","Opinator","fieldSelector","tabsInHeader","$tabsCopy","getTabs","$pestanas","isSelected","tabsMenu","getTabsCopy","unset","fixedHeader","$cabecera","headerHeight","classHeaderDefault","classHeaderFixed","dataPosition","getHeader","getHeaderHeight","publishHeaderPosition","newPosition","headerGap","gap","headerManipulation","goTop","documentScrollTop","anclaArriba","$anclaArriba","getAncla","anclaHide","anclaShow","windowScrollTop","posicionBottom","posicionAncla","stickyElements","elementList","sticked","ancla","customPosition","scrollTimeout","fnCallback","scroll","cached","isHeaderFixed","getScrollTop","windowIsBelowElement","elementScrollTop","elementHeight","makeCallback","afterCheck","eventOutsideElement","eventType","eventNamespace","condition","idJsEvent","$clickables","duration","easing","slideTour","$contenedorAyuda","c_contenedores_ayudas_slide","$html","$closeButton","hideTour","initConmutadorProductosFicha","listasListaProductos","modelo_ficha","alreadyExecuted","posicion","functions","eventoAbrirConmutador","listaTmplName","unsubscribe","subscribe","eventoCerrarConmutador","cambiarBuscador","p_nombreLista","objetoEncontrado","prodActual","indiceProductoActual","listaProductos","controlProductoFamiliaComboAutorizado","registrarEventoCambioProducto","cambiarBuscadorVisualizadores","listaAuxiliar","listaProductosVisualizadores","cambiarBuscadorTodos","listaSeleccionada","longitudFilas","longitudAutorizados","merge","cambiarComboTitulares","cambiarComboAutorizados","cambiarComboTodos","actualizarPosicionLinkAutorizado","mostarCargandoEncabezado","anchoLoading","anchoLoadingSinPx","before","ocultarCargandoEncabezado","establecerEventoFlagVisualizadores","flagVisualizadores","esProductoAutorizado","eventId","comprobarCambioPosicion","seHaCambiadoPosicionVisualizadores","lanzarEventoCambioFlagVisualizadores","nuevoEstadoFlagVisualizadores","urlProducto","cambioPosicionVisualizadores","save","_eventId","storage","session","clear","navigate","forcedNavigation","validationError","estamosEnVisualizadores","_posicion","cambioPosicion","registrarEventos","listasVisualizadores","tieneVisualizadores","listaTodos","nombreListaSeleccionada","primeraLista","listaProductosCliente","listaCambiada","cSelectMenu"],"mappings":"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","sourcesContent":["/**\r\n * @class $B_ui\r\n * @singleton\r\n */\r\n(function($B, $, _) {\r\n\r\n  var timeStampArray,\r\n    customInputClasses,\r\n    $body = $(document.body),\r\n    $B_ui = $B.provide($B, 'ui');\r\n\r\n  $body.on('keyup', '.c-form-importeMoneda input:text, [data-importe-i18n] input:text, .c-form-desdeHasta input:text', function(ev) {\r\n    var keyCodes = {\r\n      comma: 188,\r\n      decimalPoint: 110,\r\n      point: 190\r\n    };\r\n    if (!$(this).hasClass('no_keyup') && (ev.keyCode === keyCodes.comma || ev.keyCode === keyCodes.decimalPoint || ev.keyCode === keyCodes.point)) {\r\n      $(this).val(_.prepareValidationFloat($(this).val()));\r\n    }\r\n  });\r\n\r\n  /** PLUGINS DE VISIBILIDAD *******************************************/\r\n  /*\r\n   * @name $B.ui.changevisibility\r\n   * TODO: Documentar su uso\r\n   * De momento se puede ver aplicado en posicion global (desplegables quiero)\r\n   */\r\n  (function($B_ui, $) {\r\n\r\n    var activeClass = 'checked';\r\n\r\n    function toggleActiveClass(el, parentActive, radioBehavior) {\r\n      if (radioBehavior) {\r\n        if (!el.is('.' + activeClass)) {\r\n          if (parentActive) {\r\n            el.closest(parentActive).toggleClass(activeClass, el.is(':checked'));\r\n          }\r\n          el.toggleClass(activeClass, el.is(':checked'));\r\n        }\r\n      } else {\r\n        if (parentActive) {\r\n          el.closest(parentActive).toggleClass(activeClass);\r\n        }\r\n        el.toggleClass(activeClass);\r\n      }\r\n    }\r\n\r\n    function isActiveItem(item, groupName) {\r\n      return item.data('change-visibility').groupName === groupName;\r\n    }\r\n\r\n    function hideActiveElements(el, groupName) {\r\n      if (groupName !== undefined) {\r\n        $(el[0].tagName + '[data-change-visibility].' + activeClass).each(function(i) {\r\n          var item = $(this),\r\n            visibility;\r\n          if ((isActiveItem(item, groupName)) && (el[0] !== item[0])) {\r\n            visibility = item.data('change-visibility');\r\n            if (visibility.parentActive !== undefined) {\r\n              item.closest(visibility.parentActive).removeClass(activeClass);\r\n            }\r\n            item.removeClass(activeClass);\r\n            $(visibility.toggle, visibility.show).hide(visibility.transition);\r\n            $B.utils.aria.visibility(item, 'hide');\r\n            return;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function applyVisibility(visibility, ev) {\r\n      var visibilityShow = $(visibility.show),\r\n        //visibilityHide = $(visibility.show).siblings(visibility.hide);\r\n        //visibilityHide = $(visibility.hide); // original\r\n        //visibilityHide = ($(visibility.show).closest('.c-widget-conmutador')) ? $(visibility.show).siblings(visibility.hide) : $(visibility.hide); // plan B\r\n        $context = $(ev.currentTarget).closest('.c-widget-conmutador'),\r\n        visibilityHide;\r\n\r\n      if ($(visibility.show).length) {\r\n        visibilityHide = $(visibility.show).siblings(visibility.hide);\r\n      } else if ($context.length > 0) {\r\n        visibilityHide = $context.find(visibility.hide);\r\n      } else {\r\n        visibilityHide = $(visibility.hide);\r\n      }\r\n\r\n\r\n\r\n      //$(visibility.hide).hide(visibility.transition);\r\n      visibilityHide.hide(visibility.transition);\r\n      $B.utils.aria.visibility(visibilityHide, 'hide');\r\n      //$(visibility.show).show(visibility.transition);\r\n      $(visibility.show).show(visibility.transition);\r\n      $B.utils.aria.visibility(visibilityShow, 'show');\r\n\r\n      //$(visibility.toggle).toggle(visibility.transition);\r\n      /*$(visibility.toggle).toggle(visibility.transition, function () {\r\n        $B.utils.aria.visibility($(this), 'toggle');\r\n      });*/\r\n      $(visibility.toggle).toggle(visibility.transition);\r\n      $B.utils.aria.visibility($(visibility.toggle), 'toggle');\r\n\r\n      if ($('.c-botones-seleccion:not([data-switcher])').length) {\r\n        $B.utils.aria.switcher({\r\n          element: $('.c-botones-seleccion:not([data-switcher])'),\r\n          tabs: 'li',\r\n          tabsChildren: 'label',\r\n          selected: 'label.checked',\r\n          id: 'switcher-botones-seleccion'\r\n        });\r\n      }\r\n    }\r\n\r\n    function addClassAndDisable(container) {\r\n      container.find('[name]').each(function() {\r\n        //$(container + ' [name]').each(function () {\r\n        // If an input has been disabled before we shouldn't change it's state\r\n        // so I add a class that will be taken away on show\r\n        if ($(this).is(':disabled')) {\r\n          $(this).addClass('js-dontChangeState');\r\n        }\r\n        $(this).attr('disabled', 'disabled');\r\n      });\r\n      $B_ui.updateCustomElementsStatus(container);\r\n    }\r\n\r\n    //TODO: revisar comportamiento de la clase js-dontChangeState en casos en que los inputs esten disabled\r\n    function removeClassAndEnable(container) {\r\n      container.find('[name]').filter(':not([data-no-enabling])').each(function() {\r\n        //$(container + ' [name]').each(function () {\r\n        if ($(this).hasClass('js-dontChangeState')) {\r\n          $(this).removeClass('js-dontChangeState');\r\n        } //clase js-dontChangeStateFix solucion para disabled\r\n        if (!$(this).hasClass('js-dontChangeStateFix')) {\r\n          $(this).removeAttr('disabled');\r\n        }\r\n      });\r\n      $B_ui.updateCustomElementsStatus(container);\r\n    }\r\n\r\n    function toggleBasedOnVisibility(container) {\r\n      container.find('[name]').each(function() {\r\n        //$(container + ' [name]').each(function () {\r\n        if ($(this).is(':visible')) {\r\n          $(this).removeAttr('disabled');\r\n        } else {\r\n          $(this).attr('disabled', true);\r\n        }\r\n      });\r\n      $B_ui.updateCustomElementsStatus(container);\r\n    }\r\n\r\n    /*function changeInputStates(visibility) {\r\n      var containers,\r\n        i;\r\n\r\n      if (visibility.hide) {\r\n        containers = visibility.hide.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          addClassAndDisable(containers[i]);\r\n        }\r\n      }\r\n\r\n      if (visibility.show) {\r\n        containers = visibility.show.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          removeClassAndEnable(containers[i]);\r\n        }\r\n      }\r\n\r\n      if (visibility.toggle) {\r\n        containers = visibility.toggle.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          toggleBasedOnVisibility(containers[i]);\r\n        }\r\n      }\r\n    }*/\r\n\r\n    function changeInputStates(visibility, ev) {\r\n      var containers,\r\n        i,\r\n        $context = $(ev.currentTarget).closest('.c-widget-conmutador'),\r\n        visibilityHide;\r\n\r\n      if ($(visibility.show).length) {\r\n        visibilityHide = $(visibility.show).siblings(visibility.hide);\r\n      } else if ($context.length > 0) {\r\n        visibilityHide = $context.find(visibility.hide);\r\n      } else {\r\n        visibilityHide = $(visibility.hide);\r\n      }\r\n\r\n      if (visibility.hide) {\r\n        /*containers = visibility.hide.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          addClassAndDisable(containers[i]);\r\n        }*/\r\n        addClassAndDisable(visibilityHide);\r\n      }\r\n\r\n      if (visibility.show) {\r\n        /*containers = visibility.show.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          removeClassAndEnable(containers[i]);\r\n        }*/\r\n        removeClassAndEnable($(visibility.show));\r\n      }\r\n\r\n      if (visibility.toggle) {\r\n        /*containers = visibility.toggle.split(',');\r\n        for (i = 0; i < containers.length; i += 1) {\r\n          toggleBasedOnVisibility(containers[i]);\r\n        }*/\r\n        toggleBasedOnVisibility($(visibility.toggle));\r\n      }\r\n    }\r\n\r\n    function listenClickOutside(el, visibility) {\r\n      $(document).bind('click', function(ev) {\r\n        el.removeClass(activeClass)\r\n          .closest('.' + activeClass)\r\n          .removeClass(activeClass);\r\n        $(visibility.show + ',' + visibility.toggle).hide(visibility.transition);\r\n        $B.utils.aria.visibility($(visibility.show + ',' + visibility.toggle), 'hide');\r\n        $(this).unbind(ev);\r\n      });\r\n    }\r\n\r\n    $B_ui.changevisibility = function(ev) {\r\n      var el = $(ev.currentTarget),\r\n        visibility = el.data('change-visibility') || {},\r\n        radioBehavior = visibility.radioBehavior || false;\r\n\r\n      hideActiveElements(el, visibility.groupName, radioBehavior);\r\n      toggleActiveClass(el, visibility.parentActive, radioBehavior);\r\n      applyVisibility(visibility, ev);\r\n      changeInputStates(visibility, ev);\r\n      if (visibility.hideWhenClickOutside !== 'false') {\r\n        listenClickOutside(el, visibility);\r\n      }\r\n    };\r\n  }($B_ui, $));\r\n\r\n  /*\r\n   * @name $B.ui.closeElement\r\n   * TODO: Documentar su uso\r\n   */\r\n  $B_ui.closeElement = (function() {\r\n    // now using object instead of switch is faster\r\n    var closableElement,\r\n      speed = 400, // jQuery's default animation speed\r\n      closeElem = {\r\n        hide: function() {\r\n          return closableElement.hide();\r\n        },\r\n\r\n        slideUp: function() {\r\n          return closableElement.slideUp(speed);\r\n        },\r\n\r\n        fadeOut: function() {\r\n          return closableElement.fadeOut(speed);\r\n        },\r\n\r\n        slideUpFadeOut: function() {\r\n          return closableElement.animate({\r\n            height: 0,\r\n            opacity: 0\r\n          }, 200, 'linear').slideUp(function() {\r\n            $(this).removeAttr('style').hide();\r\n          });\r\n        }\r\n      },\r\n      effect = 'hide'; // defualt effect\r\n\r\n    return function(ev) {\r\n      closableElement = $(ev.currentTarget).closest('[data-closable]');\r\n\r\n      if (!closableElement.length) {\r\n        return; // return, can't chain anyway\r\n      }\r\n\r\n      var options = closableElement.data('closable'),\r\n        _options;\r\n\r\n      if (options) {\r\n        _options = options.split(' ');\r\n        if (_options) {\r\n          options = _options;\r\n          effect = options[0];\r\n          speed = parseInt(options[1], 0);\r\n        } else {\r\n          effect = options;\r\n        }\r\n      }\r\n\r\n      return closeElem[effect]();\r\n    };\r\n  }());\r\n\r\n\r\n  /**\r\n   * c_buscadores_predictivoLiquido\r\n   */\r\n  $B_ui.c_buscadores_predictivoLiquido = function(objects) {\r\n    objects.each(function(i, object) {\r\n      //comprobamos si ha sido procesado ya\r\n      if ($(object).attr('c_buscadores_predictivoLiquidoProcesado') === 'true' ||\r\n        $(object).hasClass('c-buscadores-predictivo-liquido-filter')) {\r\n        return;\r\n      }\r\n      $(object).attr('c_buscadores_predictivoLiquidoProcesado', true);\r\n\r\n      var obj = $(object),\r\n        itemsmax = obj.data('itemsmax'),\r\n        camposBuscar = obj.data('campos-buscar').split(','),\r\n        listObj,\r\n        capaJslist = obj.find('.js-list'),\r\n        listAllBtns = (function($obj) {\r\n          var\r\n            selectorCSSButtons = 'span.buscarBtn input[type=\"image\"], .infoProductos span.js-showAll',\r\n            $buttons = obj.find(selectorCSSButtons);\r\n          if (!$buttons[0]) {\r\n            $buttons = $(selectorCSSButtons);\r\n          }\r\n          return $buttons;\r\n        }(obj)),\r\n        classesOptions = function(jsListClass, itemsmax, keyUp, ev) {\r\n          var listFather = jsListClass.closest('.js-listFather'),\r\n            listTable = listFather.find('table'),\r\n            listTableLength = listTable.length,\r\n            theadEstatico = listFather.closest('.theadEstatico'),\r\n            theadEstaticoThead = theadEstatico.find('thead'),\r\n            theadEstaticoTipoLabel = theadEstatico.find('.tipoLabel'),\r\n            mixinClass = jsListClass.closest('.c-buscadores-predictivo-liquido'),\r\n            mensaje = mixinClass.find('.c-mensajes-informativoRefuerzo'),\r\n            inputText = mixinClass.find('.js-buscador'),\r\n            listLabel = listFather.find('label'),\r\n            rowsItems = jsListClass.find('li, tr'),\r\n            rowVisible = jsListClass.find('li:visible, tr:visible'),\r\n            inputShowAll = obj.find('input[data-action=\"listAll\"]'),\r\n            searchListObj;\r\n\r\n          rowsItems.removeClass('last');\r\n\r\n          mensaje.addClass('hidden');\r\n\r\n          //used this to prevent mvc's from adding disabled states to this input\r\n          if (!_.isUndefined($(inputShowAll).attr('disabled'))) {\r\n            $(inputShowAll).removeAttr('disabled');\r\n          }\r\n\r\n          //show search list\r\n          if (!_.isUndefined(ev) && $(ev.currentTarget).data('action') === 'listAll') {\r\n            if ($(ev.currentTarget).is('input') && inputText.val() !== $(inputText).attr('placeholder')) {\r\n              searchListObj = new List(obj[0], {\r\n                valueNames: camposBuscar,\r\n                listClass: 'js-list',\r\n                searchClass: 'js-buscador'\r\n              });\r\n              searchListObj.search(inputText.val());\r\n              $(rowsItems).last().addClass('last');\r\n              return;\r\n            }\r\n            listFather.addClass('resultados');\r\n            jsListClass.addClass('conResultados');\r\n            if (!listTable.hasClass('columnas6')) {\r\n              listFather.addClass('separador3').attr({\r\n                'aria-expanded': true\r\n              });\r\n            }\r\n            $(rowsItems).removeClass('hidden');\r\n            $(rowsItems).last().addClass('last');\r\n            return;\r\n          }\r\n\r\n          if (rowsItems.length > itemsmax) {\r\n            theadEstatico.addClass('conScroll');\r\n          } else {\r\n            theadEstatico.find('.separador3').removeClass('separador3');\r\n            theadEstatico.find('.resultados').removeClass('resultados');\r\n          }\r\n\r\n          if (rowsItems.last()) {\r\n            rowsItems.last().addClass('last');\r\n          } else {\r\n            rowsItems.removeClass('last');\r\n          }\r\n\r\n          if (rowVisible.length === 0) {\r\n            theadEstaticoThead.addClass('hidden');\r\n            theadEstaticoTipoLabel.addClass('hidden');\r\n            listFather.removeClass('resultados separador3').attr({\r\n              'aria-expanded': false\r\n            });\r\n            jsListClass.removeClass('conResultados');\r\n            if (keyUp === true && inputText.val() !== '') {\r\n              mensaje.removeClass('hidden');\r\n            }\r\n          } else {\r\n            theadEstaticoThead.removeClass('hidden');\r\n            theadEstaticoTipoLabel.removeClass('hidden');\r\n            jsListClass.addClass('conResultados');\r\n            if (!listTable.hasClass('columnas6')) {\r\n              listFather.addClass('separador3').attr({\r\n                'aria-expanded': true\r\n              });\r\n            }\r\n          }\r\n\r\n          if (rowVisible.length > itemsmax) {\r\n            listFather.addClass('resultados');\r\n            if (listTableLength === 0) {\r\n              listLabel.addClass('menor');\r\n            }\r\n          } else {\r\n            listFather.removeClass('resultados');\r\n            theadEstatico.find('.js-listFather').removeClass('resultados');\r\n            if (mixinClass.closest('.c-desplegable-consultas').length !== 0 || mixinClass.closest('.c-form-predictivo-liquido').length !== 0) {\r\n              if (listTableLength === 0) {\r\n                listLabel.addClass('menor');\r\n              }\r\n            } else {\r\n              if (listTableLength === 0) {\r\n                if (!listLabel.hasClass('labelProductosFicha')) {\r\n                  listLabel.removeClass('menor');\r\n                } else {\r\n                  listLabel.addClass('menor');\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          //placeholder\r\n          inputText.watermark(inputText.attr('placeholder'));\r\n        };\r\n\r\n      if (capaJslist.find('li, tr').length > itemsmax) {\r\n\r\n        listObj = new List(obj[0], {\r\n          valueNames: camposBuscar,\r\n          listClass: 'js-list',\r\n          searchClass: 'js-buscador'\r\n        });\r\n        capaJslist = obj.find('.js-list');\r\n\r\n        capaJslist.find('input:not(:checked)').closest('li, tr').addClass('hidden');\r\n\r\n        classesOptions(capaJslist, itemsmax);\r\n\r\n        obj.off('keyup', '.js-buscador');\r\n\r\n        //Listar todas las cuentas\r\n        listAllBtns.on('click', function(ev) {\r\n          ev.preventDefault();\r\n          ev.stopPropagation();\r\n          classesOptions(capaJslist, itemsmax, false, ev);\r\n          //scroll\r\n          if ($B.appConfig.enableTabletFeatures && $B.capabilities.touch) {\r\n            $B.ui.scrollElement(capaJslist);\r\n          } else {\r\n            capaJslist.customScroll2({\r\n              scrollType: 'predictivo'\r\n            });\r\n            capaJslist.customScroll2('setPosition');\r\n          }\r\n        });\r\n\r\n        obj.on({\r\n          keyup: function() {\r\n            if (this.value === '') {\r\n              capaJslist.find('li, tr').addClass('hidden');\r\n            }\r\n\r\n            classesOptions(capaJslist, itemsmax, true);\r\n\r\n            //scroll\r\n            if ($B.appConfig.enableTabletFeatures && $B.capabilities.touch) {\r\n              $B.ui.scrollElement(capaJslist);\r\n            } else {\r\n              capaJslist.customScroll2({\r\n                scrollType: 'predictivo'\r\n              });\r\n              capaJslist.customScroll2('setPosition');\r\n            }\r\n\r\n            $B_ui.dialogCenter();\r\n          },\r\n          focus: function() {\r\n            capaJslist.find('input:not([type=checkbox]):checked').removeAttr('checked').trigger('change');\r\n          }\r\n        }, '.js-buscador');\r\n\r\n      } else {\r\n        classesOptions(capaJslist, itemsmax);\r\n      }\r\n    });\r\n\r\n    return objects;\r\n  };\r\n\r\n\r\n  /*\\\r\n   * c_widget_autocompletar\r\n   [ method ]\r\n   > Parametros\r\n   - selector (string u objeto de jQuery) Selector del input que al que aplicar el autocomplete\r\n   - options (string) Opciones que recibe el plugin, como minimo hay que pasar source que es el array de opciones (ver http://jqueryui.com/demos/autocomplete/)\r\n   - options.selectorClass es la clase del span superior para coger bien la medida\r\n   - ulClass (string) #optional Clase CSS a aplicar al <ul> generado\r\n   > Uso en el MVC\r\n   | $B_ui.c_widget_autocompletar('#ingresosAnuales', { source: [\"Menos de 10.000&euro;\", \"Entre 10.000 y 25.000&euro;\"] }, 'miClase' );\r\n   | $B_ui.c_widget_autocompletar(this.$('#ingresosAnuales'), { source: [\"Menos de 10.000&euro;\", \"Entre 10.000 y 25.000&euro;\"] }, 'miClase' );\r\n  \\*/\r\n  $B_ui.c_widget_autocompletar = function(selector, options, ulClass) {\r\n    var selectorClass = options.selectorClass || 'c-widget-autocompletar',\r\n      activeClass = 'activo',\r\n      selectedClass = 'seleccionado',\r\n      jQSelector = (typeof selector === 'string') ? $(selector) : selector,\r\n      jQSelectorParent = jQSelector.closest('span.' + selectorClass),\r\n      ancho = jQSelectorParent.width(),\r\n      jQSelectorParentLeftPosition = false,\r\n      jQSelectorParentViewport = $body.width(),\r\n      //anchoCompleto = jQSelectorParent.outerWidth(),\r\n      jQSelectorId = jQSelector.attr('id');\r\n\r\n    jQSelector.autocomplete({\r\n      source: options.source,\r\n      minLength: options.minLength,\r\n      position: {\r\n        my: 'left top',\r\n        at: 'left bottom',\r\n        of: jQSelector.closest('span.' + selectorClass)\r\n      },\r\n\r\n      create: function(ev, ui) {\r\n        var $target = $(ev.target);\r\n        $target.closest(selectorClass).on('click', function(ev) {\r\n          $(ev.currentTarget).addClass(activeClass).removeClass(selectedClass);\r\n        });\r\n\r\n        $target.focusout(function(ev) {\r\n          $target.closest(selectorClass).removeClass(activeClass);\r\n          if (!_.isArray(options.source) && options.source.indexOf($target.val()) >= 0) {\r\n            $target.closest(selectorClass).addClass(selectedClass);\r\n          }\r\n        });\r\n\r\n        if (!_.isArray(options.source) && options.source.indexOf($target.val()) >= 0) {\r\n          $target.closest(selectorClass).addClass(selectedClass);\r\n        }\r\n      },\r\n\r\n      change: function() {\r\n        $B_ui.dialogCenter();\r\n      }\r\n    });\r\n\r\n    //set custom class\r\n    if (ulClass) {\r\n      jQSelector.autocomplete('widget').addClass(ulClass);\r\n    }\r\n\r\n    //set input.id in ul.class\r\n    if (jQSelectorId) {\r\n      jQSelector.autocomplete('widget').addClass('ui-autocomplete-id-' + jQSelectorId);\r\n    }\r\n\r\n    jQSelector.autocomplete({\r\n      open: function(event, ui) {\r\n        var ul = $B_ui.c_widget_autocompletarGetUl(event.target),\r\n          ulStyle = ul.attr('style'),\r\n          ulWidth = ul.width(),\r\n          ulHeight,\r\n          anchoCompleto = $(this).closest('span.c-widget-autocompletar').outerWidth() ||\r\n          $(this).closest('span.js-c-widget-autocompletar').outerWidth();\r\n\r\n        //get max-height ul\r\n        if (!ul.data('max-height')) {\r\n          ul.data('max-height', parseInt(ul.css('max-height'), 10));\r\n        }\r\n        ulHeight = Math.min(ul.data('max-height'), ul.outerHeight());\r\n\r\n        //remove previous scroll\r\n        $B_ui.c_widget_autocompletarRemoveScroll(ul);\r\n\r\n\r\n        //necesita un refactor importante junto a maquetacion\r\n        ul.wrap('<div style=\"' + ulStyle + ' overflow:hidden; height: ' + ulHeight + 'px; position: absolute; padding-bottom: 2px\" data-autocomplete-scroll class=\"ui-autocomplete-scroll\" />');\r\n        ul.removeAttr('style').css({\r\n          'height': 'auto',\r\n          'max-height': 'none'\r\n        });\r\n\r\n        ul.css({\r\n          'max-width': anchoCompleto - 2,\r\n          'min-width': anchoCompleto - 2,\r\n          'width': anchoCompleto - 2\r\n        });\r\n\r\n        ul.parents('[data-autocomplete-scroll]').css({\r\n          'max-width': anchoCompleto,\r\n          'min-width': anchoCompleto,\r\n          'width': anchoCompleto\r\n        });\r\n\r\n        //init scroll\r\n        $B_ui.scrollElement(ul);\r\n\r\n        if (jQSelectorParentViewport !== $body.width()) {\r\n          jQSelectorParentViewport = $body.width();\r\n          jQSelectorParentLeftPosition = jQSelectorParent.offset().left;\r\n        }\r\n        jQSelectorParentLeftPosition = jQSelectorParentLeftPosition || jQSelectorParent.offset().left;\r\n        ul.closest('[data-autocomplete-scroll]').css({\r\n          left: jQSelectorParentLeftPosition\r\n        });\r\n\r\n      },\r\n      close: function(event, ui) {\r\n        var ul = $B_ui.c_widget_autocompletarGetUl(event.target);\r\n        ul.css({\r\n          'max-width': '',\r\n          'min-width': '',\r\n          'width': ''\r\n        });\r\n\r\n        ul.parents('[data-autocomplete-scroll]').css({\r\n          'max-width': '',\r\n          'min-width': '',\r\n          'width': ''\r\n        });\r\n      }\r\n    });\r\n\r\n    jQSelector.autocomplete({\r\n      search: function(event, ui) {\r\n        $B_ui.c_widget_autocompletarRemoveScroll($B_ui.c_widget_autocompletarGetUl(event.target));\r\n      }\r\n    });\r\n\r\n    jQSelector.bind('autocompleteclose',\r\n      function(event, ui) {\r\n        $B_ui.c_widget_autocompletarRemoveScroll($B_ui.c_widget_autocompletarGetUl(event.target));\r\n      });\r\n  };\r\n\r\n  $B_ui.c_widget_autocompletarGetUl = function(currentTarget) {\r\n    return $('.ui-autocomplete-id-' + $(currentTarget).attr('id') + '.ui-autocomplete');\r\n  };\r\n\r\n  $B_ui.c_widget_autocompletarRemoveScroll = function(ul) {\r\n    //remove previous scroll\r\n    ul.closest('[data-autocomplete-scroll]').find('.scrollbar').remove();\r\n    if (ul.closest('[data-autocomplete-scroll] .overview > ul').length) {\r\n      ul.unwrap();\r\n    }\r\n    if (ul.closest('[data-autocomplete-scroll] .viewport > ul').length) {\r\n      ul.unwrap();\r\n    }\r\n    if (ul.closest('[data-autocomplete-scroll] > ul').length) {\r\n      ul.unwrap();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * c_menu_pestanasOperativasConsultas\r\n   */\r\n  timeStampArray = [];\r\n\r\n  $B_ui.c_menu_pestanasOperativasConsultas = function(ev) {\r\n    var i,\r\n      el = $(ev.currentTarget),\r\n      contenedorMenu = null,\r\n      pestanaActual = null,\r\n      cerrando = false,\r\n      valueDataPestana = el.data('pestana'),\r\n      contenedorContenido = el.closest('div.c-menu-pestanasOperativasConsultas').find('div.js-contenido-OperativasConsultas'),\r\n      cerrarSilentWrapper = function() {\r\n        var silentWrapper = contenedorContenido.find('[data-silent-wrapper]');\r\n        if (silentWrapper.length === 0) {\r\n          return;\r\n        }\r\n        silentWrapper.removeClass('active-silent-view-wrapper')\r\n          .end()\r\n          .find('[data-silent-container]')[0].innerHTML = '';\r\n\r\n        $.publish('closeMenuPestanasOperativasConsultas');\r\n      },\r\n      togglePestanas = function() {\r\n        //cerramos todos los activos\r\n        contenedorMenu.find('.activo').removeClass('activo');\r\n        //cerramos las pestanas, excepto la actual\r\n        contenedorMenu.find('[data-pestana]').each(function(index, value) {\r\n          var pestanaAux = $(value).data('pestana'),\r\n            $pestana = $('div' + pestanaAux);\r\n\r\n          if (pestanaActual !== pestanaAux) {\r\n            $pestana.slideUp();\r\n          } else {\r\n            if (contenedorContenido.is(':visible')) {\r\n              $pestana.slideDown();\r\n            } else {\r\n              $pestana.show();\r\n            }\r\n            el.parent().addClass('activo');\r\n          }\r\n        });\r\n      },\r\n      checkShowPersonalizarAndLoadProductData = function() {\r\n        var autoloads = $('.pestanasOperativasConsultaspersonalizar [data-autoload-personalizacion]'),\r\n          autoload,\r\n          i;\r\n        for (i = 0; i < autoloads.length; i += 1) {\r\n          autoload = $(autoloads[i]).empty();\r\n          $B.app.AppView.prototype.prepareAutoload(autoload);\r\n        }\r\n\r\n        $('[data-remove-onload]').empty();\r\n\r\n      };\r\n\r\n    ev.preventDefault();\r\n    //los contenidos de condiciones, iban... se cargan bajo demanda con data-silent-link, y no se debe ejecutar ev.stopPropagation(); la primera vez\r\n    if ($(valueDataPestana).children().length > 0) {\r\n      ev.stopPropagation();\r\n    } else {\r\n      $(valueDataPestana).html('<div class=\"loading-silent-view\" />');\r\n    }\r\n\r\n    if ($B.utils.isDuplicateEvent(ev)) {\r\n      return {\r\n        'cerrando': null\r\n      };\r\n    }\r\n\r\n    if (valueDataPestana === 'cerrar') {\r\n      $.publish('handlePestanasCloseCliked', [el.closest('div.c-menu-pestanasOperativasConsultas').find('.js-pestanasOperativasConsultas').find('li.activo').data('pestana')]);\r\n    }\r\n\r\n    if (valueDataPestana !== '.pestanasOperativasConsultasoperaciones' && valueDataPestana !== 'cerrar') {\r\n      cerrarSilentWrapper();\r\n    }\r\n    if (valueDataPestana === 'cerrar') {\r\n      contenedorMenu = el.closest('div.c-menu-pestanasOperativasConsultas').find('.js-pestanasOperativasConsultas').removeClass('pestanaActiva');\r\n      togglePestanas();\r\n      contenedorContenido.slideUp(function() {\r\n        cerrarSilentWrapper();\r\n      });\r\n      pestanaActual = null;\r\n      cerrando = true;\r\n    } else if (valueDataPestana !== 'quiero') {\r\n      contenedorMenu = el.closest('div').addClass('pestanaActiva');\r\n      pestanaActual = el.data('pestana');\r\n      if ($('div' + pestanaActual).is(':visible')) {\r\n        pestanaActual = null;\r\n        contenedorMenu.removeClass('pestanaActiva');\r\n        togglePestanas();\r\n        contenedorContenido.slideUp();\r\n        cerrando = true;\r\n      } else {\r\n        togglePestanas();\r\n        contenedorContenido.slideDown();\r\n        if (valueDataPestana === '.pestanasOperativasConsultaspersonalizar') {\r\n          checkShowPersonalizarAndLoadProductData();\r\n        }\r\n        cerrando = false;\r\n      }\r\n    }\r\n\r\n    //retornamos si se cierran o se abren las pestanas\r\n    return {\r\n      'cerrando': cerrando\r\n    };\r\n  };\r\n\r\n  /**\r\n   * toggleDisabled\r\n   *\r\n   * Habilita/Deshabilita el input de texto en base al estado del checkbox correspondiente.\r\n   */\r\n  $B_ui.toggleDisabled = function(ev, wrapper) {\r\n\r\n    var isChecked = ev.currentTarget.checked,\r\n      $checkbox = $(ev.currentTarget),\r\n      input = $checkbox.data('toggle-disabled').targetElement,\r\n      $inputs;\r\n\r\n    if (wrapper) {\r\n      $inputs = $(wrapper).find(input);\r\n    } else {\r\n      $inputs = $checkbox.closest('.c-form-enviarNotificacion').find(input);\r\n    }\r\n\r\n    if (!isChecked) {\r\n      $inputs.val('');\r\n    }\r\n\r\n    $inputs.attr({\r\n      'disabled': !isChecked,\r\n      'aria-disabled': !isChecked\r\n    });\r\n  };\r\n\r\n  /**\r\n   *\r\n   */\r\n  $B_ui.scrollElement = function(element, options) {\r\n    var $table,\r\n      $tableParent,\r\n      contentPre = '<div class=\"scrollbar\"><div class=\"boxScroll\"><div class=\"track\"><div class=\"thumb\"><div class=\"end\"></div></div></div><span class=\"jspArrow jspArrowUp jspDisabled\"></span><span class=\"jspArrow jspArrowDown\"></span></div></div>',\r\n      wrapper = '<div class=\"viewport\"><div class=\"overview\"></div></div>';\r\n\r\n    _.each(element, function(el) {\r\n      $table = ($(el).get(0).tagName === 'TBODY') ? $(el).closest('table') : $(el);\r\n      $tableParent = $table.parent();\r\n      if ($tableParent.hasClass('overview')) {\r\n        $tableParent = $tableParent.closest('.scrollableParent');\r\n      }\r\n\r\n      $table.addClass('scrollable');\r\n      $tableParent.addClass('scrollableParent');\r\n\r\n      if ($table.height() /*+ 10*/ > $tableParent.height() && $table.height() !== 0) {\r\n        if (!$table.parent().hasClass('overview')) {\r\n          $table.wrap(wrapper);\r\n          $tableParent.prepend(contentPre);\r\n          if ($B.appConfig.enableTabletFeatures && $B.capabilities.touch) {\r\n            $('.cuerpoModal  .c-tablas-scroll_R3 .viewport').css('overflow-y', 'scroll');\r\n            $('.cuerpoModal  .c-tablas-scroll_R3 .scrollbar').hide();\r\n          }\r\n        }\r\n        $table.addClass('scrollVisible');\r\n        $tableParent.customScrollbar(options);\r\n      } else if ($table.parent().hasClass('overview')) {\r\n        $table.children('caption, tbody').css('padding-top', 0);\r\n        $tableParent.customScrollbar('destroy');\r\n        $table.removeClass('scrollVisible');\r\n        $table.unwrap().unwrap();\r\n        $tableParent.find('.scrollbar').remove();\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n\r\n  /**\r\n   * initCropImage: Funcion para inicializar el crop de imagenes.\r\n   * Uso: $B_ui.initCropImage({cropContainer:'.otroContainer'}). Si no se especifica cropContainer por defecto\r\n   * buscara un contenedor con la clase \"crop-container\"\r\n   */\r\n\r\n  $B_ui.initCropImage = function(data) {\r\n    var defaults = {\r\n        cropContainer: '.crop-container',\r\n        context: data.context || $body\r\n      },\r\n      options = $.extend(defaults, data),\r\n      $cropContent = options.context.$el.find(options.cropContainer),\r\n      foto = data.context.model.get('foto'),\r\n      inputs = [{\r\n        name: 'foto.coordX',\r\n        coord: 'x',\r\n        value: -1\r\n      }, {\r\n        name: 'foto.coordY',\r\n        coord: 'y',\r\n        value: -1\r\n      }, {\r\n        name: 'foto.ancho',\r\n        coord: 'w',\r\n        value: -1\r\n      }, {\r\n        name: 'foto.alto',\r\n        coord: 'h',\r\n        value: -1\r\n      }],\r\n      $img;\r\n\r\n    function initCrop() {\r\n      var i;\r\n      for (i = 0; i < inputs.length; i += 1) {\r\n        $cropContent.append('<input type=\"hidden\" id=\"coordenada' + i + '\" name=\"' + inputs[i].name + '\" value=\"' + inputs[i].value + '\"/>');\r\n      }\r\n    }\r\n\r\n    function cropFn() {}\r\n\r\n    function cropSelectionEnd(coords) {\r\n      var i;\r\n      for (i = 0; i < inputs.length; i += 1) {\r\n        $('#coordenada' + i).val(coords[inputs[i].coord]);\r\n      }\r\n    }\r\n\r\n    if (!$cropContent) {\r\n      return;\r\n    }\r\n\r\n    initCrop();\r\n\r\n    $img = $cropContent.find('img');\r\n    $img.Jcrop({\r\n      onChange: cropFn,\r\n      onSelect: cropSelectionEnd\r\n    });\r\n  };\r\n\r\n  /**\r\n   * clickToCall\r\n   *\r\n   * Al llamar a $B_ui.clickToCall se comprueba si el clicktocall es por capa o por popup y se inicializa\r\n   *\r\n   */\r\n  $B_ui.clickToCall = function(context, captchaActivated) {\r\n    var ClickToCall = {},\r\n      viewContext = context || window,\r\n      enableCaptcha = true,\r\n      $widgetContenedor = $('.c-widget-contenedor'),\r\n      $cajaAyuda = viewContext.$('.c-desplegable-ayuda .caja-ayuda'),\r\n      $asistenteSpan = viewContext.$('.c-desplegable-ayuda .asistenteAyuda span:first');\r\n      $botonEnviarDatos = viewContext.$('.c-desplegable-ayuda .enviarDatos');\r\n\r\n    if (!_.isUndefined(captchaActivated)) {\r\n      enableCaptcha = captchaActivated;\r\n    }\r\n\r\n    ClickToCall.show = function() {\r\n      $widgetContenedor.css('overflow', 'visible');\r\n      $asistenteSpan.addClass('desplegado');\r\n      $cajaAyuda.show();\r\n      $(document).on('focusin.clicktocall click.clicktocall', ClickToCall.onFocusOut);\r\n    };\r\n\r\n    ClickToCall.hide = function() {\r\n      $widgetContenedor.css('overflow', 'hidden');\r\n      $asistenteSpan.removeClass('desplegado');\r\n      $cajaAyuda.hide();\r\n      $(document).off('.clicktocall', ClickToCall.onFocusOut);\r\n    };\r\n\r\n    ClickToCall.toggle = function() {\r\n      return $cajaAyuda.is(':visible') ? ClickToCall.hide() : ClickToCall.show();\r\n    };\r\n\r\n    ClickToCall.onFocusOut = function(ev) {\r\n      if (!$(ev.target).closest('.caja-ayuda').length) {\r\n        ClickToCall.hide();\r\n      }\r\n    };\r\n\r\n    function mostrarError(msg) {\r\n      viewContext.$('.mensaje').css('display', 'none');\r\n      viewContext.$('.c-mensajes-errorAplicacion').css('display', 'none');\r\n      viewContext.$('.c-desplegable-ayuda .error-telefono span').html(msg);\r\n      viewContext.$('.c-desplegable-ayuda .error-telefono').css('display', '');\r\n      $botonEnviarDatos.removeClass('hidden');\r\n    }\r\n\r\n    function recargarImagen() {\r\n      var timestamp = Number(new Date());\r\n      viewContext.$('#imgCaptcha').attr('src', 'https://www.bbva.es/TLRS/tlrs/publi?op=captcha&recPerfil=S&time=' + timestamp);\r\n    }\r\n\r\n    function llamarTelefono() {\r\n      var telefono = '',\r\n        tipo = '';\r\n      $botonEnviarDatos.addClass('hidden');\r\n      viewContext.$('.error-telefono').css('display', 'none');\r\n      viewContext.$('.mensaje').css('display', 'none');\r\n      viewContext.$('.c-mensajes-errorAplicacion').css('display', 'none');\r\n      if ($('#numeroInternacional').is(':checked') || (/^([6,8,9][0-9]{8})$/.test(this.$('#documento').val()))) {\r\n        if (viewContext.$('.c-desplegable-ayuda #documento').length > 0 && viewContext.$('.c-desplegable-ayuda #documento').val() !== '') {\r\n          telefono = viewContext.$('.c-desplegable-ayuda #documento').val();\r\n        } else {\r\n          telefono = viewContext.$('.c-desplegable-ayuda #documento').val();\r\n          if (telefono.indexOf('+') === 0) {\r\n            telefono = telefono.replace('+', '00');\r\n          }\r\n        }\r\n        if (viewContext.$('#tipoLlamada').length > 0 && viewContext.$('#tipoLlamada').val() !== '') {\r\n          tipo = viewContext.$('#tipoLlamada').val();\r\n        } else {\r\n          tipo = 4;\r\n        }\r\n        $.getJSON('https://www.bbva.es/TLRS/tlrs/publi?callback=?', {\r\n          'tlf': telefono,\r\n          'op': 'llamar',\r\n          'tipo': tipo\r\n        }, function(datos) {\r\n          if (datos.msg === '200') {\r\n            viewContext.$('.mensaje').css('display', '');\r\n            if (typeof SeguimientoClickToCallAyudaSC === 'function') {\r\n              SeguimientoClickToCallAyudaSC();\r\n            }\r\n          } else {\r\n            viewContext.$('.c-mensajes-errorAplicacion').css('display', '');\r\n          }\r\n        });\r\n      } else {\r\n        mostrarError($B.app.literals.areapersonal.telefono_invalido);\r\n      }\r\n    }\r\n\r\n    function validarCaptcha(codigo) {\r\n      var sCaptcha = viewContext.$('.c-desplegable-ayuda #captcha').val();\r\n      if (sCaptcha !== '') {\r\n        $.getJSON('https://www.bbva.es/TLRS/tlrs/publi?callback=?', {\r\n          'captcha': sCaptcha,\r\n          'op': 'compCaptcha'\r\n        }, function(datos) {\r\n          recargarImagen();\r\n          if (datos.msg === 'OK') {\r\n            llamarTelefono();\r\n          } else {\r\n            mostrarError('Introduzca el codigo');\r\n          }\r\n        });\r\n      } else {\r\n        mostrarError('Introduzca el codigo');\r\n      }\r\n    }\r\n\r\n    function enviarTelefono() {\r\n      viewContext.$('#divConfirmacion').hide();\r\n      if (viewContext.$('.c-desplegable-ayuda .checkNumero label').hasClass('checked')) {\r\n        if (viewContext.$('.c-desplegable-ayuda #documento2').val() === '') {\r\n          mostrarError('Se requiere un telefono internacional');\r\n        } else {\r\n          if (!_.isMobile() && enableCaptcha) {\r\n            validarCaptcha(viewContext.$('.c-desplegable-ayuda #documento2').val());\r\n          } else {\r\n            llamarTelefono();\r\n          }\r\n        }\r\n      } else {\r\n        if (viewContext.$('.c-desplegable-ayuda #documento').val() === '') {\r\n          mostrarError('Se requiere un telefono');\r\n        } else {\r\n          if (!_.isMobile() && enableCaptcha) {\r\n            validarCaptcha(viewContext.$('.c-desplegable-ayuda #documento').val());\r\n          } else {\r\n            llamarTelefono();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function initModal(ev) {\r\n      $B_ui.dialog.create({\r\n        id: 'modalClickTocall',\r\n        content: _.tmpl('#modal_ClickToCall'),\r\n        button: '.tellamamos',\r\n        dialogOptions: {\r\n          width: 300\r\n        }\r\n      });\r\n      $(viewContext.$('.c-desplegable-ayuda')[1]).css('z-index', 1000003);\r\n      viewContext.$('.c-desplegable-ayuda #acceder').on('click', function() {\r\n        enviarTelefono();\r\n      });\r\n      viewContext.$('.c-desplegable-ayuda .caja-ayuda').css('position', 'static');\r\n      viewContext.$('.c-desplegable-ayuda .caja-ayuda').css('margin-left', '120px');\r\n      if (enableCaptcha) {\r\n        viewContext.$('.c-desplegable-ayuda #recCaptchaCTC').on('click', function(ev) {\r\n          recargarImagen();\r\n        });\r\n      }\r\n    }\r\n\r\n    function openModal() {\r\n      if ($B_ui.dialog.exists('modalClickTocall')) {\r\n        $B_ui.dialog.open('modalClickTocall');\r\n      } else {\r\n        initModal();\r\n        $B_ui.dialog.open('modalClickTocall');\r\n      }\r\n    }\r\n\r\n    function validarTelefono(tlf) {\r\n      var bValidado = false,\r\n        nTlfno = '';\r\n      if (tlf.indexOf('+') === 0) {\r\n        nTlfno = tlf.substring(1);\r\n        bValidado = !isNaN(nTlfno);\r\n      } else {\r\n        if (tlf.indexOf('00') === 0) {\r\n          nTlfno = tlf.substring(2);\r\n          bValidado = !isNaN(nTlfno);\r\n        }\r\n      }\r\n      return bValidado;\r\n    }\r\n\r\n    function habilitarInput(tlf1, tlf2) {\r\n      $(tlf1).removeAttr('readonly').focus();\r\n      $(tlf2).attr('readonly', 'readonly').val('');\r\n    }\r\n\r\n    function habilitarTlfInternacional() {\r\n      var check = $('#numeroInternacional').attr('checked');\r\n      if (check === 'checked') {\r\n        habilitarInput('#documento2', '#documento');\r\n      } else {\r\n        habilitarInput('#documento', '#documento2');\r\n      }\r\n    }\r\n\r\n    function initClickToCall() {\r\n      viewContext.$('#numeroInternacional').on('click', function() {\r\n        habilitarTlfInternacional();\r\n      });\r\n\r\n      if (viewContext.$('#soloCuerpo').length > 0) {\r\n\r\n        viewContext.$('.c-desplegable-ayuda #acceder').on('click', function() {\r\n          enviarTelefono();\r\n        });\r\n\r\n        if (enableCaptcha) {\r\n          viewContext.$('.c-desplegable-ayuda #recCaptchaCTC').on('click', function(ev) {\r\n            recargarImagen();\r\n          });\r\n        }\r\n\r\n        ClickToCall.toggle();\r\n\r\n      } else {\r\n\r\n        if (viewContext.$('.c-desplegable-ayuda .caja-ayuda').length > 0) {\r\n\r\n          $(viewContext.$('.c-desplegable-ayuda').children()[0]).on('click', function(ev) {\r\n            ev.stopPropagation();\r\n            ClickToCall.toggle();\r\n          });\r\n\r\n          viewContext.$('.c-desplegable-ayuda #acceder').on('click', function() {\r\n            enviarTelefono();\r\n          });\r\n\r\n          if (enableCaptcha) {\r\n            viewContext.$('.c-desplegable-ayuda #recCaptchaCTC').on('click', function(ev) {\r\n              recargarImagen();\r\n            });\r\n          }\r\n\r\n        } else {\r\n\r\n          viewContext.$('.c-desplegable-ayuda').children(0).on('click', function(ev) {\r\n            openModal();\r\n          });\r\n\r\n        }\r\n      }\r\n\r\n      return ClickToCall;\r\n    }\r\n\r\n    initClickToCall();\r\n  };\r\n\r\n  /**\r\n   * insertTabIndex\r\n   *\r\n   * Al llamar a $B_ui.insertTabIndex() se recorre el contexto seleccionado buscando elementos clickables o de formulario\r\n   * para anadirles un tabindex=\"0\".\r\n   *\r\n   * Los atributos que se buscan son:\r\n   * role = \"link\"\r\n   * role = \"button\"\r\n   * role = \"tab\"\r\n   *\r\n   */\r\n  $B_ui.insertTabIndex = function(context) {\r\n    context = context || $body;\r\n    var elements = context.find('*[role=\"link\"]')\r\n      .add('*[role=\"button\"]')\r\n      .add('*[role=\"tab\"]')\r\n      .each(function() {\r\n        var $this = $(this);\r\n        if (!$this.attr('tabindex')) {\r\n          $this.attr({\r\n            'tabindex': '0',\r\n            'data-added-tabindex-by-js': true\r\n          });\r\n        }\r\n        $(this).off('keydown.focusable').on('keydown.focusable', function(e) {\r\n          var key = (window.event ? e.keyCode : e.which);\r\n          if (key === 13) {\r\n            $this.trigger('click');\r\n          }\r\n        });\r\n      });\r\n  };\r\n\r\n  /**\r\n   * autoCCCInputJump\r\n   *\r\n   * Al llamar a $B_ui.autoCCCInputJump() se debe permitir pegar los 20 digitos de la cuenta en los inputs\r\n   * destinados a tal efecto, ademas de saltar entre inputs\r\n   *\r\n   */\r\n  $B_ui.autoCCCInputJump = function(context) {\r\n    var inputs = context.find('input.text'),\r\n      inputsCCC = context.find('input.text:not(#iban)'),\r\n      inputIBAN = context.find('input#iban'),\r\n      inputIndex,\r\n      currentLength;\r\n\r\n    function text_diff(index, clipboardData) {\r\n\r\n      if (index === 0 || index === 1) {\r\n        return clipboardData.substr(0, 4);\r\n      } else if (index === 2) {\r\n        return clipboardData.substr(0, 2);\r\n      } else if (index === 3) {\r\n        return clipboardData.substr(0, 10);\r\n      }\r\n\r\n    }\r\n\r\n    function delete_already_in(index, clipboardData) {\r\n\r\n      if (index === 0 || index === 1) {\r\n        return clipboardData.substr(4);\r\n      } else if (index === 2) {\r\n        return clipboardData.substr(2);\r\n      } else if (index === 3) {\r\n        return clipboardData.substr(10);\r\n      }\r\n\r\n    }\r\n\r\n    function checkCCCInput20digits(ev) {\r\n      var key = (window.event ? ev.keyCode : ev.which),\r\n        $this = $(ev.target),\r\n        self,\r\n        current,\r\n        introValue,\r\n        previous,\r\n        i;\r\n\r\n      if (key === 16 || key === 9) {\r\n        return false;\r\n      }\r\n\r\n      $('#iban').attr('disabled', 'disabled').attr('data-no-enabling', true);\r\n\r\n      if ($this.parent().next().find('input.text').not('#iban').length !== 0) {\r\n        inputIndex = $this.parent().index();\r\n      } else {\r\n        inputIndex = $this.index();\r\n      }\r\n      previous = $this.val();\r\n      currentLength = previous.length;\r\n\r\n      self = $(this);\r\n\r\n      setTimeout(function() {\r\n        introValue = $(self).val();\r\n        current = introValue.replace(/-/g, '').replace(/ /g, '');\r\n\r\n        if ((current.length - currentLength) === 20 || (current.length === 20)) {\r\n          if ((current.length - currentLength) === 20) {\r\n            current = current.substr(currentLength);\r\n          }\r\n          inputIndex = 0;\r\n          self = $(self).parent().find('input.text')[0];\r\n          $(self).val('');\r\n          $.publish('calcularIban', {\r\n            cccNumber: current\r\n          });\r\n\r\n          $(self).val(text_diff(inputIndex, current));\r\n          for (i = inputIndex; i < 4; i += 1) {\r\n            $(self).val(text_diff(i, current));\r\n            current = delete_already_in(i, current);\r\n            if (i === 3) {\r\n              $(self).focus();\r\n            } else {\r\n              self = $(self).next();\r\n            }\r\n          }\r\n        } else {\r\n          $('#iban').val('');\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    function prepareIBANNumber(ev) {\r\n      var introValue,\r\n        $this = $(ev.target),\r\n        self = $this;\r\n\r\n      setTimeout(function() {\r\n        introValue = $(self).val();\r\n        $(self).val(_.formatIbanNumber(introValue.replace(/\\s/g, '')));\r\n        if (introValue.length !== 0) {\r\n          $this.closest('.c-form-CCC').find('input.text').not('#iban').attr('disabled', 'disabled').attr('data-no-enabling', true);\r\n        }\r\n      }, 100);\r\n    }\r\n\r\n    function checkCCCInput(ev) {\r\n      var key = (window.event ? ev.keyCode : ev.which),\r\n        $this = $(ev.target),\r\n        typeFirst = 4,\r\n        typeSecond = 2,\r\n        typeThird = 10,\r\n        calculoIBANstopper = false,\r\n        cccFull = false,\r\n        todosWaterMark = 0,\r\n        todosEmpty = 0,\r\n        cccNumber = '',\r\n        $currentInput,\r\n        currentInputValue,\r\n        $inputsCCC,\r\n        i;\r\n\r\n      if (key === 16 || key === 9 || key === 37 || key === 39) {\r\n        return false;\r\n      }\r\n\r\n      if ($this.attr('id') === 'iban') {\r\n\r\n        $inputsCCC = $this.closest('fieldset').find('#camposCuentaCliente').find('input');\r\n\r\n        if ($this.val().length !== 0) {\r\n          $inputsCCC.attr('disabled', 'disabled').attr('data-no-enabling', true);\r\n        } else {\r\n          $inputsCCC.removeAttr('disabled').removeAttr('data-no-enabling');\r\n        }\r\n\r\n      } else {\r\n\r\n        if ($this.parent().next().find('input.text').not('#iban').length !== 0) {\r\n          inputIndex = $this.parent().index();\r\n        } else {\r\n          inputIndex = $this.index();\r\n        }\r\n        // Se podria comprobar la longitud con el maxLength, pero parece\r\n        // mas fiable hacerlo a mano.\r\n        if ((inputIndex === 0 || inputIndex === 1) && $this.val().length > typeFirst) {\r\n          $this.val($this.val().substr(0, typeFirst));\r\n          calculoIBANstopper = true;\r\n        } else if (inputIndex === 2 && $this.val().length > typeSecond) {\r\n          $this.val($this.val().substr(0, typeSecond));\r\n          calculoIBANstopper = true;\r\n        } else if (inputIndex === 3 && $this.val().length > typeThird) {\r\n          $this.val($this.val().substr(0, typeThird));\r\n          calculoIBANstopper = true;\r\n        }\r\n\r\n        currentLength = $this.val().length;\r\n\r\n        if (((inputIndex === 0 || inputIndex === 1) && currentLength === 4) || (inputIndex === 2 && currentLength === 2)) {\r\n          // diferente marcado, puede haber inputs envueltos en un span o no, se cambia el selector dependiendo de ello\r\n          if ($this.parent().next().find('input.text').not('#iban').length !== 0) {\r\n            $this.parent().next().find('input.text').select().focus();\r\n          } else {\r\n            $this.next().select().focus();\r\n          }\r\n        }\r\n        for (i = 0; i < 4; i += 1) {\r\n          $currentInput = $($this.parent('p').find('input:not(\"#cuenta_alias\")'))[i];\r\n          currentInputValue = $($currentInput).attr('value');\r\n          if (!isNaN(currentInputValue)) {\r\n            if (i === 0 && currentInputValue.length >= typeFirst) {\r\n              cccFull = true;\r\n            } else {\r\n              cccFull = false;\r\n            }\r\n            if (i === 1 && currentInputValue.length >= typeFirst) {\r\n              cccFull = true;\r\n            } else {\r\n              cccFull = false;\r\n            }\r\n            if (i === 2 && currentInputValue.length >= typeSecond) {\r\n              cccFull = true;\r\n            } else {\r\n              cccFull = false;\r\n            }\r\n            if (i === 3 && currentInputValue.length >= typeThird) {\r\n              cccFull = true;\r\n            } else {\r\n              cccFull = false;\r\n            }\r\n\r\n          }\r\n          if ($($currentInput).hasClass('watermark') && isNaN(currentInputValue)) {\r\n            todosWaterMark = todosWaterMark + 1;\r\n          }\r\n          if ($($currentInput).val().length === 0) {\r\n            todosEmpty = todosEmpty + 1;\r\n          }\r\n          cccNumber = cccNumber + currentInputValue;\r\n        }\r\n\r\n        if (cccFull && cccNumber.length === 20) {\r\n          if (!calculoIBANstopper) {\r\n            $.publish('calcularIban', {\r\n              cccNumber: cccNumber\r\n            });\r\n          }\r\n        } else {\r\n          $('#iban').val('');\r\n        }\r\n\r\n        if (($this.val().length === 0 && todosWaterMark >= 3) || todosEmpty === 4) {\r\n          $('#iban:not([data-always-disabled])').removeAttr('disabled').removeAttr('data-no-enabling');\r\n        } else {\r\n          $('#iban').attr('disabled', 'disabled').attr('data-no-enabling', true);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n    context = context || $body;\r\n    inputsCCC.off('paste').on('paste', checkCCCInput20digits);\r\n    inputIBAN.off('paste').on('paste', prepareIBANNumber);\r\n    inputs.off('keyup').on('keyup', checkCCCInput);\r\n\r\n  };\r\n\r\n  /**\r\n   * autoInputJump\r\n   *\r\n   * Al llamar a $B_ui.autoInputJump() se permite saltar automaticamente entre los inputs pasado en el contexto\r\n   *\r\n   *\r\n   */\r\n  $B_ui.listItemNavigation = function(options) {\r\n    var defaults = {\r\n        selector: '[nav-list-item]:not(.hidden)',\r\n        context: $('#resultsPane')\r\n      },\r\n      params = $.extend(true, {}, defaults, options),\r\n      $items = params.context.find(params.selector),\r\n      itemsNumber = $items.length,\r\n      currentItem = 0,\r\n      nextItem;\r\n\r\n    function getNextItem(direction) {\r\n      var item;\r\n      if (direction === 40 || direction === 39) {\r\n        if (currentItem === itemsNumber - 1) {\r\n          item = 0;\r\n        } else {\r\n          item = currentItem + 1;\r\n        }\r\n      } else if (direction === 38 || direction === 37) {\r\n        if (currentItem === 0) {\r\n          item = itemsNumber - 1;\r\n        } else {\r\n          item = currentItem - 1;\r\n        }\r\n      }\r\n      return item;\r\n    }\r\n\r\n    function goNext(direction) {\r\n      nextItem = getNextItem(direction);\r\n      $items[nextItem].focus();\r\n      currentItem = nextItem;\r\n    }\r\n\r\n    function jumpToNext(ev) {\r\n      ev.preventDefault();\r\n      var key = ev.keyCode,\r\n        $target = $(ev.currentTarget);\r\n\r\n      if (key === 37 || key === 38 || key === 39 || key === 40) {\r\n        goNext(key);\r\n      } else if (key === 13) {\r\n        $target.click();\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    $items.off('keydown.jump').on('keydown.jump', jumpToNext);\r\n  };\r\n\r\n  $B_ui.autoInputJump = function(context) {\r\n    var inputs = context.find('input.text'),\r\n      currentLength,\r\n      inputSize;\r\n\r\n    function checkInput(ev) {\r\n      var key = (window.event ? ev.keyCode : ev.which),\r\n        $this = $(ev.target);\r\n\r\n      if (key === 16 || key === 9 || key === 36 || key === 35) {\r\n        return false;\r\n      }\r\n\r\n      currentLength = $this.val().length;\r\n      inputSize = parseInt($this.attr('maxlength'), 10);\r\n\r\n      if (currentLength === inputSize) {\r\n        // diferente marcado, puede haber inputs envueltos en un span o no, se cambia el selector dependiendo de ello\r\n        if ($this.parent().next().find('input.text').length !== 0) {\r\n          $this.parent().next().find('input.text').select().focus();\r\n        } else if ($this.next('input.text').length !== 0) {\r\n          $this.next().select().focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    context = context || $body;\r\n    inputs.on('keyup', checkInput);\r\n\r\n  };\r\n\r\n\r\n  /**\r\n   * printReady\r\n   *\r\n   * Al llamar a $B_ui.printReady() se permite imprimir pantallas mediante los botones habilitados a tal efecto el\r\n   * frontal\r\n   *\r\n   */\r\n  $B_ui.printReady = function(context) {\r\n    var printButton;\r\n\r\n    function makePrintable() {\r\n      window.print();\r\n    }\r\n    context = context || $body;\r\n    printButton = context.find('.c-listas-acciones').find('li:last img').filter(':not(\"[data-eventid]\")').filter(':not(\"[data-print]\")').off('click').on('click', makePrintable);\r\n  };\r\n\r\n  /**\r\n   * updateCustomInputImage\r\n   *\r\n   * Al llamar a $B_ui.updateCustomInputImage() se actualiza la imagen del custom radio/check\r\n   */\r\n\r\n  customInputClasses = {\r\n    classChecked: 'checked',\r\n    classDisabled: 'inactivo',\r\n    classInactivoChecked: 'inactivoChecked'\r\n  };\r\n\r\n  $B_ui.updateCustomInputImage = function(elemento) {\r\n    var $this = (elemento instanceof jQuery) ? elemento : $(elemento),\r\n      $parentLabel = $this.closest('label');\r\n\r\n    if ($this.is(':checked') && $this.attr('disabled')) {\r\n      $parentLabel.addClass(customInputClasses.classInactivoChecked);\r\n    } else {\r\n      $parentLabel.removeClass(customInputClasses.classInactivoChecked);\r\n      if ($this.is(':checked')) {\r\n        $parentLabel.addClass(customInputClasses.classChecked);\r\n      } else {\r\n        $parentLabel.removeClass(customInputClasses.classChecked);\r\n      }\r\n\r\n      if ($this.attr('disabled')) {\r\n        $parentLabel.addClass(customInputClasses.classDisabled);\r\n      } else {\r\n        $parentLabel.removeClass(customInputClasses.classDisabled);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * initFormComponents\r\n   *\r\n   * Al llamar a $B_ui.initFormComponents() se buscan todos los label que tengan el attributo data-tipoRadio o data-tipoCheck\r\n   * y los customiza, por lo que antes de llamar a esta funcion hay que asegurarse de haber etiquetado todos los label.\r\n   * Opciones:\r\n   *   - Si se quiere un radio/check normal, anadir al LABEL data-tipoRadio o data-tipoCheck\r\n   *   - Si se quiere un radio/check pequeno, anadir al LABEL data-tipoRadio=\"menor\" o data-tipoCheck=\"menor\"\r\n   */\r\n\r\n  $B_ui.initFormComponents = function(context) {\r\n    context = context || $body;\r\n    var elRadios = context.find('.tipoInput > input[type=radio]').closest('label'),\r\n      elCopyButtons = context.find('[data-clipboard-target]'),\r\n      elChecks = context.find('.tipoInput > input[type=checkbox]').closest('label'),\r\n      classPredictivoLiquido = context.find('.c-buscadores-predictivo-liquido');\r\n\r\n    function initStatus(item, tipo) {\r\n      var $item = $(item),\r\n        tipoInput = (tipo === 'radio') ? tipo : 'checkbox',\r\n        $itemInput = $item.find('input[type=' + tipoInput + ']');\r\n\r\n      $B_ui.updateCustomInputImage($itemInput);\r\n\r\n      if (!$item.find('.' + tipo).length) {\r\n        $itemInput.after('<span class=\"' + tipo + '\"></span>');\r\n      }\r\n    }\r\n\r\n    function addZeroClipboardSWFLayer(element) {\r\n      var zcClient,\r\n        target;\r\n\r\n      if (($B.ie_version === undefined || $B.ie_version >= 9) && _.isFunction(ZeroClipboard)) {\r\n        zcClient = new ZeroClipboard(element);\r\n\r\n        zcClient.on('ready', function(readyEvent) {\r\n          zcClient.on('copy', function(event) {\r\n            target = event.target;\r\n            target.innerHTML = $B.app.literals.copiedToClipboard;\r\n            $(target).addClass('inactivo');\r\n          });\r\n        });\r\n      } else {\r\n        $(element).remove();\r\n      }\r\n    }\r\n\r\n    $.each(elCopyButtons, function(i, el) {\r\n      addZeroClipboardSWFLayer(el);\r\n    });\r\n\r\n    $.each(elRadios, function(i, el) {\r\n      initStatus(el, 'radio');\r\n    });\r\n\r\n    $.each(elChecks, function(i, el) {\r\n      initStatus(el, 'check');\r\n    });\r\n\r\n    elRadios.off('change.customize', 'input');\r\n    elChecks.off('change.customize', 'input');\r\n\r\n    elRadios.on('change.customize', 'input', function(element, isMvc) {\r\n      var $this = $(this),\r\n        thisGroupName = $this.attr('name');\r\n\r\n      //No eliminar la clase checked si es una llamada de inicializacion desde mvc\r\n      if (!isMvc) {\r\n        $('[name=\"' + thisGroupName + '\"]').closest('label').removeClass(customInputClasses.classChecked);\r\n      }\r\n\r\n      $B_ui.updateCustomInputImage(this);\r\n    });\r\n\r\n    elChecks.on('change.customize', 'input', function(element, isMvc) {\r\n      var $this = $(this),\r\n        $parentLabel = $this.closest('label');\r\n\r\n      if (!isMvc) {\r\n        //$parentLabel.toggleClass(classChecked);\r\n        if ($this.is(':checked')) {\r\n          $parentLabel.addClass(customInputClasses.classChecked);\r\n        } else {\r\n          $parentLabel.removeClass(customInputClasses.classChecked);\r\n        }\r\n      }\r\n\r\n      $B_ui.updateCustomInputImage(this);\r\n    });\r\n\r\n    if (classPredictivoLiquido.length) {\r\n      $B_ui.c_buscadores_predictivoLiquido(classPredictivoLiquido);\r\n    }\r\n\r\n    //set css class unaLinea to conmutador legend to vertical align\r\n    context.find('.c-widget-conmutador fieldset legend').first().find('span').each(function(index, item) {\r\n      var $item = $(item);\r\n      if ($item.height() < 30) {\r\n        $item.addClass('unaLinea');\r\n      }\r\n    });\r\n\r\n    $B.ui.avoidPaste({\r\n      context: context\r\n    });\r\n  };\r\n\r\n  /**\r\n   * disableFormElements\r\n   *\r\n   * Al llamar a $B_ui.disableFormElements(context) se buscan todos los elementos de formulario del contexto y\r\n   * se les anade el atributo \"disabled\".\r\n   *\r\n   */\r\n\r\n  $B_ui.disableFormElements = function(context) {\r\n    // Si no se pasa contexto no se hace nada.\r\n    if (!context) {\r\n      return;\r\n    }\r\n    var formElements = context.find(':input');\r\n    formElements.attr('disabled', 'disabled').trigger('change.customize', true);\r\n\r\n    $B_ui.updateCustomElementsStatus(context);\r\n  };\r\n\r\n  /**\r\n   * enableFormElements\r\n   *\r\n   * Al llamar a $B_ui.enableFormElements(context) se buscan todos los elementos de formulario del contexto y\r\n   * se les elimina el atributo \"disabled\".\r\n   *\r\n   */\r\n\r\n  $B_ui.enableFormElements = function(context) {\r\n    // Si no se pasa contexto no se hace nada.\r\n    if (!context) {\r\n      return;\r\n    }\r\n    var formElements = context.find(':input');\r\n    formElements.removeAttr('disabled');\r\n\r\n    $B_ui.updateCustomElementsStatus(context);\r\n  };\r\n\r\n  /**\r\n   * updateCustomElementsStatus\r\n   *\r\n   * Al llamar a $B_ui.updateCustomElementsStatus(context) se lanzan los eventos necesarios para\r\n   * actualizar el estado de los elementos customizados (checks, radios, combos...) despues de cambiarles\r\n   * algun atributo (disabled, checked...) desde los mvc\r\n   *\r\n   */\r\n\r\n  $B_ui.updateCustomElementsStatus = function(context) {\r\n    //Si no se pasa contexto se supone que el contexto es body\r\n    context = context || $body;\r\n\r\n    //Si el contexto no es un objeto jQuery se transforma\r\n    context = (context instanceof jQuery) ? context : $(context);\r\n\r\n    //Lanzamos el evento change.customize de todos los elementos de formulario\r\n    context.find(':input').trigger('change.customize', true);\r\n\r\n    //iniciamos los tooltips\r\n    $('.js-tooltip').tooltip();\r\n  };\r\n\r\n  /**\r\n   * initConmutador\r\n   *\r\n   * Al llamar a $B_ui.initConmutador() se buscan todos los elementos que tengan la clase c-widget-conmutador\r\n   * y hace que se calcule automaticamente la posicion del puntero cada vez que se seleccione una opcion\r\n   *\r\n   */\r\n\r\n  $B_ui.initConmutador = function(context) {\r\n    context = context || $body;\r\n\r\n    function posicionarPuntero(elemento) {\r\n      var boton = $(elemento).closest('li'),\r\n        botonLeft = boton.position().left,\r\n        botonSize = boton.width(),\r\n        contenedor = boton.closest('.c-widget-conmutador'),\r\n        puntero = contenedor.find('.puntero:visible'),\r\n        punteroSize = puntero.width();\r\n\r\n      puntero.css('left', (botonLeft + (botonSize / 2) + (punteroSize / 2)) + 'px');\r\n    }\r\n\r\n    function iniciarPuntero(elemento) {\r\n      elemento.find('ul:first input:checked').change();\r\n    }\r\n\r\n    $('.c-widget-conmutador').each(function() {\r\n      var $conmutador = $(this);\r\n\r\n      $conmutador.find('ul:first').off();\r\n      $conmutador.find('ul:first').on('change', 'input', function() {\r\n        posicionarPuntero(this);\r\n      });\r\n\r\n      iniciarPuntero($conmutador);\r\n    });\r\n  };\r\n\r\n  $B_ui.getRSS = function(url) {\r\n    var googleURL = 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q=',\r\n      entries = [];\r\n\r\n    $.getJSON(googleURL + url, function(data) {\r\n      var contenido = _.tmpl('#tmpl_RSS', {\r\n        data: data.responseData.feed.entries\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * tooltip: para usar el tooltip hay que incluir en el mvc: $(selector).tooltip(); donde el selector puede ser un p, label... Y deben tener dentro un <span class='comentario'>mi comentario</span>\r\n   *   las clases que haya en <span class='comentario miclase'>mi comentario</span> se incluiran en el div del tooltip creado\r\n   */\r\n  $B_ui.tooltip = (function() {\r\n    // cacheamos el html del tooltip porque sino se hacen casi infinitas peticiones a la imagen\r\n    var cachedTooltip;\r\n\r\n    $('<div class=\"tooltip\" id=\"tooltipWrapper\" style=\"display:none;\"><span class=\"comentario\"></span><img class=\"flecha\" src=\"' + $B.staticPath + '/img/bg-mensajes-tooltip.png\" alt=\"\" /></div>').appendTo('body');\r\n\r\n    return function(ev, accion) {\r\n      //if (!_.isMobile()) {\r\n      var el = $(ev.currentTarget),\r\n        comentario = el.find('.comentario'),\r\n        tooltipDiv = $('div.tooltip'),\r\n        elPosition,\r\n        desplazamientoX = 0,\r\n        tooltipClose = function() {\r\n          //borramos el tooltip\r\n          tooltipDiv.hide();\r\n          cachedTooltip = null;\r\n          $B.utils.aria.tooltip(el);\r\n          $body.unbind('mousemove');\r\n        },\r\n        onMouseMoveFunction = function() {\r\n          if ($body.find(el).length === 0) {\r\n            tooltipClose();\r\n          }\r\n        },\r\n        tooltipOpen = function() {\r\n          var cssTooltipWarper,\r\n            cssTooltipPointerArrow;\r\n\r\n          cachedTooltip = $('#tooltipWrapper').show();\r\n\r\n          $body.bind('mousemove', onMouseMoveFunction);\r\n          //creamos el div y copiamos el contenido\r\n          if (!tooltipDiv.length) {\r\n            tooltipDiv = cachedTooltip.appendTo('body');\r\n          }\r\n\r\n          tooltipDiv.on('touchstart', function(event) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            tooltipClose();\r\n            tooltipDiv.off('touchstart');\r\n          });\r\n\r\n          $B.utils.aria.tooltip(el, tooltipDiv);\r\n          tooltipDiv\r\n            .find('.comentario')\r\n            .html(comentario.html())\r\n            .end()\r\n            .attr('class', 'tooltip ' + comentario.attr('class'))\r\n            .removeClass('comentario');\r\n\r\n          tooltipDiv.attr('style', '');\r\n          cssTooltipWarper = el.attr('data-cssTooltipWarper');\r\n          if (cssTooltipWarper) {\r\n            tooltipDiv.css(JSON.parse(cssTooltipWarper));\r\n          }\r\n\r\n          if (el.attr('data-desplazamientoX')) {\r\n            desplazamientoX = Number(el.attr('data-desplazamientoX'));\r\n          }\r\n\r\n          tooltipDiv.find('img').attr('style', '');\r\n          cssTooltipPointerArrow = el.attr('data-cssTooltipPointerArrow');\r\n          if (cssTooltipPointerArrow) {\r\n            tooltipDiv.find('img').css(JSON.parse(cssTooltipPointerArrow));\r\n          }\r\n\r\n          //posicionamos\r\n          elPosition = el.offset();\r\n          tooltipDiv.offset({\r\n            top: elPosition.top - tooltipDiv.outerHeight(),\r\n            left: (elPosition.left + el.outerWidth() / 2) - (tooltipDiv.outerWidth() / 2) + desplazamientoX\r\n          });\r\n        };\r\n\r\n      //Si es un dispositivo tactil...\r\n      if ($B.appConfig.enableTabletFeatures && $B.capabilities.touch) {\r\n        //Comprobamos si hemos pulsado ( 'click' ) sobre una imagen de ayuda ( '?' ) y evitamos el comportamiento por defecto, mostrando unicamente el tooltip\r\n        if (ev.type === 'click' && ev.target.tagName.toUpperCase() === 'IMG') {\r\n          if (ev.target.parentNode.className.indexOf('js-tooltip') !== -1 && (ev.target.src.indexOf('ico-ayuda') !== -1 || ev.target.src.indexOf('ico-info') !== -1)) {\r\n            ev.stopPropagation();\r\n            ev.preventDefault();\r\n            // Si el elemento que hemos pulsado no tiene activo el tooltip, se muestra.\r\n            if ($(ev.target.parentNode).attr('aria-describedby') === undefined) {\r\n              tooltipOpen();\r\n            } else {\r\n              //El tooltip ya esta visible, lo ocultamos.\r\n              tooltipClose();\r\n            }\r\n          }\r\n        } else {\r\n          // Al no haber hecho click o no ser una imagen de ayuda, cerramos el tooltip y sigue el proceso por defecto\r\n          tooltipClose();\r\n        }\r\n      } else {\r\n        //abrimos el tooltip\r\n        if (ev.type === 'mouseenter' || ev.type === 'focus' || ev.type === 'opentooltip' || accion === 'open') {\r\n          tooltipOpen();\r\n        } else {\r\n          tooltipClose();\r\n        }\r\n      }\r\n      //} \r\n    };\r\n  }());\r\n\r\n  $.widget('B.tooltip', {\r\n    _create: function() {\r\n      this.element.hover(\r\n        $B_ui.tooltip,\r\n        $B_ui.tooltip\r\n      ).click(\r\n        $B_ui.tooltip\r\n      ).focus(\r\n        $B_ui.tooltip\r\n      ).blur(\r\n        $B_ui.tooltip\r\n      ).on(\r\n        'opentooltip',\r\n        $B_ui.tooltip\r\n      ).on(\r\n        'closetooltip',\r\n        $B_ui.tooltip\r\n      );\r\n    }\r\n  });\r\n\r\n  /**\r\n   * tooltip: para usar el tooltip hay que incluir en el mvc: $(selector).tooltipBottom(); donde el selector puede ser un p, label... Y deben tener dentro un <span class='comentario'>mi comentario</span>\r\n   *   las clases que haya en <span class='comentario miclase'>mi comentario</span> se incluiran en el div del tooltip creado.\r\n   * se recomienda que el selector del tooltip sea diferente al que ya estamos utilizando (js-tooltip), lo ideal es que sea $('js-tooltipBottom').tooltipBottom();\r\n   */\r\n  $B_ui.tooltipBottom = function(ev, accion) {\r\n    var el = $(ev.currentTarget),\r\n      comentario = el.find('.comentario'),\r\n      tooltipDiv = $('div.tooltip.bottom'),\r\n      elPosition;\r\n\r\n    //abrimos el tooltip\r\n    if (ev.type === 'mouseenter' || accion === 'open') {\r\n      //creamos el div y copiamos el contenido\r\n      if (!tooltipDiv.length) {\r\n        tooltipDiv = $('<div class=\"tooltip bottom ' + comentario.attr('class') + '\"><img class=\"flechaBottom\" src=\"' + $B.staticPath + '/img/bg-mensajes-tooltip.png\" alt=\"\" /><span class=\"comentario\"></span></div>').appendTo('body');\r\n      }\r\n      $B.utils.aria.tooltip(el, tooltipDiv);\r\n      tooltipDiv.find('.comentario').html(comentario.html()).end().addClass(comentario.attr('class')).removeClass('comentario');\r\n\r\n      //posicionamos\r\n      elPosition = el.offset();\r\n      tooltipDiv.offset({\r\n        top: elPosition.top + el.outerHeight(),\r\n        left: ((elPosition.left + el.outerWidth() / 2) - (tooltipDiv.outerWidth() / 2))\r\n      }).on('mouseover', function() {\r\n        tooltipDiv.remove();\r\n        $B.utils.aria.tooltip(el);\r\n      });\r\n    } else {\r\n      //borramos el tooltip\r\n      tooltipDiv.remove();\r\n      $B.utils.aria.tooltip(el);\r\n    }\r\n  };\r\n\r\n  $.widget('B.tooltipBottom', {\r\n    _create: function() {\r\n      this.element.hover(\r\n        $B_ui.tooltipBottom,\r\n        $B_ui.tooltipBottom\r\n      ).click(\r\n        $B_ui.tooltipBottom\r\n      );\r\n    }\r\n  });\r\n\r\n  /**\r\n   * tooltipRightBottom: para usar el tooltip hay que incluir en el mvc: $(selector).tooltipBottom(); donde el selector puede ser un p, label... Y deben tener dentro un <span class='comentario'>mi comentario</span>\r\n   *   las clases que haya en <span class='comentario miclase'>mi comentario</span> se incluiran en el div del tooltip creado.\r\n   * se recomienda que el selector del tooltip sea diferente al que ya estamos utilizando (js-tooltip), lo ideal es que sea $('js-tooltipRightBottom').tooltipRightBottom();\r\n   */\r\n  $B_ui.tooltipRightBottom = function(ev, accion) {\r\n    var el = $(ev.currentTarget),\r\n      comentario = el.find('.comentario'),\r\n      tooltipDiv = $('div.tooltip.right'),\r\n      tooltipFlecha,\r\n      elPosition;\r\n\r\n    //abrimos el tooltip\r\n    if (ev.type === 'mouseenter' || accion === 'open') {\r\n      //creamos el div y copiamos el contenido\r\n      if (!tooltipDiv.length) {\r\n        tooltipDiv = $('<div class=\"tooltip right bottom ' + comentario.attr('class') + '\"><img class=\"flechaLeft\" src=\"' + $B.staticPath + '/img/bg-mensajes-tooltip.png\" alt=\"\" /><span class=\"comentario\"></span></div>').appendTo('body');\r\n      }\r\n      $B.utils.aria.tooltip(el, tooltipDiv);\r\n      tooltipDiv.find('.comentario').html(comentario.html()).end().addClass(comentario.attr('class')).removeClass('comentario');\r\n\r\n      //Posicionamos la flecha\r\n      tooltipFlecha = tooltipDiv.find('.flechaLeft');\r\n      tooltipFlecha.css({\r\n        top: (el.outerHeight() / 2) + 16 - (tooltipFlecha.outerWidth() / 2)\r\n      });\r\n\r\n      //posicionamos\r\n      elPosition = el.offset();\r\n      tooltipDiv.offset({\r\n        top: elPosition.top - 16,\r\n        left: elPosition.left + el.outerWidth() + 16\r\n      }).on('mouseover', function() {\r\n        tooltipDiv.remove();\r\n        $B.utils.aria.tooltip(el);\r\n      });\r\n    } else {\r\n      //borramos el tooltip\r\n      tooltipDiv.remove();\r\n      $B.utils.aria.tooltip(el);\r\n    }\r\n  };\r\n\r\n  $.widget('B.tooltipRightBottom', {\r\n    _create: function() {\r\n      this.element.hover(\r\n        $B_ui.tooltipRightBottom,\r\n        $B_ui.tooltipRightBottom\r\n      ).click(\r\n        $B_ui.tooltipRightBottom\r\n      );\r\n    }\r\n  });\r\n\r\n  /**\r\n   * tooltipVertical: para usar el tooltip vertical hay que incluir en el mvc: $(selector).tooltipVertical(); donde el selector puede ser un p, label... Y deben tener dentro un <ul class='comentario'><li>mi comentario</li></ul>\r\n   */\r\n  $B_ui.tooltipVertical = function(ev) {\r\n    var el = $(ev.currentTarget),\r\n      tooltipDiv = $('div.tooltip.vertical'),\r\n      index = el.parent().prevAll().length,\r\n      altura = el.parent().outerHeight(),\r\n      minHeight = (el.parents('ul').outerHeight() - 42);\r\n\r\n    //abrimos el tooltip\r\n    if (ev.type === 'mouseenter') {\r\n      //creamos el div y copiamos el contenido\r\n      if (!tooltipDiv.length) {\r\n        tooltipDiv = $('<div class=\"tooltip vertical\"><div class=\"comentario\"></div><img class=\"flecha\" src=\"' + $B.staticPath + '/img/bg-mensajes-tooltip-vertical.png\" alt=\"\" /></div>').appendTo(el.parents('fieldset'));\r\n      }\r\n      tooltipDiv.find('.comentario').html(el.next('.comentario').html()).css({\r\n        'min-height': minHeight\r\n      });\r\n\r\n      //Posicionamos la flecha\r\n      tooltipDiv.find('.flecha').css({\r\n        top: (index * altura) + 16\r\n      });\r\n\r\n      //posicionamos\r\n      tooltipDiv.css({\r\n        top: tooltipDiv.closest('legend').outerHeight(),\r\n        left: el.parents('ul').outerWidth(),\r\n        'min-height': minHeight\r\n      });\r\n      tooltipDiv.on('hover', function() {\r\n        tooltipDiv.remove();\r\n      });\r\n    } else {\r\n      //borramos el tooltip\r\n      tooltipDiv.remove();\r\n    }\r\n  };\r\n\r\n  $.widget('B.tooltipVertical', {\r\n    _create: function() {\r\n      this.element.hover(\r\n        function(ev) {\r\n          $B_ui.tooltipVertical(ev);\r\n        },\r\n        function(ev) {\r\n          $B_ui.tooltipVertical(ev);\r\n        }\r\n      );\r\n    }\r\n  });\r\n\r\n\r\n  /**\r\n   * c_widget_scroll\r\n   * @param {string} selector del elemento a aplicar el scroll\r\n   * @example _.c_widget_scroll('#miDivScrollable');\r\n   * Para aplicar el scroll a un elemento insertar esta llamada en el mvc despues de renderizar\r\n   */\r\n\r\n  $B_ui.c_widget_scroll = function(selector) {\r\n    $B_ui.scrollElement($(selector));\r\n  };\r\n\r\n  /*   sustituido el codigo del jscrollpane para que use custom scroll, refactor de solo un tipo de scroll\r\n    $B_ui.c_widget_scroll = function (selector) {\r\n      $(selector).jScrollPane({\r\n        showArrows: true,\r\n        verticalArrowPositions: 'after',\r\n        mouseWheelSpeed : 10\r\n      });\r\n    };\r\n  */\r\n\r\n  /*\\\r\n   * c_desplegable_carrusel\r\n   [ method ]\r\n   * Aplica la funcionalidad de un carrusel horizontal. Mirar el componente c_desplegable_carrusel para ver como generar el codigo html\r\n   > Parametros opcionales\r\n   - elementosPorPagina (number)\r\n   - animatioDuration (number) en milisegundos\r\n   - autoPlayTime (number) si autoPlay = true, el carrusel se reproduce automaticamente. Este es tiempo en milisegundos entre cada movimiento\r\n   - autoPlay (boolean) false\r\n   > Uso en los *.mvc.js\r\n   | En afterRender: this.$('#miCarrusel').c_desplegable_carrusel({ elementosPorPagina: 3 });\r\n   | En afterDisplayStep: $('#miCarrusel').c_desplegable_carrusel({ elementosPorPagina: 3 });\r\n  \\*/\r\n  $.widget('B.c_desplegable_carrusel', {\r\n    options: {\r\n      elementosPorPagina: 1,\r\n      numeroDePaginas: 0,\r\n      animatioDuration: 500,\r\n      indice: 0,\r\n      autoPlay: false,\r\n      autoPlayTime: 2000,\r\n      _autoPlayResource: null\r\n    },\r\n\r\n    _create: function() {\r\n      var self = this;\r\n      this.element.find('ol.js-pager').on('click', 'li', function(ev) {\r\n        self.getPagerItemClicked(ev);\r\n      });\r\n      this.initialize();\r\n    },\r\n\r\n    initialize: function() {\r\n      var self = this,\r\n        liItems = this.getDomContentLis(),\r\n        elementosPorPagina = this.options.elementosPorPagina,\r\n        numeroDePaginas = this.options.numeroDePaginas,\r\n        getDivContentWidth = this.getDivContentWidth(),\r\n        widthSobrante = 0;\r\n      //obtenemos el numero de paginas\r\n      this.options.numeroDePaginas = numeroDePaginas = Math.ceil(liItems.length / elementosPorPagina);\r\n      //ampliamos el tamano del ul para que sea multiplo del tamano del div\r\n      this.getDomContentUl().eq(0).width(getDivContentWidth * numeroDePaginas);\r\n      //para que los li de la ultima pagina esten siempre centrados, metemos margen a la izquierda de uno de ellos\r\n      widthSobrante = (numeroDePaginas * elementosPorPagina - liItems.length) * liItems.eq(0).outerWidth(true) / 2;\r\n      liItems.eq((numeroDePaginas - 1) * elementosPorPagina).css('margin-left', widthSobrante + 'px');\r\n      //play periodico\r\n      if (this.options.autoPlay) {\r\n        this.options._autoPlayResource = setInterval(function() {\r\n          self.play();\r\n        }, this.options.autoPlayTime);\r\n      }\r\n    },\r\n\r\n    getPagerItemClicked: function(ev) {\r\n      var $currentTarget = $(ev.currentTarget),\r\n        currentClicked = $currentTarget.index();\r\n      //obtenemos el li pulsado en funcion de si existe flechas o no\r\n      if (this.existenFlechas()) {\r\n        if (currentClicked === 0) {\r\n          this.options.indice -= 1;\r\n        } else if (currentClicked === this.options.numeroDePaginas + 1) {\r\n          this.options.indice += 1;\r\n        } else {\r\n          this.options.indice = currentClicked - 1;\r\n        }\r\n      } else {\r\n        this.options.indice = currentClicked;\r\n      }\r\n      //actualizamos\r\n      this.set();\r\n      //paramos la reproduccion\r\n      clearInterval(this.options._autoPlayResource);\r\n    },\r\n\r\n    set: function(indice) {\r\n      this.checkIndice(indice);\r\n      this.updatePager();\r\n      this.updateItems();\r\n    },\r\n\r\n    updatePager: function() {\r\n      this.getDomPagerLi().removeClass('activo').\r\n      eq((this.existenFlechas()) ? this.options.indice + 1 : this.options.indice).addClass('activo');\r\n    },\r\n\r\n    updateItems: function() {\r\n      this.getDomContentUl().eq(0).animate({\r\n        right: this.options.indice * this.getDomContentLis().eq(0).outerWidth(true) * this.options.elementosPorPagina + 'px'\r\n      }, this.options.animatioDuration);\r\n    },\r\n\r\n    play: function() {\r\n      this.options.indice = (this.options.indice >= this.options.numeroDePaginas - 1) ? 0 : this.options.indice += 1;\r\n      this.set();\r\n    },\r\n\r\n    existenFlechas: function() {\r\n      return this.element.find('ol.js-pager .js-flechaAnterior, ol.js-pager .js-flechaSiguiente').length !== 0;\r\n    },\r\n\r\n    checkIndice: function(indice) {\r\n      this.options.indice = Math.max(0, Math.min(indice || this.options.indice, this.options.numeroDePaginas - 1));\r\n    },\r\n\r\n    getDivContentWidth: function() {\r\n      return this.element.find('div.js-content').eq(0).outerWidth(true);\r\n    },\r\n\r\n    getDomPagerLi: function() {\r\n      return this.element.find('ol.js-pager li');\r\n    },\r\n\r\n    getDomContentUl: function() {\r\n      return this.element.find('div.js-content ul');\r\n    },\r\n\r\n    getDomContentLis: function() {\r\n      return this.element.find('div.js-content ul li');\r\n    }\r\n  });\r\n\r\n\r\n  /*\\\r\n   * c_mensaje_carrusel\r\n   [ method ]\r\n   * Aplica la funcionalidad de un carrusel horizontal. Mirar el componente c_desplegable_carrusel para ver como generar el codigo html\r\n   > Parametros opcionales\r\n   - elementosPorPagina (number)\r\n   - numeroElementosPintar (number) Numero de diapos que se pintan independientemente de las que lleguen.\r\n   - numeroElementosPorPaginacion (number) Numero de paginas por cada bloque de paginacion.\r\n   - animatioDuration (number) en milisegundos\r\n   - autoPlayTime (number) si autoPlay = true, el carrusel se reproduce automaticamente. Este es tiempo en milisegundos entre cada movimiento\r\n   - autoPlay (boolean) false\r\n   > Uso en los *.mvc.js\r\n   | En afterRender: this.$('#miCarrusel').c_mensajes_carrusel({ elementosPorPagina: 3 });\r\n   | En afterDisplayStep: $('#miCarrusel').c_mensajes_carrusel({ elementosPorPagina: 3 });\r\n  \\*/\r\n  $.widget('B.c_mensajes_carrusel', {\r\n    options: {\r\n      elementosPorPagina: 1,\r\n      numeroDePaginas: 0,\r\n      animatioDuration: 500,\r\n      numeroElementosPintar: 0,\r\n      numeroElementosPorPaginacion: 0,\r\n      indice: 0,\r\n      reverse: false,\r\n      autoPlay: false,\r\n      autoPlayTime: 2000,\r\n      _autoPlayResource: null,\r\n      flagStop: false\r\n    },\r\n\r\n    stopInterval: function() {\r\n      clearInterval(this.options._autoPlayResource);\r\n    },\r\n\r\n    startInterval: function() {\r\n      return $B.setLinkedInterval(this.element, this.options.autoPlayTime, {\r\n        fn: 'play',\r\n        context: this\r\n      });\r\n    },\r\n\r\n    _create: function() {\r\n      var self = this;\r\n      if (!self.options.autoPlay) {\r\n        self.options.flagStop = true;\r\n      }\r\n\r\n      this.element.find('ol.js-pager').on('click', 'li', function(ev) {\r\n        self.getPagerItemClicked(ev);\r\n      });\r\n\r\n      this.element.find('ul').on('mouseenter', function() {\r\n        self.stopInterval();\r\n      }).on('mouseleave', function() {\r\n        if (!self.options.flagStop) {\r\n          self.options._autoPlayResource = self.startInterval();\r\n        }\r\n      });\r\n\r\n      this.element.find('[data-registro-cierre-campania-individual]').on('click.carrusel', function(ev) {\r\n        var url = $(ev.currentTarget).attr('data-registro-cierre-campania-individual'),\r\n          indexCampania = $(ev.currentTarget).attr('data-index-campania');\r\n        self.sendClosedCampaign(url);\r\n        self.getDomPagerLi().filter(':not(.flecha)').eq(indexCampania).remove();\r\n        self.getDomCloserLi().eq(indexCampania).remove();\r\n        self.getDomContentLis().eq(indexCampania).remove();\r\n\r\n        self.options.numeroDePaginas += -1;\r\n\r\n        if (self.options.numeroDePaginas === 1) {\r\n          self.element.find('.c-widget-paginador').hide();\r\n        } else if (self.options.numeroDePaginas === 0) {\r\n          self.element.remove();\r\n          return;\r\n        }\r\n        self.set();\r\n      });\r\n\r\n      this.reorganizeSlides();\r\n      this.reorganizePagination();\r\n      this.initialize();\r\n    },\r\n\r\n    sendClosedCampaign: function(url) {\r\n      $.ajax({\r\n        type: 'GET',\r\n        url: url,\r\n        success: function() {}\r\n      });\r\n    },\r\n\r\n    reorganizePagination: function() {\r\n      var paginas = (this.getDomContentLis()).length,\r\n        paginasPorPaginacion = this.options.numeroElementosPorPaginacion,\r\n        currentSlide = this.getActiveIndex();\r\n      if (paginasPorPaginacion === 0 || paginas <= paginasPorPaginacion) {\r\n        return;\r\n      }\r\n      this.hidePagination(currentSlide);\r\n    },\r\n\r\n    hidePagination: function(currentIndex) {\r\n      var paginasPorPaginacion = this.options.numeroElementosPorPaginacion,\r\n        $pags;\r\n      if (!currentIndex) {\r\n        currentIndex = 1;\r\n      }\r\n      if (currentIndex === 1) {\r\n        $pags = this.element.find('ol.js-pager li').not('.flecha').slice(paginasPorPaginacion);\r\n        $pags.hide().eq(0).prevUntil('.flecha').show();\r\n      } else {\r\n        if (!this.options.reverse) {\r\n          if ((currentIndex - 1) % paginasPorPaginacion === 0) {\r\n            this.element.find('ol.js-pager li:not(.flecha):lt(' + currentIndex + ')').hide();\r\n            this.element.find('ol.js-pager li:not(.flecha):gt(' + (currentIndex - 2) + ')').slice(0, paginasPorPaginacion).show();\r\n          }\r\n        } else {\r\n          if ((currentIndex) % paginasPorPaginacion === 0) {\r\n            this.element.find('ol.js-pager li:not(.flecha):gt(' + (currentIndex - 1) + ')').hide();\r\n            this.element.find('ol.js-pager li:not(.flecha):lt(' + currentIndex + ')').slice(-paginasPorPaginacion).show();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    reorganizeSlides: function() {\r\n      if (this.options.numeroElementosPintar > 0) {\r\n        this.element.find('div.js-content ul li').slice(-this.options.numeroElementosPintar).remove();\r\n        this.element.find('ol.js-pager li:not(.js-flechaSiguiente)').slice(-this.options.numeroElementosPintar).remove();\r\n      }\r\n    },\r\n\r\n    initialize: function() {\r\n      var self = this,\r\n        liItems = this.getDomContentLis(self.options.numeroElementosPintar),\r\n        elementosPorPagina = this.options.elementosPorPagina,\r\n        numeroDePaginas = this.options.numeroDePaginas,\r\n        getDivContentWidth = this.getDivContentWidth(),\r\n        widthSobrante = 0;\r\n      //obtenemos el numero de paginas\r\n      this.options.numeroDePaginas = numeroDePaginas = Math.ceil(liItems.length / elementosPorPagina);\r\n      //ampliamos el tamano del ul para que sea multiplo del tamano del div\r\n      this.getDomContentUl().eq(0).width(getDivContentWidth * numeroDePaginas);\r\n      //para que los li de la ultima pagina esten siempre centrados, metemos margen a la izquierda de uno de ellos\r\n      widthSobrante = (numeroDePaginas * elementosPorPagina - liItems.length) * liItems.eq(0).outerWidth(true) / 2;\r\n      liItems.eq((numeroDePaginas - 1) * elementosPorPagina).css('margin-left', widthSobrante + 'px');\r\n      //play periodico\r\n      if (this.options.autoPlay) {\r\n        this.options._autoPlayResource = self.startInterval();\r\n      }\r\n      this.checkArrows();\r\n      this.updateCloser();\r\n      $B.utils.aria.carousel({\r\n        element: $(this.element)\r\n      });\r\n    },\r\n\r\n    getPagerItemClicked: function(ev) {\r\n      var $currentTarget = $(ev.currentTarget),\r\n        currentClicked = $currentTarget.index();\r\n\r\n      //obtenemos el li pulsado en funcion de si existe flechas o no\r\n      if (this.existenFlechas()) {\r\n        if ($currentTarget.hasClass('js-flechaAnterior')) {\r\n          this.options.indice -= 1;\r\n          this.options.reverse = true;\r\n        } else if ($currentTarget.hasClass('js-flechaSiguiente')) {\r\n          this.options.indice += 1;\r\n          this.options.reverse = false;\r\n        } else {\r\n          this.options.indice = currentClicked - 1;\r\n        }\r\n      } else {\r\n        //this.options.indice += 1;\r\n        this.options.indice = currentClicked;\r\n      }\r\n\r\n      //actualizamos\r\n      this.set();\r\n      //paramos la reproduccion\r\n      this.stopInterval();\r\n      this.options.flagStop = true;\r\n      this.checkArrows();\r\n\r\n    },\r\n\r\n    set: function(indice) {\r\n      this.checkIndice(indice);\r\n      this.updatePager();\r\n      this.updateCloser();\r\n      this.reorganizePagination();\r\n      this.updateItems();\r\n      this.checkArrows();\r\n    },\r\n\r\n    updatePager: function() {\r\n      this.getDomPagerLi().removeClass('activo').\r\n      eq((this.existenFlechas()) ? this.options.indice + 1 : this.options.indice).addClass('activo');\r\n      this.element.trigger('update.aria');\r\n    },\r\n\r\n    updateCloser: function() {\r\n      this.getDomCloserLi().each(function(index, item) {\r\n        $(item).attr('data-index-campania', index);\r\n      });\r\n      this.getDomCloserLi().hide().\r\n      eq(this.options.indice).show();\r\n    },\r\n\r\n    updateItems: function() {\r\n      var indice = this.options.indice;\r\n      this.getDomContentUl().eq(0).animate({\r\n        right: indice * this.getDomContentLis().eq(0).outerWidth(true) * this.options.elementosPorPagina + 'px'\r\n          //}, (indice === 0) ? 0 : this.options.animatioDuration);\r\n      }, this.options.animatioDuration);\r\n    },\r\n\r\n    play: function() {\r\n      this.options.indice = (this.options.indice >= this.options.numeroDePaginas - 1) ? 0 : this.options.indice += 1;\r\n      this.set();\r\n    },\r\n\r\n    existenFlechas: function() {\r\n      return this.element.find('ol.js-pager .js-flechaAnterior, ol.js-pager .js-flechaSiguiente').length !== 0;\r\n    },\r\n\r\n    checkIndice: function(indice) {\r\n      this.options.indice = Math.max(0, Math.min(indice || this.options.indice, this.options.numeroDePaginas - 1));\r\n    },\r\n\r\n    getDivContentWidth: function() {\r\n      return this.element.find('div.js-content').eq(0).outerWidth(true);\r\n    },\r\n\r\n    getDomPagerLi: function() {\r\n      return this.element.find('ol.js-pager li');\r\n    },\r\n\r\n    getDomCloserLi: function() {\r\n      return this.element.find('ul.boton-cerrar li');\r\n    },\r\n\r\n    getDomContentUl: function() {\r\n      return this.element.find('div.js-content ul');\r\n    },\r\n\r\n    getDomContentLis: function() {\r\n      return this.element.find('div.js-content ul li');\r\n    },\r\n\r\n    getActiveIndex: function() {\r\n      return this.element.find('ol.js-pager li.activo').index();\r\n    },\r\n\r\n    checkArrows: function() {\r\n      if (this.existenFlechas()) {\r\n        // Si estamos en la primera diapo, quitamos la flecha de la izquierda\r\n        if (this.getActiveIndex() === 1) {\r\n          this.element.find('.js-flechaAnterior').addClass('hiddenCarruselArrow');\r\n        } else {\r\n          this.element.find('.js-flechaAnterior').removeClass('hiddenCarruselArrow');\r\n        }\r\n        // Si estamos en la ultima diapo, quitamos la flecha de la izquierda\r\n        if (this.getActiveIndex() === (this.getDomPagerLi()).length - 2) { // El 2 se corresponde con los elementos de las flechas.\r\n          this.element.find('.js-flechaSiguiente').addClass('hiddenCarruselArrow');\r\n        } else {\r\n          this.element.find('.js-flechaSiguiente').removeClass('hiddenCarruselArrow');\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * indicadorProgresoOperativa\r\n   */\r\n  $.widget('B.indicadorProgresoOperativa', {\r\n    options: {\r\n      currentStep: 0,\r\n      stepsLength: 0\r\n    },\r\n\r\n    _create: function() {\r\n      this.element.find('.pasos').delegate('li.clicable', 'click',\r\n        function(ev) {\r\n          ev.stopPropagation();\r\n          ev.preventDefault();\r\n          $(this).trigger('handleStepsEventIds', $(ev.currentTarget).index());\r\n        });\r\n    },\r\n\r\n    set: function(currentStep, eventIds, literalesSelector) {\r\n      this.setLiterales(literalesSelector);\r\n      this.setOptions(currentStep);\r\n      this.setClasesWidget();\r\n      this.setClasesLi();\r\n      this.setEventIds(eventIds);\r\n    },\r\n\r\n    setOptions: function(currentStep) {\r\n      var stepsLength = this.options.stepsLength = this.element.find('ol.pasos li').length;\r\n      this.options.currentStep = Math.max(0, Math.min(currentStep, stepsLength - 1));\r\n    },\r\n\r\n    setClasesWidget: function() {\r\n      var i,\r\n        thisElement = this.element;\r\n      for (i = 0; i < 10; i += 1) {\r\n        thisElement.removeClass('pasos_' + i).removeClass('actual_' + i);\r\n      }\r\n      thisElement.addClass('c-widget-indicadorProgresoOperativa').\r\n      addClass('pasos_' + this.options.stepsLength).\r\n      addClass('actual_' + this.options.currentStep);\r\n    },\r\n\r\n    setClasesLi: function() {\r\n      var currentStep = this.options.currentStep,\r\n        stepStatusText = '';\r\n      $.each(this.element.find('li'), function(i, step) {\r\n        if (i < currentStep) {\r\n          $(step).removeClass('activo').addClass('respondido');\r\n          if ($(step).hasClass('clicable')) {\r\n            $(step).attr('tabindex', '0');\r\n          }\r\n          stepStatusText = $B.app.literals.indicadorProgresoOperativa.pasoCompletado;\r\n        } else if (i === currentStep) {\r\n          $(step).addClass('activo').removeClass('respondido').attr('tabindex', '0');\r\n          stepStatusText = $B.app.literals.indicadorProgresoOperativa.pasoEnProgreso;\r\n        } else {\r\n          $(step).removeClass('activo').removeClass('respondido').removeAttr('tabindex');\r\n          stepStatusText = $B.app.literals.indicadorProgresoOperativa.pasoNoIniciado;\r\n        }\r\n\r\n        $(step).find('.textoEstadoPaso').html(stepStatusText);\r\n      });\r\n    },\r\n\r\n    setLiterales: function(literalesSelector) {\r\n      var literales;\r\n      if (_.isString(literalesSelector)) {\r\n        literales = $(literalesSelector).data('indicador-progreso-operativa-literales');\r\n        if (!literales) {\r\n          return;\r\n        }\r\n        literales = literales.split(',');\r\n      }\r\n\r\n      if (!literales || !literales.length) {\r\n        return;\r\n      }\r\n      this.element.find('ol.pasos').html(_.tmpl('#c-v07-widget-indicadorProgresoOperativaOl', {\r\n        pasos: literales,\r\n        verNums: true\r\n      }));\r\n    },\r\n\r\n    setEventIds: function(eventIds) {\r\n      var liItems = this.element.find('li'),\r\n        liItemsLength = liItems.length,\r\n        i;\r\n\r\n      for (i = 0; i < liItemsLength; i += 1) {\r\n        if (eventIds && eventIds[i]) {\r\n          liItems.eq(i).addClass('clicable');\r\n        } else {\r\n          liItems.eq(i).removeClass('clicable');\r\n        }\r\n      }\r\n    },\r\n\r\n    delEventIds: function() {\r\n      this.element.find('li.clicable').removeClass('clicable');\r\n    },\r\n\r\n    destroy: function() {\r\n      this.element.html('').removeClass('c-widget-indicadorProgresoOperativa');\r\n      $.Widget.prototype.destroy.call(this);\r\n    }\r\n  });\r\n\r\n  /*\r\n   * c_tablas_scroll\r\n   *\r\n   * Este plugin sustituye una tabla normal por dos tablas, la primera para la cabecera y la segunda para el cuerpo, poniendo el cuerpo\r\n   *  en un div que es sobre el que se aplica el scroll. No se modifican clases ni atributos de la tabla.\r\n   * IMPORTANTE: Actualmente el scroll es el normal, en breve se anadira la opcion de activar el scroll personalizado\r\n   * @param: trMax si el numero de filas (tbody > tr) de la tabla supera trMax se aplica el scroll, si es menor no se hace nada. Por defecto 5\r\n   * @param: newDivClass clase del div generado en el que se aplica el scroll, por defecto scrollTabla\r\n   * @example: incluir en el mvc $('.js-mi-table-scroll').c_tablas_scroll( { trMax: 3 } );\r\n   */\r\n\r\n  $.widget('B.c_tablas_scroll', {\r\n    options: {\r\n      trMax: 5,\r\n      newDivClass: 'scrollTabla'\r\n    },\r\n\r\n    _create: function() {\r\n      //comprobamos el numero de filas\r\n      if (this.options.trMax >= this.element.find('tbody tr').length) {\r\n        return;\r\n      }\r\n\r\n      var table = this.element.clone(),\r\n        attributesLength = this.element.context.attributes.length,\r\n        tableAttrs = '',\r\n        thead,\r\n        tbody,\r\n        caption,\r\n        colgroup,\r\n        i;\r\n\r\n      //obtenemos los atributos de table\r\n      for (i = 0; i < attributesLength; i += 1) {\r\n        tableAttrs += ' ' + this.element.context.attributes[i].name + '=\"' + this.element.context.attributes[i].value + '\"';\r\n      }\r\n\r\n      //obtenemos los hijos de la tabla y su html\r\n      table.find('thead').wrap('<div class=\"thead\" />');\r\n      table.find('tbody').wrap('<div class=\"tbody\" />');\r\n      table.find('caption').wrap('<div class=\"caption\" />');\r\n      table.find('colgroup').wrap('<div class=\"colgroup\" />');\r\n      thead = table.find('div.thead').html();\r\n      tbody = table.find('div.tbody').html();\r\n      caption = table.find('div.caption').html();\r\n      colgroup = table.find('div.colgroup').html();\r\n\r\n      //reemplazamos el codigo\r\n      this.element.replaceWith('<table' + tableAttrs + '>' + caption + colgroup + thead.replace('thead', 'tbody').replace('thead', 'tbody') + '</table>' +\r\n        '<div class=\"' + this.options.newDivClass + '\"><table' + tableAttrs + '>' + caption + colgroup + tbody + '</table></div>');\r\n    }\r\n  });\r\n\r\n  /* B.cWidgetSlider\r\n   *\r\n   * parametros:\r\n   *  explicados en la descripcion de inicializar\r\n   * metodos:\r\n   *\r\n   * inicializar:\r\n   *  $('.selector').cWidgetSlider({\r\n        minSlider : 50, //valor minimo del Slider\r\n        maxSlider : 3000, //valor maximo del Slider\r\n        stepSlider : 5, //valor saltos del Slider\r\n        initialValueSlider : -1, //por defecto, -1 calcula la mitad del min y el max\r\n        wrapperValuePosition: 'top', //posicion del cuadro del value ('top' (por defecto) OR 'bottom')\r\n        wrapperValueUnit: '&euro;', //unidad del valor\r\n        wrapperValueSufix: '', //sufijo para el cuadro del value\r\n        wrapperValueFormat: 'd', //formato del numero, por defecto sin decimales\r\n        wrapperCalculation: false, //true para dibujar un segundo cuadro con factor de multiplicacion\r\n        wrapperCalculationUnit: '', //unidad del segundo cuadro\r\n        wrapperCalculationSufix: '', //sufijo del segundo cuadro\r\n        wrapperCalculationFormat: 'n', //formato del numero, por defecto con decimales\r\n        calculationFactor: 0.632, //factor de multiplicacion del segundo cuadro\r\n        applyFactor: true, //Si es falso, el tooltip de abajo sera informativo\r\n        wrapper : '#js-slider', //div donde genera el slider (NO TOCAR)\r\n        inputValue : '#cantidadSolicitada', //input donde guarda el valor\r\n        inputCalculation : '#cantidadCalculada', //input donde guarda el valor calculado\r\n        slide: function (value) {} //callback en el slide\r\n      })\r\n   */\r\n  $.widget('B.cWidgetSlider', {\r\n    options: {\r\n      minSlider: 50,\r\n      maxSlider: 3000,\r\n      stepSlider: 5,\r\n      initialValueSlider: -1,\r\n      wrapperValuePosition: 'top',\r\n      wrapperValueUnit: '&euro;',\r\n      wrapperValueSufix: '',\r\n      wrapperValueFormat: 'd',\r\n      wrapperCalculation: false,\r\n      wrapperCalculationUnit: '',\r\n      wrapperCalculationSufix: '',\r\n      wrapperCalculationFormat: 'n',\r\n      calculationFactor: 1,\r\n      applyFactor: true,\r\n      wrapper: '#js-slider',\r\n      inputValue: '#cantidadSolicitada',\r\n      inputCalculation: '#cantidadCalculada',\r\n      slide: null,\r\n      stop: null,\r\n      customIntervals: null,\r\n      customSelect: null,\r\n      customInput: null,\r\n      valMap: null\r\n    },\r\n\r\n    _create: function() {\r\n      var self = this,\r\n        options = self.options,\r\n        $element = self.element,\r\n        $sliderElement = $element.find(options.wrapper),\r\n        saldo = self._getSalary(),\r\n        valMapLength = 0,\r\n        middleIndex,\r\n        halfRange,\r\n        min,\r\n        removeRest = function(amount) {\r\n          return amount - (amount % options.stepSlider);\r\n        };\r\n\r\n      // comprobamos si ha sido inicializado\r\n      if ($sliderElement.hasClass('ui-slider')) {\r\n        return self.element;\r\n      }\r\n\r\n      if (options.valMap) {\r\n        valMapLength = options.valMap.length - 1;\r\n        options.stepSlider = 1;\r\n      }\r\n\r\n      if (options.initialValueSlider === -1) {\r\n        if (options.valMap) {\r\n          min = options.valMap[0];\r\n          halfRange = valMapLength / 2;\r\n\r\n          if (saldo !== false) {\r\n            middleIndex = removeRest(halfRange);\r\n            if (saldo > min && saldo < options.valMap[middleIndex]) {\r\n              $.each(options.valMap, function(i, val) {\r\n                if (val < saldo && i <= middleIndex) {\r\n                  halfRange = i;\r\n                }\r\n              });\r\n            } else if (saldo < options.valMap[0]) {\r\n              halfRange = 0;\r\n            }\r\n          }\r\n        } else {\r\n          min = self._getRange('min');\r\n          halfRange = (self._getRange('max') + min) / 2;\r\n\r\n          if (saldo !== false) {\r\n            if (saldo > min && saldo < removeRest(halfRange)) {\r\n              halfRange = saldo - (halfRange % options.stepSlider);\r\n            } else if (saldo < min) {\r\n              halfRange = min;\r\n            }\r\n          }\r\n        }\r\n\r\n        options.initialValueSlider = removeRest(halfRange);\r\n      } else if (options.valMap) {\r\n        options.initialValueSlider = jQuery.inArray(options.initialValueSlider, options.valMap);\r\n      }\r\n\r\n      // save inputs dom objects in options for reference\r\n      options.inputValue = $element.find(options.inputValue); /*.hide();*/\r\n      options.inputCalculation = $element.find(options.inputCalculation); /*.hide();*/\r\n\r\n\r\n      $sliderElement.slider({\r\n        range: 'min',\r\n        value: options.initialValueSlider,\r\n        min: (options.valMap) ? 0 : self._getRange('min'),\r\n        max: (options.valMap) ? valMapLength : self._getRange('max'),\r\n        step: options.stepSlider,\r\n        create: function() {\r\n          var customLimits, limitsContainer;\r\n          if (!$element.hasClass('c-widget-slider-sin-botones')) {\r\n            $element\r\n              .prepend('<span role=\"button\" class=\"botonMenos btn\" tabindex=\"0\">-</span>')\r\n              .append('<span role=\"button\" class=\"botonMas btn\" tabindex=\"0\">+</span>')\r\n              .on({\r\n                click: function(ev) {\r\n                  if (!_.isEmpty(self.options.customIntervals)) {\r\n                    self._handleSliderPosition(ev);\r\n                  } else {\r\n                    self._slide(ev);\r\n                  }\r\n                },\r\n                keypress: function(ev) {\r\n                  if (ev.which === $.ui.keyCode.ENTER || ev.which === $.ui.keyCode.SPACE) {\r\n                    ev.preventDefault();\r\n                    self._slide(ev);\r\n                  }\r\n                }\r\n              }, '.btn');\r\n          }\r\n          $element.find('.limites').css('display', 'block');\r\n\r\n          // class component 1 tooltip top or bottom\r\n          if (!options.wrapperCalculation) {\r\n            if (options.wrapperValuePosition === 'top') {\r\n              $element.addClass('onlyTopTooltip');\r\n            } else {\r\n              $element.addClass('onlyBottomTooltip');\r\n            }\r\n          }\r\n\r\n          // append tooltips\r\n          if (!$element.hasClass('c-widget-slider-sin-tooltip')) {\r\n            self._appendTooltips();\r\n          }\r\n\r\n          if (!$element.hasClass('c-widget-slider-sin-limites-personalizados')) {\r\n            customLimits = $element.find('.limite');\r\n            limitsContainer = $element.find('.limites');\r\n            customLimits.css({\r\n              width: (100 / customLimits.length) + '%'\r\n            });\r\n          }\r\n\r\n          // set slider initvalues\r\n          self._setSliderValue(options.initialValueSlider);\r\n          // set slider range\r\n          self._updateRangeView();\r\n\r\n          $B.utils.aria.slider({\r\n            element: $element,\r\n            sliderControl: '.ui-slider-handle',\r\n            secondaryControls: '.btn',\r\n            minValue: self._getRange('min'),\r\n            maxValue: self._getRange('max')\r\n          });\r\n        },\r\n\r\n        slide: function(event, ui) {\r\n          self._setSliderValue(ui.value);\r\n        },\r\n        stop: function(event, ui) {\r\n          if (!_.isEmpty(self.options.customIntervals)) {\r\n            self._setSliderPosition(ui.value);\r\n          } else if (!_.isEmpty(self.options.customInput)) {\r\n            self._setCustomInputValue(ui.value);\r\n          }\r\n          self._stopDropFn(ui.value);\r\n        }\r\n      });\r\n    },\r\n\r\n    _slide: function(ev) {\r\n      // get actual slider value\r\n      var value = this.element.find(this.options.wrapper).slider('value');\r\n\r\n      if ($(ev.currentTarget).hasClass('botonMenos')) {\r\n        if (this._preventSlideLess(value)) {\r\n          return false;\r\n        }\r\n        value -= this.options.stepSlider;\r\n      } else {\r\n        if (this._preventSlideMore(value)) {\r\n          return false;\r\n        }\r\n        value += this.options.stepSlider;\r\n      }\r\n\r\n      this._setSliderValue(value);\r\n\r\n      if (!_.isEmpty(this.options.customInput)) {\r\n        this._setCustomInputValue(value);\r\n      }\r\n\r\n    },\r\n\r\n    _stop: function() {\r\n      var value = this.element.find(this.options.wrapper).slider('value');\r\n\r\n      this._setSliderValue(value);\r\n\r\n    },\r\n\r\n    _stopDropFn: function(value) {\r\n      // call slide fn callback if any\r\n      if (this.options.stop && $.isFunction(this.options.stop)) {\r\n        this.options.stop.call(this, value);\r\n      }\r\n\r\n    },\r\n\r\n    _getValueToCalculate: function(value) {\r\n      return (this.options.applyFactor) ? value / this.options.calculationFactor : value;\r\n    },\r\n\r\n    _getStepSize: function() {\r\n      return (this.options.applyFactor) ? this.options.stepSlider / this.options.calculationFactor : this.options.stepSlider;\r\n    },\r\n\r\n    _preventSlideLess: function(value) {\r\n      var prevent = false,\r\n        valueToCalculate,\r\n        stepSize;\r\n\r\n      if (this.options.valMap) {\r\n        prevent = (value - this.options.stepSlider) < 0;\r\n      } else {\r\n        valueToCalculate = this._getValueToCalculate(value);\r\n        stepSize = this._getStepSize();\r\n        prevent = (valueToCalculate - stepSize) < this.options.minSlider;\r\n      }\r\n\r\n      return prevent;\r\n    },\r\n\r\n    _preventSlideMore: function(value) {\r\n      var prevent = false,\r\n        valueToCalculate,\r\n        stepSize;\r\n\r\n      if (this.options.valMap) {\r\n        prevent = (value + this.options.stepSlider) > this.options.valMap.length - 1;\r\n      } else {\r\n        valueToCalculate = this._getValueToCalculate(value);\r\n        stepSize = this._getStepSize();\r\n        prevent = (valueToCalculate + stepSize) > this.options.maxSlider;\r\n      }\r\n\r\n      return prevent;\r\n    },\r\n\r\n    _appendTooltips: function() {\r\n      // add calculated value tooltip if needed\r\n      var html_wrapperCalculation = '',\r\n        tooltips;\r\n\r\n      if (this.options.wrapperCalculation) {\r\n        html_wrapperCalculation = '<span class=\"' + this._getTooltipWrapper('calculation') + '\"></span>';\r\n      }\r\n\r\n      tooltips = '<span class=\"' + this._getTooltipWrapper('value') + '\"></span>' + html_wrapperCalculation;\r\n\r\n      this.element.find(this.options.wrapper).find('.ui-slider-handle').append(tooltips);\r\n    },\r\n\r\n    _getTooltipWrapper: function(what) {\r\n      var wrapperPos = this.options.wrapperValuePosition,\r\n        topWrapper = 'cantidadSuperior',\r\n        bottomWrapper = 'cantidadInferior',\r\n        tooltip_wrapper = {\r\n          top: {\r\n            value: topWrapper,\r\n            calculation: bottomWrapper\r\n          },\r\n          bottom: {\r\n            value: bottomWrapper,\r\n            calculation: topWrapper\r\n          }\r\n        };\r\n\r\n      if (tooltip_wrapper[wrapperPos][what]) {\r\n        return tooltip_wrapper[wrapperPos][what];\r\n      } else {\r\n        throw new Error('No existe ese tooltip');\r\n      }\r\n    },\r\n\r\n    _setSliderValue: function(value) {\r\n      // set slider value\r\n      this.element.find(this.options.wrapper).slider({\r\n        value: value\r\n      });\r\n\r\n      // normal value\r\n      this._setNormalValue(value);\r\n\r\n\r\n      // calculated value if any\r\n      if (this.options.wrapperCalculation) {\r\n        this._setCalculatedValue(value);\r\n      }\r\n\r\n      // call slide fn callback if any\r\n      if (this.options.slide && $.isFunction(this.options.slide)) {\r\n        this.options.slide.call(this, value);\r\n      }\r\n\r\n    },\r\n    _handleSliderPosition: function(ev) {\r\n\r\n      var currentIndex = _.indexOf(_.pluck(this.options.customIntervals, 'value'), parseFloat(this.options.inputValue.val())),\r\n        isNextButton = $(ev.currentTarget).hasClass('botonMas'),\r\n        selectedIndex,\r\n        variation = isNextButton ? 1 : -1;\r\n\r\n      if ((isNextButton && currentIndex + 1 === this.options.customIntervals.length) || (!isNextButton && currentIndex === 0)) {\r\n        selectedIndex = currentIndex;\r\n      } else {\r\n        selectedIndex = currentIndex + variation;\r\n      }\r\n\r\n      this._setSliderValue(this.options.customIntervals[selectedIndex].value);\r\n\r\n      if (!_.isNull(this.options.customSelect)) {\r\n        this.options.customSelect.selectmenu('index', selectedIndex);\r\n      }\r\n      if (!_.isNull(this.options.customInput)) {\r\n        this.options.customInput.val(this.options.customIntervals[selectedIndex].value);\r\n      }\r\n\r\n    },\r\n    _setSliderPosition: function(value) {\r\n\r\n      var result = _.last(this.options.customIntervals).value,\r\n        newValue = value,\r\n        currentIndex;\r\n\r\n      _.each(this.options.customIntervals, function(interval, index) {\r\n        var newResult = Math.abs(interval.value - value);\r\n\r\n        if (newResult < result) {\r\n          result = newResult;\r\n          newValue = interval.value;\r\n          currentIndex = index;\r\n        }\r\n      });\r\n\r\n      if (!_.isNull(this.options.customSelect)) {\r\n        this.options.customSelect.selectmenu('index', currentIndex);\r\n      }\r\n\r\n      this._setSliderValue(newValue);\r\n\r\n    },\r\n\r\n    _setCustomInputValue: function(value) {\r\n      this.options.customInput.val(value);\r\n    },\r\n\r\n    _setNormalValue: function(value) {\r\n      // tooltip value\r\n      var tooltipFormattedValue = this._formatTooltipValue(value);\r\n      // update tooltip\r\n      this._addValueAndCenterTooltip(this._getTooltipWrapper('value'), tooltipFormattedValue);\r\n      // set input value\r\n      this.options.inputValue.val(_.formatNumber(this._getValue(value), 'd')).trigger('change');\r\n    },\r\n\r\n    _setCalculatedValue: function(value) {\r\n      var valueCalculated = value / this.options.calculationFactor,\r\n        tooltipFormattedValue = this._formatTooltipValueCalculated(valueCalculated);\r\n      // update tooltip\r\n      this._addValueAndCenterTooltip(this._getTooltipWrapper('calculation'), tooltipFormattedValue);\r\n      // set input value\r\n      this.options.inputCalculation.val(valueCalculated).trigger('change');\r\n    },\r\n    _getValue: function(value) {\r\n      if (this.options.valMap) {\r\n        return this.options.valMap[value];\r\n      } else {\r\n        return value;\r\n      }\r\n    },\r\n    _formatTooltipValue: function(value) {\r\n      return _.formatNumber(this._getValue(value), this.options.wrapperValueFormat) + ' ' + this.options.wrapperValueUnit + this.options.wrapperValueSufix;\r\n    },\r\n\r\n    _formatTooltipValueCalculated: function(value) {\r\n      return _.formatNumber(value, this.options.wrapperCalculationFormat) + ' ' + this.options.wrapperCalculationUnit + this.options.wrapperCalculationSufix;\r\n    },\r\n\r\n    _positionTooltips: function(tooltip) {\r\n      var calculatedWidth = parseInt(tooltip.css('width'), 10) - parseInt(tooltip.css('padding-left'), 10) + parseInt(tooltip.css('padding-right'), 10) || 70,\r\n        cssLeft = 6 - Math.floor(calculatedWidth / 2);\r\n\r\n      tooltip.css('left', cssLeft);\r\n    },\r\n\r\n    _addValueAndCenterTooltip: function(tooltip_wrapper, value) {\r\n      var tooltip = this.element.find(this.options.wrapper).find('.' + tooltip_wrapper).html(value);\r\n\r\n      this._positionTooltips(tooltip);\r\n    },\r\n\r\n    _updateRangeView: function() {\r\n\r\n      var self = this,\r\n        content = function(value) {\r\n          var formatParam, wrapperValue;\r\n\r\n          formatParam = self.options.wrapperValueFormat;\r\n          wrapperValue = self.options.wrapperCalculationUnit || self.options.wrapperValueUnit;\r\n\r\n          value = value - value % self.options.stepSlider;\r\n\r\n          return _.formatNumber(value, formatParam) + ' ' + wrapperValue;\r\n        };\r\n\r\n      self.element.find('.limites .cantidad').map(function(i, el) {\r\n        var value;\r\n        if (i === 0) {\r\n          value = self.options.minSlider;\r\n        } else {\r\n          value = self.options.maxSlider;\r\n        }\r\n\r\n        $(el).html(content(value));\r\n      });\r\n    },\r\n    _getSalary: function() {\r\n      //get salary of the dom\r\n      var saldoDisponible = this.element.find('[data-saldo-disponible]').data('saldo-disponible'),\r\n        salary = (saldoDisponible) ? Globalize.parseFloat(saldoDisponible.saldo) : this.options.maxSlider;\r\n      return (this.options.applyFactor) ? salary * this.options.calculationFactor : false;\r\n    },\r\n    _getRange: function(m) {\r\n      var min = (this.options.applyFactor) ? this.options.minSlider * this.options.calculationFactor : this.options.minSlider,\r\n        max = (this.options.applyFactor) ? this.options.maxSlider * this.options.calculationFactor : this.options.maxSlider,\r\n        minmax;\r\n\r\n      if (max % this.options.stepSlider !== 0) {\r\n        max -= max % this.options.stepSlider;\r\n      }\r\n      // Redondea hacia un multiplo\r\n      if (min % this.options.stepSlider !== 0) {\r\n        min += this.options.stepSlider - min % this.options.stepSlider;\r\n      }\r\n\r\n      minmax = {\r\n        min: min,\r\n        max: max\r\n      };\r\n\r\n      return minmax[m];\r\n    },\r\n\r\n    updateTooltipPosition: function() {\r\n      this._positionTooltips(this.element.find('.' + this._getTooltipWrapper('value')));\r\n      if (this.options.wrapperCalculation) {\r\n        this._positionTooltips(this.element.find('.' + this._getTooltipWrapper('calculation')));\r\n      }\r\n    },\r\n\r\n    updateValues: function() {\r\n      var $sliderElement = this.element.find(this.options.wrapper),\r\n        //value = parseInt(this.options.inputCalculation.val(), 10) / this.options.calculationFactor,\r\n        value = parseFloat(this.options.inputCalculation.val()) / this.options.calculationFactor,\r\n        self = this;\r\n\r\n      $sliderElement.slider({\r\n        min: self._getRange('min'),\r\n        max: self._getRange('max')\r\n      });\r\n\r\n      this._setSliderValue(value);\r\n    },\r\n\r\n    value: function(value) {\r\n      if (value) {\r\n        this.element.find(this.options.wrapper).slider('value', value);\r\n        return this.element.find(this.options.wrapper).slider('value');\r\n      } else {\r\n        return this.element.find(this.options.wrapper).slider('value');\r\n      }\r\n    },\r\n\r\n    destroy: function() {\r\n      this.element.find(this.options.wrapper).slider('destroy');\r\n      this.element.find('.limites, .btn').remove();\r\n      this.options.inputValue.val('').show();\r\n      $.Widget.prototype.destroy.call(this);\r\n    }\r\n  });\r\n\r\n  /* B.cSelectMenu\r\n   *\r\n   * parametros:\r\n   *  explicados en la descripcion de inicializar\r\n   * metodos:\r\n   *\r\n   * inicializar:\r\n   *  $('.selector').cWidgetSlider()\r\n   */\r\n  $.widget('B.cSelectMenu', {\r\n    options: {\r\n      truncate: 0,\r\n      listResizer: 3,\r\n      width: 'auto',\r\n      truncateText: true\r\n    },\r\n\r\n    _create: function() {\r\n      var $el = this.element,\r\n        $select = $el.find('select'),\r\n        self = this,\r\n        selectMenuMenu,\r\n        getSelectMenuMenu = function() {\r\n          if (!selectMenuMenu.length) {\r\n            selectMenuMenu = $('#' + $select.attr('id') + '-menu').closest('.ui-selectmenu-menu');\r\n          }\r\n        },\r\n        selectMenuMenuUl,\r\n        ulHeight,\r\n        contenedorMenu,\r\n        defaultText = $select.attr('title');\r\n\r\n      $select.selectmenu({\r\n        width: 'none',\r\n        transferClasses: false,\r\n        listResizer: this.options.listResizer,\r\n        open: function(event) {\r\n          //$B_ui.scrollElement(selectMenuMenuUl);\r\n          if (!$select.hasClass('noTruncate')) {\r\n            getSelectMenuMenu();\r\n            selectMenuMenu.find('a:not([data-truncated])').truncateText({\r\n              textMaxLength: self.options.truncate,\r\n              width: self.options.width\r\n            });\r\n          }\r\n          if (selectMenuMenuUl.find('li').length < 4) {\r\n            selectMenuMenuUl.parentsUntil('.ui-selectmenu-menu').css({\r\n              'height': selectMenuMenuUl.height()\r\n            });\r\n            $select.selectmenu('refreshPosition');\r\n          } else {\r\n            var $target = $(event.currentTarget),\r\n              idList = $target.attr('aria-owns'),\r\n              $list = $('#' + idList),\r\n              targetOffsetTop = $target.offset().top,\r\n              positionTopInViewport = targetOffsetTop - $(window).scrollTop(),\r\n              viewportHeight = $(window).height(),\r\n              targetHeight = $target.height(),\r\n              spaceBelow = viewportHeight - (positionTopInViewport + targetHeight),\r\n              spaceAbove = positionTopInViewport,\r\n              newListHeight = null;\r\n\r\n            if (spaceBelow > spaceAbove && spaceBelow < selectMenuMenuUl.height()) {\r\n              newListHeight = spaceBelow - 10;\r\n            } else if (spaceAbove > spaceBelow && spaceAbove < selectMenuMenuUl.height()) {\r\n              newListHeight = spaceAbove - 10;\r\n            }\r\n\r\n            if ($el.attr('data-max-height')) {\r\n              newListHeight = $el.attr('data-max-height');\r\n            }\r\n\r\n            if (!_.isNull(newListHeight)) {\r\n              selectMenuMenuUl.parentsUntil('.ui-selectmenu-menu').css({\r\n                'height': newListHeight\r\n              });\r\n              if ($list.is('[data-assigned-height]') && !$select.hasClass('noTruncate')) {\r\n                $list.parent().css({\r\n                  height: ''\r\n                });\r\n              } else {\r\n                $list.attr('data-assigned-height', true);\r\n              }\r\n              $select.selectmenu('refreshPosition');\r\n            }\r\n          }\r\n          if ($select.is('[data-forced-height]')) {\r\n            setTimeout(function() {\r\n              contenedorMenu = $('#' + $select.attr('id') + '-menu');\r\n              var alturaTotal = contenedorMenu.parent().height();\r\n              contenedorMenu.parent().parent().css('height', alturaTotal);\r\n              if ($B.appConfig.enableTabletFeatures && $B.capabilities.touch) {\r\n                $B.ui.scrollElement(contenedorMenu);\r\n              } else {\r\n                contenedorMenu.customScroll2({\r\n                  scrollType: 'combo'\r\n                });\r\n                contenedorMenu.customScroll2('setPosition');\r\n              }\r\n              $(document).off('click.combo').on('click.combo', function(ev) {\r\n                if (!$(ev.currentTarget).closest('.ui-selectmenu-open').length) {\r\n                  $(document).off('click.combo');\r\n                  $select.selectmenu('close');\r\n                }\r\n              });\r\n            }, 10);\r\n          }\r\n        },\r\n        change: function() {\r\n          $(document).off('click.combo');\r\n          var\r\n            _select = $el.find('select'),\r\n            // El el contenedor de pasos estan almacenados los nombres de las instancias del plugin\r\n            // que han sido modificados en la operativa.\r\n            // Esto se usa para validar los select.\r\n            // En formvalidation.js, metodo prepareRequiredSelects se asigna el data-default si procede\r\n            selectedData = _select.parents('.contenedorPasos').data('selectChanged');\r\n\r\n          _select.data('default', false);\r\n          if (!selectedData) {\r\n            selectedData = [];\r\n          } else {\r\n            // El nombre del select cambiado se anade a la lista que luego se almacena\r\n            // en el data del contenedor de pasos.\r\n            selectedData.push(this.name);\r\n          }\r\n          _select.parents('.contenedorPasos').data('selectChanged', selectedData);\r\n          if (self.options.truncateText) {\r\n            $el.find('.ui-selectmenu-status').first().truncateText();\r\n          }\r\n        },\r\n        select: function() {\r\n          if (self.options.truncateText) {\r\n            $el.find('.ui-selectmenu-status').first().truncateText();\r\n          }\r\n        }\r\n      });\r\n\r\n      selectMenuMenu = $('#' + $select.attr('id') + '-menu').parent('.ui-selectmenu-menu');\r\n      $select.parent().find('[role=\"button\"]').attr('role', 'combobox');\r\n\r\n      selectMenuMenu.addClass($select.attr('class'));\r\n      $el.addClass($select.attr('class'));\r\n\r\n      /* LA FUNCION DEL MIXIN truncate LA ASUME EL METODO truncateText presente en bbva.ui */\r\n      /*if (self.options.truncate > 0) {\r\n        selectMenuMenu.find('li a').each(function () {\r\n          if (!$(this).find('abbr, [data-truncated-text]').length) {\r\n            $(this).html(_.truncate($(this).text(), self.options.truncate));\r\n          }\r\n        });\r\n      }*/\r\n\r\n      // Anadimos un evento change.customize\r\n      $select.on('change.customize', function() {\r\n        var $this = $(this);\r\n        if ($this.attr('disabled')) {\r\n          $this.selectmenu('disable');\r\n        } else {\r\n          self.enable();\r\n        }\r\n      });\r\n\r\n      //init scroll\r\n      selectMenuMenuUl = selectMenuMenu.find('ul');\r\n      selectMenuMenu.show();\r\n      //si un combo esta vacio (solo tiene un li) y si luego se pobla (con mas li) mantiene el ulHeight anterior\r\n      //por ello se aplica el ulHeight de al menos 3 li\r\n      ulHeight = Math.max(selectMenuMenu.find('li').outerHeight() * 3, selectMenuMenuUl.outerHeight());\r\n      //$B_ui.scrollElement(selectMenuMenuUl);\r\n      selectMenuMenu.hide();\r\n\r\n      if (!$select.hasClass('noTruncate')) {\r\n        selectMenuMenuUl.css('height', 'auto')\r\n          .wrap('<div class=\"selectmenu-ul-wrapper\" />')\r\n          .closest('div').css({\r\n            'height': ulHeight,\r\n            'overflow': 'hidden',\r\n            'padding-bottom': '2px'\r\n          });\r\n      } else {\r\n        selectMenuMenuUl.css('height', 'auto')\r\n          .wrap('<div class=\"selectmenu-ul-wrapper\" />')\r\n          .closest('div').css({\r\n            'height': ulHeight,\r\n            'overflow-x': 'hidden',\r\n            'overflow-y': 'auto',\r\n            'padding-bottom': '2px'\r\n          });\r\n      }\r\n\r\n\r\n      // comprobamos que no exista ningun option seleccionado por defecto desde el mixin y que defaultText venga informado\r\n      if ($select[0] && !$select.find('[data-selected]')[0] && defaultText) {\r\n        $select[0].selectedIndex = -1;\r\n        $el.find('.ui-selectmenu-status').text(defaultText);\r\n      }\r\n\r\n      $el.find('.ui-selectmenu-status').first().truncateText();\r\n    },\r\n\r\n    index: function(index) {\r\n      return this.element.find('select').selectmenu('index', index);\r\n    },\r\n\r\n    enable: function() {\r\n      var $el = this.element,\r\n        elMenu = 'ul#' + $el.find('select').attr('id') + '-menu';\r\n      //la funcion enable de selectmenu no elimina correctamente las clases css\r\n      $el.find('select').selectmenu('enable');\r\n      $el.removeClass('ui-selectmenu-disabled').removeClass('ui-state-disabled');\r\n      $(elMenu).closest('div').removeClass('ui-selectmenu-disabled').removeClass('ui-state-disabled');\r\n    },\r\n\r\n    destroy: function() {\r\n      var $el = this.element,\r\n        $select = $el.find('select');\r\n      $select.selectmenu('destroy');\r\n      $el.removeClass($select.attr('class'));\r\n      $.Widget.prototype.destroy.call(this);\r\n    }\r\n  });\r\n\r\n  /* $.truncateText\r\n   *\r\n   * parametros:\r\n   *  options {\r\n   *    textMaxLength: [integer with fixed characters limit] (value 0 for no limit)\r\n   *    width: [integer with fixed width]\r\n   *    limiter: [String with ellipsis or equivalent]\r\n   *    reversed: [Boolean add hellip at start instead the end of string]\r\n   *    maskedRegex: [Regular expression for masked strings]\r\n   *    template: [Template selector]\r\n   *    truncatedTextSelector: [Truncated text element selector from specified template]\r\n   * }\r\n   * metodos:\r\n   *\r\n   * inicializar:\r\n   *  $('.selector').truncateText()\r\n   */\r\n  $.fn.extend({\r\n    truncateText: function(options) {\r\n      var defaults = {\r\n          textMaxLength: 0,\r\n          width: 'auto',\r\n          limiter: '&hellip;',\r\n          reversed: false,\r\n          maskedRegex: /[\\*]{4}[0-9]{4}/,\r\n          template: '#c-contenedor-texto-truncado-abbr',\r\n          truncatedTextSelector: '[data-truncated-text]'\r\n        },\r\n        truncateWidth;\r\n      options = $.extend(defaults, options);\r\n\r\n      return this.each(function() {\r\n        var text = ($(this).find(options.truncatedTextSelector).length) ? $(this).find(options.truncatedTextSelector).attr('title') : $(this).text(),\r\n          maskedRegex = new RegExp(options.maskedRegex),\r\n          rtl = (maskedRegex.test(text)) || options.reversed ? true : false,\r\n          temporaryContainer,\r\n          newTextLength,\r\n          truncatedText;\r\n\r\n        // Se retiran espacios innecesarios, pues distorsionan la precision del truncado de texto\r\n        text = text.replace(/\\s+/g, ' '); // retiramos bloques de dos espacios o mas, sustituyendolos por un solo espacio\r\n        text = text.replace(/(^\\s+|\\s+$)/g, ''); // retiramos espacios al inicio o al final\r\n\r\n        if (options.width === 'auto') {\r\n          truncateWidth = $(this).width() - 5; //5px de margen de seguridad\r\n        } else {\r\n          truncateWidth = options.width;\r\n        }\r\n        $(this).html('<span data-temporary-text style=\"display:block;\">' + text + '</span>');\r\n        temporaryContainer = $(this).find('[data-temporary-text]').first().css({\r\n          'display': 'block',\r\n          'position': 'absolute',\r\n          'top': 0,\r\n          'left': 0,\r\n          'white-space': 'nowrap'\r\n        });\r\n\r\n        if (temporaryContainer.width() > truncateWidth && temporaryContainer.width() > 0) {\r\n          for (newTextLength = text.length; temporaryContainer.width() > truncateWidth && newTextLength > 0; newTextLength -= 1) {\r\n            temporaryContainer.html(text.substr(0, newTextLength) + options.limiter);\r\n          }\r\n          newTextLength += 1;\r\n          /*el codigo comentado hacia una estimacion de los caracteres que caben, el for anterior lo mide exactamente\r\n          newTextLength = Math.floor((text.length / 100) * (truncateWidth * 100 / temporaryContainer.width()));*/\r\n          newTextLength = (newTextLength > options.textMaxLength && options.textMaxLength > 0) ? options.textMaxLength : newTextLength;\r\n          $(this).attr('data-truncated', true);\r\n          truncatedText = (rtl) ? options.limiter + text.substr(text.length - newTextLength + 2) : text.substr(0, newTextLength).trim() + options.limiter;\r\n          $(this).html(_.c_contenedores_texto_truncado({\r\n            texto: text,\r\n            textoTruncado: truncatedText,\r\n            template: options.template\r\n          }));\r\n          $(this).find(options.truncatedTextSelector).first().css({\r\n            'display': 'block',\r\n            'width': $(this).width()\r\n          });\r\n        } else {\r\n          $(this).html(text);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  /* B.c_aviso_saldo_disponible\r\n   *\r\n   * descripcion:\r\n   *  Muestra un aviso de que el saldo disponible no es suficiente para la operacion que se esta realizando\r\n   * metodos:\r\n   *\r\n   * inicializar:\r\n   *  context.c_aviso_saldo_disponible()\r\n   */\r\n  $.widget('B.c_aviso_saldo_disponible', {\r\n    options: {},\r\n\r\n    _create: function() {\r\n      var $context = this.element,\r\n        $target = $context.find('[data-saldo-disponible]'),\r\n        $messageContainer,\r\n        data;\r\n\r\n      if ($target.length) {\r\n        $messageContainer = $context.find('[data-saldo-disponible-container]');\r\n        data = $target.data('saldo-disponible');\r\n\r\n        data.saldo = _.formatNumber(data.saldo);\r\n\r\n        if (this.tipos[data.tipo]) {\r\n          this.tipos[data.tipo]($context, $target, $messageContainer, data);\r\n        }\r\n      }\r\n    },\r\n    tipos: {\r\n      input: function(context, target, messageContainer, data) {\r\n        var onKeyUp = function() {\r\n          if (Globalize.parseFloat(target.val()) > Globalize.parseFloat(data.saldo) && target.val !== '') {\r\n            if (messageContainer.is(':hidden')) {\r\n              messageContainer.css('display', 'block');\r\n            }\r\n          } else {\r\n            if (messageContainer.is(':visible')) {\r\n              messageContainer.css('display', 'none');\r\n            }\r\n          }\r\n        };\r\n        target.on('keyup', onKeyUp);\r\n        onKeyUp();\r\n      },\r\n      inputSlider: function(context, target, messageContainer, data) {\r\n        target.on('change', function() {\r\n          if (parseFloat(target.val()) > Globalize.parseFloat(data.saldo)) {\r\n            if (messageContainer.is(':hidden')) {\r\n              messageContainer.css('display', 'block');\r\n            }\r\n          } else {\r\n            if (messageContainer.is(':visible')) {\r\n              messageContainer.css('display', 'none');\r\n            }\r\n          }\r\n        });\r\n      },\r\n      opcionesDependientes: function(context, target, messageContainer, data) {\r\n        var listaPredictivo = context.find('.c-buscadores-predictivo-liquido .js-list'),\r\n          listaDependientes = context.find('.c-form-opcionesDependientes-liquido ul');\r\n\r\n        listaPredictivo.on('change', 'input:radio', function() {\r\n          if (messageContainer.is(':visible')) {\r\n            messageContainer.css('display', 'none');\r\n          }\r\n        });\r\n\r\n        listaDependientes.on('change', 'input:radio', function() {\r\n          var val = $(this).closest('label').text();\r\n          if (Globalize.parseFloat(val) > Globalize.parseFloat(data.saldo)) {\r\n            if (messageContainer.is(':hidden')) {\r\n              messageContainer.css('display', 'block');\r\n            }\r\n          } else {\r\n            if (messageContainer.is(':visible')) {\r\n              messageContainer.css('display', 'none');\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  /**\r\n   *  B.c_widget_paginador\r\n   */\r\n  $.widget('B.c_widget_paginador', {\r\n    options: {\r\n      current: 0,\r\n      pages: 3,\r\n      pageWidth: 500,\r\n      mostrarFlechas: false\r\n    },\r\n\r\n    _create: function() {\r\n      var liClass = '',\r\n        olCode = '',\r\n        olClass = '',\r\n        self = this,\r\n        i;\r\n      //obtenemos el numero de paginas\r\n      //obtenemos el ancho de las paginas\r\n\r\n      //creamos el codigo\r\n      for (i = 0; i < this.options.pages; i += 1) {\r\n        liClass = '';\r\n        if (i === 0) {\r\n          liClass = ' class=\"first\"';\r\n        } else if (i === this.options.pages - 1) {\r\n          liClass = ' class=\"last\"';\r\n        }\r\n        olCode += '<li' + liClass + '><img src=\"' + $B.staticPath + '/img/widget-pag_R2.png\" alt=\"Ir a pagina ' + (i + 1) + '\" /></li>';\r\n      }\r\n\r\n      //comprobamos las flechas\r\n      if (this.options.mostrarFlechas) {\r\n        olCode = '<li class=\"left\"><img src=\"' + $B.staticPath + '/img/widget-pag_left.png\" alt=\"Anterior\" /></li>' + olCode +\r\n          '<li class=\"right\"><img src=\"' + $B.staticPath + '/img/widget-pag_right.png\" alt=\"Siguiente\" /></li>';\r\n        olClass = ' flechas ';\r\n      }\r\n\r\n      //insertamos el codigo\r\n      this.element.html('<ol class=\"c-widget-paginador' + olClass + '\">' + olCode + '</ol>');\r\n\r\n      //events\r\n      this.element.delegate('li', 'click',\r\n        function(ev) {\r\n          ev.stopPropagation();\r\n          ev.preventDefault();\r\n          //obtenemos el li pulsado\r\n          var i = $('li').index(this);\r\n          if (self.options.mostrarFlechas) {\r\n            i -= 1;\r\n          }\r\n          i = Math.max(0, Math.min(i, self.options.pages - 1));\r\n          $(this).trigger('handlePaginadorClick', i);\r\n        });\r\n\r\n      //actualizamos\r\n      this._update();\r\n    },\r\n\r\n    _update: function() {\r\n      var currentPoint = (this.options.mostrarFlechas) ? this.options.current + 1 : this.options.current;\r\n      this.element.find('ol li').removeClass('activo').eq(currentPoint).addClass('activo');\r\n      if (this.options.mostrarFlechas) {\r\n        this.element.find('li.left, li.right').removeClass('inactivo');\r\n        if (this.options.current === 0) {\r\n          this.element.find('li.left').addClass('inactivo');\r\n        }\r\n        if (this.options.current === this.options.pages - 1) {\r\n          this.element.find('li.right').addClass('inactivo');\r\n        }\r\n      }\r\n    },\r\n\r\n    set: function(current) {\r\n      current = Math.max(0, Math.min(current, this.options.pages - 1));\r\n      if (this.options.current === current) {\r\n        return;\r\n      }\r\n      this.options.current = current;\r\n      this._update();\r\n    }\r\n  });\r\n\r\n\r\n  /**\r\n   *  B.c_widget_datoEditable\r\n   */\r\n  $B_ui.c_widget_datoEditable = function(event, action, message) {\r\n    var triggerEl = $(event.currentTarget),\r\n      element = triggerEl.parents('.js-c-widget-datoEditable');\r\n\r\n    action = action || triggerEl.data('edit-eventid');\r\n\r\n    element.c_widget_datoEditable();\r\n    element.c_widget_datoEditable(action, message);\r\n  };\r\n\r\n  $.widget('B.c_widget_datoEditable', {\r\n    cerrar: function() {\r\n      this.element.find('p:first').show();\r\n      this.element.find('form')\r\n        .removeClass('error')\r\n        .hide()\r\n        .find('.c-mensajes-informativoRefuerzo')\r\n        .hide();\r\n    },\r\n\r\n    editar: function() {\r\n      this.element.find('p:first').hide();\r\n      this.element.find('form')\r\n        .removeClass('error')\r\n        .show()\r\n        .find('.c-mensajes-informativoRefuerzo')\r\n        .hide();\r\n    },\r\n\r\n    error: function(message) {\r\n      if (message === undefined) {\r\n        return;\r\n      }\r\n      this.editar();\r\n      this.element.find('form').addClass('error');\r\n      this.element.find('form .c-mensajes-informativoRefuerzo').show();\r\n      this.element.find('form .c-mensajes-informativoRefuerzo .textoGestionable p').html(message);\r\n    },\r\n\r\n    editando: function() {\r\n      return this.element.find('form').is(':visible');\r\n    },\r\n\r\n    revert: function() {\r\n      var elementoEditable = this.element.find('.js-datoeditable'),\r\n        elementoTag,\r\n        originalData;\r\n      if (elementoEditable) {\r\n        elementoTag = elementoEditable[0].tagName;\r\n        originalData = elementoEditable.data('original-value');\r\n\r\n        if (elementoTag === 'SELECT') {\r\n          elementoEditable.find('option[value=' + originalData + ']').attr('selected', true).change();\r\n        } else {\r\n          elementoEditable.val(originalData);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * @name $B.ui.dependantfields\r\n   * TODO: Documentar su uso\r\n   */\r\n  (function($) {\r\n\r\n    $B_ui.dependantfields = function(ev) {\r\n      var el = $(ev.currentTarget),\r\n        optionSeleccionado = el.find('option:selected');\r\n\r\n      if (optionSeleccionado.size() === 1) {\r\n        optionSeleccionado.DependantFields();\r\n      } else {\r\n        el.DependantFields();\r\n      }\r\n    };\r\n\r\n    function esElementoDeFormulario(selector) {\r\n      var selectorTag = selector.tagName;\r\n      return selectorTag === 'INPUT' || selectorTag === 'SELECT' || selectorTag === 'TEXTAREA';\r\n    }\r\n\r\n    function eliminaClaseDisabled(elemento) {\r\n      $(elemento).removeClass('disabled');\r\n    }\r\n\r\n    function activaElementoFormulario(elemento) {\r\n      elemento.disabled = false;\r\n      eliminaClaseDisabled(elemento);\r\n    }\r\n\r\n    function adecuaEstadoElementosElementos(contenedor, accion) {\r\n      var formElements = contenedor.find('input, select, textarea');\r\n      if (accion === 'activa') {\r\n        formElements.removeClass('disabled').removeAttr('disabled');\r\n        $B_ui.updateCustomElementsStatus(contenedor);\r\n      } else {\r\n        formElements.addClass('disabled').attr('disabled', 'disabled');\r\n        $B_ui.updateCustomElementsStatus(contenedor);\r\n      }\r\n    }\r\n\r\n    function activaElementosAgrupados(elemento) {\r\n      var contenedor = $(elemento);\r\n      eliminaClaseDisabled(contenedor);\r\n      adecuaEstadoElementosElementos(contenedor, 'activa');\r\n    }\r\n\r\n    function anyadeClaseDisabled(elemento) {\r\n      $(elemento).addClass('disabled');\r\n    }\r\n\r\n    function desActivaElementoFormulario(elemento) {\r\n      elemento.disabled = true;\r\n      anyadeClaseDisabled(elemento);\r\n    }\r\n\r\n    function desactivaElementosAgrupados(elemento) {\r\n      var contenedor = $(elemento);\r\n      anyadeClaseDisabled(contenedor);\r\n      adecuaEstadoElementosElementos(contenedor, 'desactiva');\r\n    }\r\n\r\n    var metodos = {\r\n      activaRelacionados: function(selectores) {\r\n        $.each($(selectores), function(i, selector) {\r\n          if (esElementoDeFormulario(selector)) {\r\n            activaElementoFormulario(selector);\r\n          } else {\r\n            activaElementosAgrupados(selector);\r\n          }\r\n        });\r\n      },\r\n      desactivaRelacionados: function(selectores) {\r\n        $.each($(selectores), function(i, selector) {\r\n          if (esElementoDeFormulario(selector)) {\r\n            desActivaElementoFormulario(selector);\r\n          } else {\r\n            desactivaElementosAgrupados(selector);\r\n          }\r\n        });\r\n      },\r\n      actualizaRelacionados: function(pares) {\r\n        if (!pares) {\r\n          return;\r\n        }\r\n        $.each(pares, function(key, value) {\r\n          $(key).val(value);\r\n        });\r\n      }\r\n    };\r\n\r\n    $.fn.DependantFields = function() {\r\n      var data = this.data('dependant-fields');\r\n      if (data) {\r\n        metodos.activaRelacionados(data.activa);\r\n        metodos.desactivaRelacionados(data.desactiva);\r\n        metodos.actualizaRelacionados(data.actualiza);\r\n      }\r\n    };\r\n\r\n    $.fn.selectRange = function(start, end) {\r\n      if (!end) {\r\n        end = start;\r\n      }\r\n      return this.each(function() {\r\n        if (this.setSelectionRange) {\r\n          this.focus();\r\n          this.setSelectionRange(start, end);\r\n        } else if (this.createTextRange) {\r\n          var range = this.createTextRange();\r\n          range.collapse(true);\r\n          range.moveEnd('character', end);\r\n          range.moveStart('character', start);\r\n          range.select();\r\n        }\r\n      });\r\n    };\r\n\r\n    $.fn.getCursorPosition = function() {\r\n      var el = $(this).get(0),\r\n        pos = (!_.isNull(el.selectionStart)) ? el.selectionStart : 0,\r\n        Sel,\r\n        SelLength;\r\n\r\n      if (typeof pos === 'undefined') {\r\n        el.focus();\r\n        Sel = document.selection.createRange();\r\n        SelLength = document.selection.createRange().text.length;\r\n        Sel.moveStart('character', -el.value.length);\r\n        pos = Sel.text.length - SelLength;\r\n      }\r\n      return pos;\r\n    };\r\n\r\n  }($));\r\n\r\n  /* TODO: DOCUMENTAR USO\r\n   * de momento, copio codigo de ejemplo para su uso:\r\n   * <form action=\"\" method=\"POST\" class=\"formulario\" id=\"\">\r\n          <fieldset>\r\n            <legend>Campos dependientes</legend>\r\n            <p>\r\n              <label for=\"tipo\">Tipo Reembolso:</label>\r\n              <span class=\"campo\">\r\n                <select name=\"tipo\" id=\"tipo\" data-component-dependant-fields=\"true\">\r\n                  <option value=\"\">Seleccione un tipo</option>\r\n                  <option value=\"P\" id=\"opcion2\" data-dependant-fields='{\"activa\":\"#importeTotal, #selectImporteTotal\",\"desactiva\":\"#importeParcial, #selectImporteParcial\", \"actualiza\":{\"#importeTotal\":5,\"#importeParcial\":10}}'>Importe total</option>\r\n                  <option value=\"T\" id=\"opcion3\" data-dependant-fields='{\"activa\":\"#importeParcial, #selectImporteParcial\",\"desactiva\":\"#importeTotal, #selectImporteTotal\", \"actualiza\":{\"#importeTotal\":10,\"#importeParcial\":5}}'>Importe parcial</option>\r\n                  <option value=\"P\" id=\"opcion4\" data-dependant-fields='{\"activa\":\"#importeTotal, #selectImporteTotal\",\"desactiva\":\"#contenedorImporteParcial\"}'>Importe total bis</option>\r\n                  <option value=\"P\" id=\"opcion5\" data-dependant-fields='{\"activa\":\"#contenedorImporteParcial\",\"desactiva\":\"#importeTotal, #selectImporteTotal\"}'>Importe total bis</option>\r\n                  <option value=\"X\" id=\"opcion6\" data-dependant-fields='{\"desactiva\":\"#importeTotal, #selectImporteTotal\"}'>Sin activa</option>\r\n                </select>\r\n              </span>\r\n            </p>\r\n            <p>\r\n              <label for=\"importeTotal\">Importe Total:</label>\r\n              <span class=\"campo\">\r\n                <input type=\"text\" id=\"importeTotal\" name=\"importeTotal\" value=\"\" />\r\n              </span>\r\n              <label for=\"selectImporteTotal\">Select Importe Total:</label>\r\n              <span class=\"campo\">\r\n                <select name=\"selectImporteTotal\" id=\"selectImporteTotal\">\r\n                  <option value=\"P\" >asdfads</option>\r\n                </select>\r\n              </span>\r\n            </p>\r\n            <p id=\"contenedorImporteParcial\">\r\n              <label for=\"importeParcial\">Importe Parcial:</label>\r\n              <span class=\"campo\">\r\n                <input type=\"text\" id=\"importeParcial\" name=\"importeParcial\" value=\"\" />\r\n              </span>\r\n              <label for=\"selectImporteParcial\">Select Importe Parcial:</label>\r\n              <span class=\"campo\">\r\n                <select name=\"selectImporteParcial\" id=\"selectImporteParcial\">\r\n                  <option value=\"P\" >asdfads</option>\r\n                </select>\r\n              </span>\r\n            </p>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>Radios dependientes</legend>\r\n\r\n            <p class=\"radios\" data-radios-dependant-fields=\"true\">\r\n              <strong class=\"titulo-componente\">Opciones</strong>\r\n\r\n              <span style=\"display:block;clear:both;\">\r\n                <label for=\"opcionRadio1\">Opcion radio 1</label>\r\n                <span class=\"campo\">\r\n                  <input type=\"radio\" name=\"radios\" id=\"opcionRadio1\" value=\"opcionRadio1\" data-dependant-fields='{\"desactiva\":\"#campoRelacionadoOpcionRadio3\"}' />\r\n                </span>\r\n              </span>\r\n              <span style=\"display:block;clear:both;\">\r\n                <label for=\"opcionRadio2\">Opcion radio 2</label>\r\n                <span class=\"campo\">\r\n                  <input type=\"radio\" name=\"radios\" id=\"opcionRadio2\" value=\"opcionRadio2\" data-dependant-fields='{\"desactiva\":\"#campoRelacionadoOpcionRadio3\"}' />\r\n                </span>\r\n              </span>\r\n              <span class=\"campos-compuestos\">\r\n                <span style=\"display:block;clear:both;\">\r\n                  <label for=\"opcionRadio3\">Opcion radio 2</label>\r\n                  <span class=\"campo\">\r\n                    <input type=\"radio\" name=\"radios\" id=\"opcionRadio3\" value=\"opcionRadio3\" data-dependant-fields='{\"activa\":\"#campoRelacionadoOpcionRadio3\"}' />\r\n                  </span>\r\n                  <span class=\"descripcion-error\"></span>\r\n                </span>\r\n                <span style=\"display:block;clear:both;\" class=\"campo-relacionado\">\r\n                  <label for=\"campoRelacionadoOpcionRadio3\" class=\"indentado\">campoRelacionadoOpcionRadio3</label>\r\n                  <span class=\"campo\">\r\n                    <input type=\"text\" name=\"campoRelacionadoOpcionRadio3\" id=\"campoRelacionadoOpcionRadio3\" value=\"campoRelacionadoOpcionRadio3\" />\r\n                  </span>\r\n                </span>\r\n              </span>\r\n            </p>\r\n\r\n          </fieldset>\r\n        </form>\r\n\r\n   */\r\n\r\n  /** PLUGINS DE IMPRESION *********************************************/\r\n\r\n  /*\r\n  * @name $B.ui.printSection\r\n  * @desc Imprime la seccion determinada por un selector\r\n  * ejemplo: <button data-print='.tabla-movimientos'>Imprimir tabla</button>\r\n  * En mvc.js\r\n  *  events: {\r\n        'click [data-ptint]': 'imprimirSeccion'\r\n    },\r\n    imprimirSeccion: function (ev) {\r\n        $B_ui.printSection(ev);\r\n    }\r\n  */\r\n  // @TODO optimizar y refactorizar selectores y el frame\r\n  $B_ui.printSection = function(ev) {\r\n    if ($('#print_frame')) {\r\n      $('#print_frame').remove();\r\n    }\r\n    $('body').append('<iframe name=\"print_frame\" id=\"print_frame\" width=\"880\" height=\"0\" frameborder=\"0\" src=\"javascript:false\"></iframe>');\r\n    ev.preventDefault();\r\n\r\n    var objToprint = $(ev.currentTarget).data('print'),\r\n      $printFrame = $('#print_frame'),\r\n      printContent = $(objToprint).clone(false),\r\n      staticRegex = new RegExp($B.staticPath.replace('/', '\\\\/') + '\\\\/img\\\\/', 'gi'),\r\n      printContentHtml = printContent.html().replace(staticRegex, window.location.protocol + '//' + window.location.host + $B.staticPath + '/img/'),\r\n\r\n      makePrint = function() {\r\n        var frame = window.frames.print_frame.document,\r\n          _printFrame = $('#print_frame'),\r\n          defaultPrintStyleSheet = window.location.protocol + '//' + window.location.host + $B.staticPath + '/css/impresion.css?' + $B.version,\r\n          //frameHead = frame.head,\r\n          frameBody = frame.body;\r\n\r\n        $.get(defaultPrintStyleSheet, function(data) {\r\n          // estilos de impresion\r\n          //$(frameHead).html(\"<link rel='stylesheet' href='\" + defaultPrintStyleSheet + \"' type='text/css' />\");\r\n\r\n          // insertamos el contenido para imprimir\r\n          var printDom = '<style type=\"text/css\">' + data + '</style><div id=\"printContent\">' + printContentHtml + '</div>',\r\n            timeForRender = (_.isLegacyIE() ? 1000 : 100);\r\n\r\n          $.when($(frameBody).append(printDom)).then(function() {\r\n            setTimeout(function() {\r\n              // focus al frame\r\n              window.frames.print_frame.window.focus();\r\n\r\n              // imprimo\r\n              window.frames.print_frame.window.print();\r\n\r\n              // remove frame\r\n              _printFrame.remove();\r\n            }, timeForRender);\r\n          });\r\n        });\r\n      };\r\n\r\n    $printFrame.on('load.printFrame', makePrint);\r\n    $printFrame.attr('src', 'about:blank');\r\n  };\r\n\r\n\r\n  /**\r\n   * $B_ui.FilterGraphicChartsV2\r\n\r\n   * @param [array] chartData [\r\n   *        {object}: {\r\n   *        \"base\":                   // JSON with common parameters for all charts (if no parameters common to all graphs, 'base' have to be an empty object '{}'). MANDATORY\r\n   *        \"variations\":             // ARRAY with one or more JSON with specific parameters for individual charts. MANDATORY\r\n   *\r\n   *        }\r\n   * @example [...]\r\n   ]\r\n   */\r\n  $B_ui.FilterGraphicChartsV2 = (function() {\r\n    var getDefaults = function() {\r\n        return {};\r\n      },\r\n\r\n      graphic = false,\r\n      charts = {\r\n        buildChart: function(chartData) {\r\n          if (chartData.series[0].type) {\r\n            var type = chartData.series[0].type;\r\n            if (type === 'bar') {\r\n              graphic = $B_ui.GraphicCharts.barChart(chartData);\r\n            } else if (type === 'area') {\r\n              graphic = $B_ui.GraphicCharts.areaChart(chartData);\r\n            } else {\r\n              graphic = $B_ui.GraphicCharts.defaultChart(chartData);\r\n            }\r\n          } else {\r\n            graphic = $B_ui.GraphicCharts.pieChart(chartData);\r\n          }\r\n          return graphic;\r\n        },\r\n\r\n        destroyChart: function() {\r\n          if (graphic) {\r\n            graphic.destroyChart();\r\n          }\r\n        },\r\n\r\n        createChartData: function(base, variation) {\r\n          return $.extend(true, {}, base, variation);\r\n        },\r\n\r\n        filteredOption: function(combo) {\r\n          return combo.find(':selected').val();\r\n        },\r\n\r\n        filterDataByInterval: function(numbers, interval) {\r\n          return _.last(numbers, interval);\r\n        },\r\n\r\n        getId: function(data) {\r\n          var comma = '',\r\n            idList = '';\r\n          $.each(data.variations, function(index1, variationList) {\r\n            $.each(variationList, function(index, variation) {\r\n              idList += comma + variation[0].types[0].renderAt;\r\n              if (index === 0) {\r\n                comma = ',';\r\n              }\r\n            });\r\n          });\r\n          return idList;\r\n        },\r\n\r\n        proccessChartData: function(data, filterProduct, filterInterval, filterType) {\r\n          var selectedProduct = charts.filteredOption(filterProduct),\r\n            selectedInterval,\r\n            selectedVariation = null,\r\n            graphicData;\r\n\r\n          // VERIFY HERE THAT REQUESTED GRAPHIC EXISTS! IF NOT, SAVE THE MODEL AND BRING IT BACK WITH THE GRAPHIC\r\n          $.each(data.variations, function(index1, variationList) {\r\n            $.each(variationList, function(index, variation) {\r\n              selectedVariation = variation[0].types[0];\r\n\r\n              graphicData = charts.createChartData(data.base, selectedVariation);\r\n\r\n              selectedInterval = (filterInterval) ? charts.filteredOption(filterInterval) : graphicData.series[0].numbers.length;\r\n\r\n              if (selectedVariation !== null) {\r\n                if (graphicData.xAxis) {\r\n                  graphicData.xAxis = charts.filterDataByInterval(graphicData.xAxis, selectedInterval);\r\n                  $.each(graphicData.series, function(_index, serie) {\r\n                    serie.numbers = charts.filterDataByInterval(serie.numbers, selectedInterval);\r\n                  });\r\n                }\r\n                charts.buildChart(graphicData);\r\n              } else {\r\n                $('#' + graphicData.renderAt).append('<p style=\"color:#ff0000;\">No se ha podido cargar el grafico \"' + selectedProduct + '\"</p>');\r\n              }\r\n            });\r\n          });\r\n        },\r\n\r\n        filterFamilies: function(filterFamily, filterProduct) {\r\n          var idFamily = filterFamily.find(':selected').eq(0).val(),\r\n            filterFamilyOptions = filterProduct.find('option').attr('selected', false),\r\n            productFamily;\r\n\r\n          if (idFamily === '0') {\r\n            filterFamilyOptions.show();\r\n          } else {\r\n            filterFamilyOptions.each(function() {\r\n              productFamily = $(this).attr('data-family');\r\n              if (productFamily === '0') {\r\n                $(this).attr('selected', true).val(idFamily + ',0');\r\n              }\r\n              if (productFamily === idFamily) {\r\n                $(this).show();\r\n              } else {\r\n                $(this).hide();\r\n              }\r\n            });\r\n          }\r\n          filterProduct.trigger('change');\r\n        },\r\n\r\n        createFilter: function(data) {\r\n          var graphicId = charts.getId(data),\r\n            filterArea = $('[data-graphic=\"' + graphicId + '\"]').eq(0),\r\n            filterCombos = filterArea.find('select[data-graphic-interval], select[data-graphic-family], select[data-graphic-type]'),\r\n            filterFamily = filterArea.find('select[data-graphic-family]').eq(0),\r\n            filterProduct = filterArea.find('select[data-graphic-product]').eq(0),\r\n            filterType = (filterArea.find('select[data-graphic-type]').length > 0) ? filterArea.find('select[data-graphic-type]').eq(0) : false,\r\n            filterInterval = (filterArea.find('select[data-graphic-interval]').length > 0) ? filterArea.find('select[data-graphic-interval]').eq(0) : false;\r\n\r\n          charts.proccessChartData(data, filterProduct, filterInterval, filterType);\r\n          filterCombos.bind('change', function() {\r\n            charts.destroyChart();\r\n            if ($(this).attr('data-graphic-family') !== undefined) {\r\n              charts.filterFamilies(filterFamily, filterProduct);\r\n            } else {\r\n              if (!$(this).attr('data-graphic-interval') && $(this).closest('.c-producto-grafica').find('.c-mensajes-alerta_R2').length === 0) {\r\n                charts.proccessChartData(data, filterProduct, filterInterval, filterType);\r\n              }\r\n\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n    return {\r\n      start: function(data) {\r\n        charts.createFilter(data, false);\r\n      },\r\n      startAjax: function(data) {\r\n        charts.createFilter(data, true);\r\n      }\r\n    };\r\n  }());\r\n\r\n\r\n  /*\\\r\n   * toggleMenu\r\n   * Funcion que cambia las clases li.activo de un menu en funcion del elemento pulsado\r\n  \\*/\r\n  $B_ui.toggleMenu = function(ev) {\r\n    var item = $(ev.currentTarget).closest('li'),\r\n      menu = item.closest('ul');\r\n    if (menu.length) {\r\n      menu.find('li.activo').removeClass('activo');\r\n      item.addClass('activo');\r\n    }\r\n  };\r\n\r\n  /*\\\r\n   * loadViewIntoTmpl\r\n   * Funcion que carga un tmpl que recubre una vista. Para ello pegamos el tmpl en el DOM y pegamos la vista dentro del tmpl\r\n   * Esta funcion debe ser usada en area personal y recibos\r\n   | Uso:\r\n   |  $B_ui.loadViewIntoTmpl({\r\n   |    url: '/tmpl/recibos.domiciliados.menu.tmpl.html',\r\n   |    selector: '#contenido',\r\n   |    tmpl: '#tmpl_recibos_domiciliados_menu',\r\n   |    viewId: '#view_recibos_domiciliados'\r\n   |   }, {});\r\n  \\*/\r\n  $B_ui.loadViewIntoTmpl = function(tmpl, model) {\r\n    //comprobamos si ya ha sido cargado previamente\r\n    if (!$(tmpl.selector).find(tmpl.selector2).length) {\r\n      //obtenemos el tmpl\r\n      require(['text!' + $B.staticPath + tmpl.url], function(content) {\r\n        //obtenemos la vista\r\n        var view = $(tmpl.viewId).clone(true);\r\n        //guardamos el tmpl en el body y lo renderizamos\r\n        $body.append(content);\r\n        $(tmpl.selector).html(_.tmpl(tmpl.tmpl, model));\r\n        //pegamos la vista\r\n        $(tmpl.selector).find('[data-silent-container]').html(view);\r\n        $B_ui.c_buscadores_predictivoLiquido($body.find('.c-buscadores-predictivo-liquido'));\r\n        $('.c-encabezado-seccion').after($('[autoload-sabiasque]').html());\r\n        $('[autoload-sabiasque]').html('');\r\n      });\r\n    }\r\n  };\r\n\r\n  /*\\\r\n   * validateNextTooltip\r\n   [ method ]\r\n   > Parametros\r\n   - state (boolean) habilitar, deshabilitar el tooltip en el boton\r\n   - button (jQuery Object) objeto jQuery del boton\r\n   - message (string) #optional template del mensaje por defecto es _.c_v05_mensajes_informativoTooltip()\r\n   * Para pasar un mensaje personalizado se explica mas abajo\r\n   > Uso en el MVC\r\n   | $B_ui.validateNextTooltip([true/false], objeto_del_boton, template_de_mensaje);\r\n  \\*/\r\n\r\n  /*\r\n  Para personalizar el mensaje hay que incluir en su template lo siguiente:\r\n  ** TEMPLATE **\r\n  <script id=\"mensaje_validacion\" type=\"text/template\">\r\n  _.c_v05_mensajes_informativoTooltip({ message: '##mensaje.personalizado.e.internacionalizado##'})\r\n  </script>\r\n\r\n  De esta forma el mensaje sera internacionalizado como todos los otros textos\r\n\r\n  Y cuando llamemos a la funcion desde nuestro MVC.JS hay que hacer lo siguiente:\r\n  ** MVC **\r\n  var mensaje = $('#mensaje_validacion');\r\n  $B_ui.validateNextTooltip(state, button, mensaje);\r\n  */\r\n  $B_ui.validateNextTooltip = function(state, button, message, buttonCenter) {\r\n    button = button || $('.c-botones-paginadorInferior .siguiente:not(#boton_aceptar)');\r\n    var infoTooltip = $(((message && _.template(message.html(), {})) || _.c_v05_mensajes_informativoTooltip())),\r\n      infoTooltipMsg = infoTooltip.find('.message').text(),\r\n      offset = button.offset();\r\n\r\n    if (state) {\r\n\r\n      /*\r\n\r\n      // Don't know what this was here for :(\r\n      // Do not delete for now.\r\n      -----------------------------------------------------------\r\n\r\n      if (button.data('linkedTooltipMsg') === infoTooltipMsg) {\r\n        return;\r\n      }\r\n\r\n      */\r\n\r\n\r\n      button\r\n        .data('linkedTooltip', infoTooltip)\r\n        .data('linkedTooltipMsg', infoTooltipMsg);\r\n      infoTooltip\r\n        .appendTo('#contenido')\r\n        .hide();\r\n\r\n      button.addClass('inactivoValidacion').click(function() {\r\n        offset = button.offset();\r\n        var offsetTotalLeft = offset.left - 360,\r\n          offsetTotalTop = offset.top - 12;\r\n        if (buttonCenter) {\r\n          offsetTotalLeft = offset.left - 290;\r\n          offsetTotalTop = offset.top - 30;\r\n        }\r\n        infoTooltip.css({\r\n          'z-index': 999999,\r\n          top: offsetTotalTop,\r\n          left: offsetTotalLeft\r\n        }).show();\r\n      }).mouseleave(function() {\r\n        infoTooltip.hide();\r\n      });\r\n    } else {\r\n      if (button.data('linkedTooltip')) {\r\n        button.data('linkedTooltip').remove();\r\n        button.data('linkedTooltipMsg', null);\r\n      }\r\n      button.removeClass('inactivoValidacion').off('click');\r\n    }\r\n  };\r\n\r\n  $B_ui.navigateCatalog = function(ev, numProductos, tipoAsesoramiento) {\r\n    var $target = $(ev.currentTarget),\r\n      $siblings = $target.siblings(),\r\n      $parent = $target.closest('.grid_24'),\r\n      $parentIframe = ($parent.find('.tab-group-iframe').length) ? $parent.find('.tab-group-iframe').first() : $parent,\r\n      $grid16 = $parent.find('.grid_16'),\r\n      $grid8 = $parent.find('.grid_8'),\r\n      $carteraVirtual = $('#carteraVirtual'),\r\n      $iFrameCatalogo = $('#catalogoProductos'),\r\n      $botonesAccion = $('.contenedorListas').find('.c-listas-acciones'),\r\n      $iframe = $('<iframe />'),\r\n      $asesoramiento = $('div#autoloadAsesoramientoEnSubhome'),\r\n      $buscadorMovimientos = $('div#autoloadBuscadorMovimientos'),\r\n      autoloadModificadoPorUrl = false,\r\n      alturaContenido,\r\n      src,\r\n      mapaCatalogo = 1,\r\n      idSeccion,\r\n      urlAsesoramiento = 'asesoramiento',\r\n      productoSeleccionado = $target.attr('data-producto-buscador'),\r\n      tipoBuscador = $target.attr('data-tipo-buscador'),\r\n      etiquetaSeleccionada = $target.attr('data-etiqueta-buscador');\r\n    if ($B.appConfig.menurizacionArbol) {\r\n      src = $B.router.appView.navView.publicNavigationGetOpcionMenu().catalogUrl;\r\n    } else {\r\n      src = '/sistema/catalogo.jsp?mb=si';\r\n    }\r\n\r\n    if (!_.isEmpty(tipoAsesoramiento) && (tipoAsesoramiento !== 'catalogo')) {\r\n      if (tipoAsesoramiento === 'perfilado') {\r\n        urlAsesoramiento = 'asesoramiento/ira/perfilado/DEPPOFONDO/restaurar';\r\n      } else {\r\n        urlAsesoramiento = tipoAsesoramiento.replace(/---/g, '/');\r\n      }\r\n      autoloadModificadoPorUrl = true;\r\n    }\r\n\r\n    $B.bridge.on('resize:publica', function(data) {\r\n      $('#catalogoProductos').height(data.height);\r\n    });\r\n\r\n    $B.bridge.on('maxHeight:publica', function(data) {\r\n      $('#catalogoProductos').height(data.height);\r\n    });\r\n\r\n    $B.bridge.on('navigate:privada', function(data) {\r\n      $B.app.AppView.prototype.executeNavigation(data.url);\r\n    });\r\n\r\n    $B.bridge.on('loadingTop:show', function(data) {\r\n      //$B.ui.navigationLoading.show({loadingClass: 'cargandoAsesoramiento', overlayClass: 'loading-message-overlay-class', text: '', overlayZIndex: 100});\r\n      $B.ui.loading.add({\r\n        parent: $('#subhome-ahorro-inversion-contratar-content'),\r\n        loadingClass: 'cargandoAsesoramiento',\r\n        text: '',\r\n        forceLoading: true\r\n      });\r\n    });\r\n\r\n    $B.bridge.on('loadingTop:hide', function() {\r\n      //$B.ui.navigationLoading.hide({});\r\n      $B.ui.loading.remove({\r\n        parent: $('#subhome-ahorro-inversion-contratar-content'),\r\n        loadingClass: 'cargandoAsesoramiento'\r\n      });\r\n    });\r\n\r\n    $B.bridge.on('scroll:top', function() {\r\n      var $catalogoProductos = $('#catalogoProductos'),\r\n        $idIframeCentral = $catalogoProductos.contents().find('#idIframeCentral'),\r\n        $ofertaComercial = $idIframeCentral.contents().find('.c-encabezado-ofertaComercial'),\r\n        catalogoProductosOffset = 0,\r\n        idIframeCentralOffset = 0,\r\n        ofertaComercialOffset = 0;\r\n\r\n      if ($catalogoProductos.length !== 0) {\r\n        catalogoProductosOffset = $catalogoProductos.offset().top;\r\n      }\r\n      if ($idIframeCentral.length !== 0) {\r\n        idIframeCentralOffset = $idIframeCentral.offset().top;\r\n      }\r\n      if ($ofertaComercial.length !== 0) {\r\n        ofertaComercialOffset = $ofertaComercial.offset().top;\r\n      }\r\n      $('html,body').animate({\r\n        scrollTop: catalogoProductosOffset +\r\n          idIframeCentralOffset +\r\n          ofertaComercialOffset\r\n      });\r\n    });\r\n\r\n    ev.stopPropagation();\r\n\r\n    if (_.isNull(numProductos) || _.isUndefined(numProductos)) {\r\n      numProductos = 1;\r\n    }\r\n\r\n    if ($B.tipoSegmento === 'PARTICULARES') {\r\n      src = $B.router.appView.navView.publicNavigationGetOpcionMenu().catalogUrl;\r\n    } else if ($B.tipoSegmento === 'BANCA_PERSONAL') {\r\n      mapaCatalogo = 2;\r\n    } else if ($B.tipoSegmento === 'BANCA_PRIVADA') {\r\n      mapaCatalogo = 3;\r\n    }\r\n\r\n    $B.setCookie('ordenMapa', mapaCatalogo, 31536000000);\r\n\r\n    idSeccion = $B.router.appView.navView.publicNavigationGetOpcionMenu().id;\r\n\r\n    if (!$target.hasClass('activo')) {\r\n\r\n      window.router.appView.BreadcrumbView.updateBreadcrumbURL($target);\r\n\r\n      if ($target.data('tab') === 0 && (numProductos !== 0 || $B.tieneSegurosUnnim)) {\r\n        $iFrameCatalogo.addClass('hidden');\r\n        $grid16.removeClass('hidden');\r\n        $grid8.removeClass('hidden');\r\n        $botonesAccion.removeClass('hidden');\r\n        $buscadorMovimientos.addClass('hidden');\r\n        $asesoramiento.addClass('hidden');\r\n\r\n      } else if ($target.data('tab') === 1 || numProductos === 0 || ($B.tieneSegurosUnnim && $target.data('tab') !== 2)) {\r\n        $grid16.addClass('hidden');\r\n        $grid8.addClass('hidden');\r\n        $botonesAccion.addClass('hidden');\r\n        $buscadorMovimientos.addClass('hidden');\r\n\r\n        if (idSeccion === 'ahorroeinversion') {\r\n          if ($asesoramiento.length) {\r\n            $asesoramiento.removeClass('hidden');\r\n            $asesoramiento.show();\r\n          } else {\r\n            $('<div id=\"autoloadAsesoramientoEnSubhome\" />').attr('data-autoload', urlAsesoramiento).prependTo($parentIframe);\r\n            $B.app.AppView.prototype.checkAutoloads($target.closest('[id^=view]'));\r\n          }\r\n        }\r\n        if ($carteraVirtual.length) {\r\n          $carteraVirtual.hide();\r\n        }\r\n        if (!autoloadModificadoPorUrl) {\r\n          if ($iFrameCatalogo.length) {\r\n            $iFrameCatalogo.removeClass('hidden');\r\n            $iFrameCatalogo.show();\r\n          } else {\r\n            $iframe.attr('frameborder', '0');\r\n            $iframe.attr('scrolling', 'no');\r\n            $iframe.attr('id', 'catalogoProductos');\r\n            $iframe.attr('src', src);\r\n            $iframe.addClass('grid_24 plus');\r\n            $iframe.appendTo($parentIframe);\r\n          }\r\n        }\r\n      } else if ($target.data('tab') === 2) {\r\n        $grid16.addClass('hidden');\r\n        $grid8.addClass('hidden');\r\n        $botonesAccion.addClass('hidden');\r\n        $iFrameCatalogo.addClass('hidden');\r\n\r\n        if ($buscadorMovimientos.length === 0) {\r\n          $parent.append(_.tmpl($('#tmpl_subhome-cuentas-tarjetas_autoloadBuscadorMovimientos'), {\r\n            productoSeleccionado: productoSeleccionado,\r\n            etiquetaSeleccionada: etiquetaSeleccionada,\r\n            tipoBuscador: tipoBuscador\r\n          }));\r\n          $B.app.AppView.prototype.checkAutoloads($parent.find('#autoloadBuscadorMovimientos'));\r\n        } else {\r\n          $buscadorMovimientos.removeClass('hidden');\r\n        }\r\n      }\r\n      $target.toggleClass('activo');\r\n      $siblings.removeClass('activo');\r\n    }\r\n  };\r\n\r\n  $B_ui.markInputWithError = function(input, messageContainer, state) {\r\n    if (!input || !messageContainer || state === null) {\r\n      return;\r\n    }\r\n    var tooltip,\r\n      offset,\r\n      left,\r\n      ul = $('<ul>'),\r\n      li,\r\n      message,\r\n      messageId = messageContainer.attr('id');\r\n\r\n    if (state === true) {\r\n      message = messageContainer.html() || '';\r\n      tooltip = _.c_v06_mensajes_errorValidacion({\r\n        inputName: input.attr('name'),\r\n        message: message\r\n      });\r\n      tooltip = $(tooltip);\r\n      li = $('<li>').append(tooltip);\r\n      if ($('#mainValidationSummaryWrapper').find('ul').length) {\r\n        $('#mainValidationSummaryWrapper ul').append(li);\r\n      } else {\r\n        ul.append(li);\r\n        $('#mainValidationSummaryWrapper').append(ul);\r\n      }\r\n      li.css('z-index', '999999996');\r\n      tooltip = li.find('.errorValidacion');\r\n      offset = input.offset();\r\n      li.css({\r\n        top: offset.top,\r\n        left: offset.left,\r\n        position: 'absolute'\r\n      });\r\n      if (input.outerWidth() > 250) { // if not small input\r\n        tooltip.css({\r\n          width: input.outerWidth()\r\n        });\r\n      } else { // if small input\r\n        left = -135 + input.outerWidth() / 2;\r\n        tooltip.css({\r\n          left: left\r\n        });\r\n      }\r\n      input\r\n        .addClass('error')\r\n        .hover(function() {\r\n          tooltip.show();\r\n        }, function() {\r\n          tooltip.hide();\r\n        })\r\n        .mouseout(function() {\r\n          tooltip.hide();\r\n        })\r\n        .data('validationMsgId', messageId)\r\n        .data('validationMsg', li);\r\n    } else if (state === false) {\r\n      if (!input.data('validationMsgId') || messageId !== input.data('validationMsgId')) {\r\n        return;\r\n      }\r\n      input\r\n        .removeClass('error')\r\n        .off('hover')\r\n        .data('validationMsg').remove();\r\n\r\n      // $('#' + input.data('validationMsgId')).remove()\r\n      return;\r\n    }\r\n  };\r\n\r\n  $B_ui.getOverlayerProperties = function(layer) {\r\n    if (layer instanceof jQuery && layer.length) {\r\n      return {\r\n        position: 'absolute',\r\n        top: '0',\r\n        left: '0',\r\n        zIndex: '9999',\r\n        width: '100%',\r\n        height: layer.height()\r\n      };\r\n    }\r\n    return {};\r\n  };\r\n\r\n\r\n  /**\r\n   * $B_ui.loading\r\n\r\n * @param {object} {\r\n *        \"parent\":         // Loading message parent element. MANDATORY\r\n *        \"loadingClass\":   // Class added to parent element while showing loading message. Defaults to 'loading-parent'. OPTIONAL\r\n *        \"text\":           // Text for loading message. Defaults to null. OPTIONAL\r\n *        \"autoStyle\":      // Message gets automatic style. Values: 'true' or 'false'. Defaults to 'false' OPTIONAL\r\n *        }\r\n *\r\n   * @example $B_ui.loading.add({parent: $(parent-element), loadingClass: 'loading-class', text: 'loading message text', autoStyle: true||false})\r\n *\r\n   * @example $B_ui.loading.remove({parent: $(parent-element), loadingClass: 'loading-class'})\r\n }\r\n */\r\n  $B_ui.loading = (function() {\r\n    var loadingDefaults = {\r\n        loadingClass: 'loading-parent',\r\n        text: null,\r\n        autoStyle: true,\r\n        forceLoading: false,\r\n        callback: null,\r\n        zIndex: 9999\r\n      },\r\n      loading = {\r\n        getDefaults: function(loadingData) {\r\n          return $.extend({}, loadingDefaults, loadingData);\r\n        },\r\n        setStyle: function(elLoadingMessage, data) {\r\n          var measures = loading.getMeasures(elLoadingMessage),\r\n            imageOffset = measures.imageOffset,\r\n            margin = 0;\r\n\r\n          if (measures.imageOffsetInModal) {\r\n            imageOffset = measures.imageOffsetInModal;\r\n          }\r\n\r\n          if (measures.correcionMargin) {\r\n            margin = measures.correcionMargin;\r\n            elLoadingMessage.css({\r\n              width: measures.width\r\n            });\r\n          }\r\n\r\n          elLoadingMessage.css({\r\n            height: (measures.messageHeight - imageOffset),\r\n            paddingTop: imageOffset,\r\n            zIndex: data.zindex,\r\n            position: 'absolute',\r\n            marginLeft: margin,\r\n            marginRight: margin,\r\n            top: 0,\r\n            left: 0\r\n          }).show();\r\n        },\r\n        getMeasures: function(elLoadingMessage) {\r\n          var measures = {\r\n              messageHeight: elLoadingMessage.parent().height(),\r\n              imageHeight: elLoadingMessage.find('img').height()\r\n            },\r\n            wideContainer = elLoadingMessage.closest('.container_12');\r\n\r\n          if (wideContainer.length && wideContainer.siblings('#IPOcontratacion_productos').length) {\r\n            measures.width = wideContainer.outerWidth(true);\r\n            measures.correcionMargin = Math.floor((measures.width - wideContainer.width()) / -2);\r\n          }\r\n\r\n          measures.imageOffset = Math.floor((measures.messageHeight - measures.imageHeight) / 2);\r\n\r\n          if (elLoadingMessage.closest('.overviewModal').length) {\r\n            measures.imageOffsetInModal = Math.floor((elLoadingMessage.closest('.overviewModal').height() - measures.imageHeight) / 2);\r\n          }\r\n\r\n          return measures;\r\n        }\r\n      };\r\n\r\n    return {\r\n      add: function(loadingData) {\r\n        var elLoadingMessage,\r\n          data = loading.getDefaults(loadingData),\r\n          $loadingContainer,\r\n          loadingContainerPositionType,\r\n          alreadyHasLoading,\r\n          idLoading;\r\n\r\n        //cde\r\n        if (data.parent === false) {\r\n          return;\r\n        }\r\n\r\n        alreadyHasLoading = (data.parent !== false && !data.parent.is('[data-sliced-tmpl]')) ? data.parent.find('.c-mensajes-cargando').length : 0;\r\n        data.parent.addClass(data.loadingClass);\r\n\r\n        if (!alreadyHasLoading || data.forceLoading) {\r\n          if (data.parent.find('#contenedor_asistente_contratacion_productos').length) {\r\n            $loadingContainer = data.parent.find('#contenedor_asistente_contratacion_productos');\r\n          } else if (data.parent.is('#subhome-ahorro-inversion-contratar-content')) {\r\n            $loadingContainer = data.parent;\r\n          } else if (data.parent.find('.contenedorAsistente').length) {\r\n            $loadingContainer = data.parent.find('.contenedorAsistente');\r\n          } else if (data.parent.find('.c-widget-indicadorProgresoOperativa').length) {\r\n            //$loadingContainer = data.parent.find('.c-widget-indicadorProgresoOperativa').next();\r\n            $loadingContainer = data.parent.find('.c-widget-indicadorProgresoOperativa').nextAll('div').first();\r\n          } else {\r\n            $loadingContainer = data.parent;\r\n          }\r\n        } else {\r\n          return;\r\n        }\r\n        loadingContainerPositionType = $loadingContainer.css('position');\r\n        $loadingContainer\r\n          .data('originalPositionType', loadingContainerPositionType)\r\n          .addClass('js_loadingContainer')\r\n          .css('position', 'relative');\r\n\r\n        if ($loadingContainer.children('.c-mensajes-cargando').length) {\r\n          elLoadingMessage = $loadingContainer.children('.c-mensajes-cargando');\r\n        } else {\r\n          if (data.loadingVisorPdf) {\r\n            elLoadingMessage = $(_.c_v06_mensajes_cargando({\r\n              text: $B.app.literals.cargando,\r\n              image: 'preload_general_mini.gif'\r\n            })).appendTo($loadingContainer).hide();\r\n          } else {\r\n            elLoadingMessage = $(_.c_v06_mensajes_cargando({\r\n              text: data.text\r\n            })).appendTo($loadingContainer).hide();\r\n          }\r\n\r\n        }\r\n        if (elLoadingMessage.attr('id')) {\r\n          idLoading = elLoadingMessage.attr('id');\r\n        } else {\r\n          idLoading = $B.utils.aria.loading(data.parent, 'active');\r\n        }\r\n        idLoading = $B.utils.aria.loading(data.parent, 'active');\r\n        elLoadingMessage.attr('id', idLoading);\r\n\r\n        if (data.autoStyle) {\r\n          loading.setStyle(elLoadingMessage, data);\r\n        }\r\n        if (_.isFunction(data.callback)) {\r\n          data.callback();\r\n        }\r\n      },\r\n      remove: function(loadingData) {\r\n        var data = loading.getDefaults(loadingData),\r\n          elLoadingMessage = data.parent.find('.c-mensajes-cargando'),\r\n          originalParent = (elLoadingMessage.length) ? elLoadingMessage.closest('[aria-busy=\"true\"]') : data.parent,\r\n          $loadingContainer = data.parent,\r\n          originalPositionType = $loadingContainer.data('originalPositionType') || 'static';\r\n\r\n        function removeLoadings(_data, wrapper) {\r\n          var $item;\r\n          if (_.has(_data, 'excludeLoadings')) {\r\n            wrapper.each(function(item) {\r\n              $item = $(item);\r\n              if ($item.closest(_data.excludeLoadings).lenght === 0) {\r\n                $item.remove();\r\n              }\r\n            });\r\n          } else {\r\n            wrapper.remove();\r\n          }\r\n        }\r\n\r\n        originalParent.removeClass(data.loadingClass);\r\n\r\n        // change aria status\r\n        $B.utils.aria.loading(originalParent, 'inactive');\r\n\r\n        // remove every loading msg (sometime there are more than one don't know why)\r\n        removeLoadings(data, elLoadingMessage);\r\n\r\n\r\n        $loadingContainer.css('position', originalPositionType);\r\n      }\r\n    };\r\n\r\n  }());\r\n\r\n\r\n  /**\r\n   * $B_ui.navigationLoading\r\n\r\n * @param {object} {\r\n *        \"loadingClass\":   // Class added to loading element while showing loading message. Defaults to 'loading-navigation'. OPTIONAL\r\n *        \"overlayClass\":   // Class added to overlay element while showing loading message. Defaults to 'ui-widget-overlay-mensaje-cargando'. OPTIONAL\r\n *        \"text\":           // Text for loading message. Defaults to null. OPTIONAL, ONLY FOR show METHOD\r\n OPTIONAL\r\n *        \"overlayZIndex\":  // Overlay z-index css property value. Defaults to 100000 OPTIONAL, ONLY FOR show METHOD\r\n *        }\r\n *\r\n   * @example $B_ui.navigationLoading.show({loadingClass: 'loading-message-additional-class', overlayClass: 'loading-message-overlay-class', text: 'loading message text', overlayZIndex: 100})\r\n *\r\n   * @example $B_ui.navigationLoading.hide({loadingClass: 'loading-message-additional-class', overlayClass: 'loading-message-overlay-class'})\r\n }\r\n */\r\n  $B_ui.navigationLoading = (function() {\r\n    var defaultOptions = {\r\n        loadingClass: 'loading-navigation',\r\n        overlayClass: 'ui-widget-overlay-mensaje-cargando',\r\n        overlayZIndex: 100000,\r\n        text: null\r\n      },\r\n      $bfirst = $body.first(),\r\n      $loading,\r\n      getDefaults = function(data) {\r\n        return $.extend(true, {}, defaultOptions, data);\r\n      },\r\n      options,\r\n      styleLoading = function($item) {\r\n        var imgWidth = $item.find('.icoCargando img').width(),\r\n          loadingWidth = $item.width();\r\n        $item.css({\r\n          position: 'fixed',\r\n          background: $item.css('background-color') || 'transparent',\r\n          width: (imgWidth > loadingWidth) ? imgWidth : loadingWidth,\r\n          zIndex: options.overlayZIndex + 1\r\n        });\r\n\r\n        $('.' + options.overlayClass).css({\r\n          width: '100%',\r\n          height: '100%',\r\n          zIndex: options.overlayZIndex\r\n        });\r\n      },\r\n      centerLoading = function($item) {\r\n        if (!_.isNull($item) && !_.isUndefined($item)) {\r\n          $item.css({\r\n            top: (($(window).height() - $item.outerHeight()) / 2),\r\n            left: (($(window).width() - $item.outerWidth()) / 2)\r\n          });\r\n        }\r\n      },\r\n      initialClassOverlay = 'transparente',\r\n      initialClassWrapper = 'hidden';\r\n\r\n\r\n    return {\r\n      show: function(data) {\r\n        options = getDefaults(data || {});\r\n        var template = _.c_v06_mensajes_cargando({\r\n          image: 'preload_general_mini.gif',\r\n          classes: (options.loadingClass + ' ' + initialClassWrapper),\r\n          overlay: true,\r\n          text: options.text || $B.app.literals.cargando,\r\n          overlayClass: (options.overlayClass + ' ' + initialClassOverlay),\r\n          newUroboroText: true\r\n        });\r\n\r\n        $bfirst.append(template);\r\n        $loading = $('.' + options.loadingClass).first();\r\n        this.lastLoadingClass = options.loadingClass;\r\n        styleLoading($loading);\r\n        centerLoading($loading);\r\n\r\n        $(window).off('resize.pageLoading').on('resize.pageLoading', function() {\r\n          centerLoading($loading);\r\n        });\r\n\r\n        $B.utils.aria.loading($bfirst, 'active');\r\n\r\n        setTimeout(function() {\r\n          $('.loading-navigation.' + initialClassWrapper).removeClass(initialClassWrapper);\r\n          $('.ui-widget-overlay-mensaje-cargando.' + initialClassOverlay).removeClass(initialClassOverlay);\r\n        }, 1500);\r\n      },\r\n      hide: function(data) {\r\n        options = getDefaults(data || {});\r\n        $loading = $('.c-mensajes-cargando.' + (this.lastLoadingClass || options.loadingClass)).first().add($('.' + options.overlayClass).first());\r\n\r\n        if ($bfirst.attr('aria-busy') === 'true') {\r\n          $('[data-link=\"posicion-global\"]').first().focus();\r\n        }\r\n        $B.utils.aria.loading($bfirst, 'inactive');\r\n        $loading.fadeOut(400, function() {\r\n          $(this).remove();\r\n          $loading = null;\r\n        });\r\n      }\r\n    };\r\n  }());\r\n\r\n  /* $.navigateAnchor\r\n   *\r\n   * parametros:\r\n   *  options {\r\n   *    attrAnchor: [String atributo que contiene el selector]\r\n   *    animateTime: [Integer Tiempo de animacion en ms]\r\n   * }\r\n   *\r\n   * html:\r\n   * <span role=\"link\" tabindex=\"0\" data-anchor=\"#destination-selector\">[...]</span>\r\n   *\r\n   * inicializar:\r\n   *  $('.selector').navigateAnchor({attrAnchor: 'data-anchor', animateTime: 1000})\r\n   */\r\n  $.fn.extend({\r\n    navigateAnchor: function(options) {\r\n      var defaults = {\r\n        attrAnchor: 'data-anchor',\r\n        animateTime: 50\r\n      };\r\n      options = $.extend(defaults, options);\r\n      return this.each(function() {\r\n        var $destination = $($(this).attr(options.attrAnchor));\r\n        $('html, body').animate({\r\n          scrollTop: $destination.offset().top\r\n        }, options.animateTime, function() {\r\n          $destination.focus();\r\n        });\r\n      });\r\n    }\r\n  });\r\n\r\n  $B_ui.updateBodyHeight = (function() {\r\n    var\r\n      $window = $(window),\r\n      heightCorrection = 60;\r\n\r\n    if ($B.isPublic) {\r\n      heightCorrection = 0;\r\n      $body.css({\r\n        'position': 'static',\r\n        'padding-bottom': '0'\r\n      });\r\n    }\r\n\r\n    function check() {\r\n      $body.css({\r\n        'min-height': $window.height() - heightCorrection\r\n      });\r\n    }\r\n\r\n    $window.resize(check);\r\n\r\n    return check;\r\n  }());\r\n\r\n  // little plugin to get the width of all elements in a jQuery collection\r\n  // e.g. $('div').totalWidth();\r\n  $.fn.totalWidth = function() {\r\n    var totalWidth = 0;\r\n    this.each(function() {\r\n      totalWidth += $(this).width();\r\n    });\r\n    return totalWidth;\r\n  };\r\n\r\n  // little plugin to get the height of all elements in a jQuery collection\r\n  // e.g. $('div').totalHeight();\r\n  $.fn.totalHeight = function() {\r\n    var totalHeight = 0;\r\n    this.each(function() {\r\n      totalHeight += $(this).height();\r\n    });\r\n    return totalHeight;\r\n  };\r\n\r\n  /* $.launchPdfViewer\r\n   *\r\n   * parametros:\r\n   *\r\n   *\r\n   * inicializar:\r\n   *\r\n   */\r\n  $B_ui.launchPdfViewer = function(options) {\r\n    var settings = {\r\n        width: '750',\r\n        widthMobile: '960',\r\n        divId: 'pdfViewerContainer',\r\n        divClass: 'pdfViewerContenedor',\r\n        urlViewer: $B.staticPath + '/pdf_viewer_2014.html?nocache=' + $B.version + '&file=',\r\n        nativeLoadingSelector: '#errorWrapper:not([hidden]), #pageContainer1[data-loaded=\"true\"]',\r\n        selectors: {\r\n          zoomOut: '#zoomOut',\r\n          zoomIn: '#zoomIn',\r\n          print: '#print',\r\n          download: '#downloadPdfKqof',\r\n          numPages: '#numPages',\r\n          paginator: '.paginador',\r\n          errors: {\r\n            wrapperForced: '#errorWrapperForced',\r\n            wrapper: '#errorWrapper',\r\n            message: '#errorMessage'\r\n          },\r\n          prevDoc: '#prevDoc',\r\n          nextDoc: '#nextDoc'\r\n        },\r\n        urlPdf: '',\r\n        legacyPrintable: false,\r\n        target: null,\r\n        error: null,\r\n        resizeForcedError: false,\r\n        isCrossDomain: false,\r\n        literals: [{\r\n          selector: '#previous',\r\n          text: $B.app.literals.visor_pdf.paginaAnterior\r\n        }, {\r\n          selector: '#next',\r\n          text: $B.app.literals.visor_pdf.paginaSiguiente\r\n        }, {\r\n          selector: '#pageNumberLabel',\r\n          text: $B.app.literals.visor_pdf.pagina\r\n        }, {\r\n          selector: '#numPages',\r\n          text: $B.app.literals.visor_pdf.de,\r\n          replaceText: 'of'\r\n        }, {\r\n          selector: '#zoom_out',\r\n          text: $B.app.literals.visor_pdf.reducirZoom\r\n        }, {\r\n          selector: '#zoom_in',\r\n          text: $B.app.literals.visor_pdf.ampliarZoom\r\n        }, {\r\n          selector: '#zoomOut',\r\n          text: $B.app.literals.visor_pdf.reducirZoom\r\n        }, {\r\n          selector: '#zoomIn',\r\n          text: $B.app.literals.visor_pdf.ampliarZoom\r\n        }, {\r\n          selector: '#print',\r\n          text: $B.app.literals.visor_pdf.imprimir\r\n        }, {\r\n          selector: '#download',\r\n          text: $B.app.literals.visor_pdf.descargarOriginal\r\n        }, {\r\n          selector: '.cerrarVisor img',\r\n          text: $B.app.literals.visor_pdf.cerrarVisor\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.noEsPosibleCarga,\r\n          replaceText: 'An error occurred while loading the PDF'\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.documentoNoValido,\r\n          replaceText: 'Invalid or corrupted PDF file'\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.documentoNoEncontrado,\r\n          replaceText: 'Missing PDF file'\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.documentoProtegido,\r\n          replaceText: 'PDF is protected by a password:'\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.documentoNoRenderizable,\r\n          replaceText: 'An error occurred while rendering the page'\r\n        }, {\r\n          selector: '#errorMessage',\r\n          text: $B.app.literals.visor_pdf.errores.error500,\r\n          replaceText: 'ERROR_500'\r\n        }, {\r\n          selector: '#tituloPdf',\r\n          text: options.headerPdf\r\n        }, {\r\n          selector: '#prevDoc',\r\n          text: $B.app.literals.visor_pdf.prevDoc\r\n        }, {\r\n          selector: '#nextDoc',\r\n          text: $B.app.literals.visor_pdf.nextDoc\r\n        }],\r\n        miniatura: options.miniatura,\r\n        $contenedorMiniatura: (options.miniatura ? options.contenedorMiniatura : ''),\r\n        iframeIndex: options.iframeIndex,\r\n        whiteOverlay: options.whiteOverlay,\r\n        listaDocumentos: options.listaDocumentos\r\n      },\r\n      body = $(document.body),\r\n      iframeContainer,\r\n      iframeViewer,\r\n      iframeViewerContents,\r\n      errorWrapper,\r\n      loadingCounter = 0,\r\n      lateErrorCounter = 0,\r\n      $pdfViewerContainer = $(document.body),\r\n      docToSetReadState = [],\r\n      disableBodyScroll = function(disable) {\r\n        $('html').css('overflow', disable ? 'hidden' : 'visible');\r\n        $('body').css('overflow', disable ? 'scroll' : 'auto');\r\n      },\r\n      closeViewer = function(event) {\r\n        event.stopPropagation();\r\n        if (_.isUndefined(settings.pdfList)) {\r\n          iframeViewer.off('load.pdfViewer').closest('.c-contenedores-visorPDF').remove();\r\n        } else {\r\n          if (!$(event.target).hasClass('tabs')) {\r\n            iframeViewer.off('load.pdfViewer').closest('.c-contenedores-visorTabspdfs').remove();\r\n          }\r\n        }\r\n        disableBodyScroll(false);\r\n        $.publish('closedViewer', {\r\n          documentosAMarcar: docToSetReadState\r\n        });\r\n      },\r\n      changeCurrentTab = function(event) {\r\n        event.stopPropagation();\r\n        var tab_id = $(this).attr('data-tab');\r\n        $('ul.tabs li').removeClass('current');\r\n        $('.tab-content').removeClass('current');\r\n        $(this).addClass('current');\r\n        $('#' + tab_id).addClass('current');\r\n      },\r\n      escKey = function(el) {\r\n        el.off('keydown.pdfViewer').on('keydown.pdfViewer', function(event) {\r\n          if (event.keyCode === 27) {\r\n            closeViewer(event);\r\n          }\r\n        });\r\n      },\r\n      getStyleForSizeError = function(errorWrapperId, currentErrorWrapper) {\r\n        var style;\r\n        if (errorWrapperId !== 'errorWrapperForced' || settings.resizeForcedError) {\r\n          currentErrorWrapper.addClass('sizeEntireViewer');\r\n          style = {\r\n            height: iframeViewerContents.find('#viewerContainer').height() + 2,\r\n            overflow: 'hidden'\r\n          };\r\n        } else {\r\n          style = {\r\n            background: 'transparent'\r\n          };\r\n        }\r\n        return style;\r\n      },\r\n      sizeError = function() {\r\n        if (errorWrapper) {\r\n          var errorWrapperId = errorWrapper.attr('id'),\r\n            currentErrorWrapper = iframeViewerContents.find('#' + errorWrapperId + ':not([hidden=\"true\"])');\r\n          currentErrorWrapper.css(getStyleForSizeError(errorWrapperId, currentErrorWrapper));\r\n          iframeViewerContents.find('#mainContainer').css({\r\n            overflow: 'hidden'\r\n          });\r\n          if (settings.miniatura) {\r\n            if (settings.whiteOverlay) {\r\n              $('.iconoLupaOverlayMiniatura#iconoLupaOverlayMiniatura' + settings.iframeIndex).hide();\r\n              $('.white-overlay#white-overlay' + settings.iframeIndex).hide();\r\n            }\r\n\r\n            $('#pdfViewerContainer').find('iframe').contents().find('#errorWrapper').css('height', $('#pdfViewerContainer').css('height'));\r\n            $('#pdfViewerContainer').find('iframe').attr('height', $('#pdfViewerContainer').css('height'));\r\n          }\r\n        }\r\n      },\r\n      resizeViewer = function() {\r\n        var newHeight = $(window).height();\r\n        iframeViewer.css({\r\n          height: newHeight\r\n        }).attr({\r\n          height: newHeight\r\n        });\r\n        sizeError();\r\n      },\r\n      localization = function() {\r\n        _.each(settings.literals, function(item) {\r\n          var element = iframeViewerContents.find(item.selector),\r\n            text = item.text;\r\n          if (element.is('img')) {\r\n            element.attr({\r\n              alt: text,\r\n              title: text\r\n            });\r\n          } else if (!_.isUndefined(item.replaceText)) {\r\n            element.text(element.text().replace(item.replaceText, text));\r\n          } else {\r\n            element.text(text);\r\n          }\r\n        });\r\n      },\r\n      getPrintButton = function(printButton) {\r\n        var printButtonContainer = (printButton.parent().is('li')) ? printButton.parent() : printButton;\r\n        if (!_.isUndefined($B.ie_version) && $B.ie_version < 11) {\r\n          printButtonContainer.hide();\r\n        } else if (!printButton.is(':visible') && settings.legacyPrintable && !_.isNull(settings.target) && settings.target.closest('.c-listas-acciones').find('.imprimirDatos img').length) {\r\n          printButton.off('click').removeClass('hidden').on('click.printViewer', function() {\r\n            settings.target.closest('.c-listas-acciones').find('.imprimirDatos img').click();\r\n          });\r\n        } else if (!printButton.is(':visible')) {\r\n          printButtonContainer.hide();\r\n        }\r\n      },\r\n      removeViewerLoading = function() {\r\n        $B.ui.loading.remove({\r\n          parent: iframeContainer.find('.interiorVisor')\r\n        });\r\n      },\r\n      messageWarning = function() {\r\n        var messageText;\r\n        if (!_.isEmpty(settings.error)) {\r\n          messageText = (settings.error === 'ERROR_NO_COMPATIBLE') ? $B.app.literals.visor_pdf.errores.documentoNoValido : settings.error;\r\n          if (!iframeViewerContents.find(settings.selectors.errors.wrapperForced).length) {\r\n            iframeViewerContents.find('#mainContainer').append(_.tmpl('#c-contenedores-visor-pdf-error-forzado'));\r\n          }\r\n          errorWrapper = iframeViewerContents.find(settings.selectors.errors.wrapperForced);\r\n        } else {\r\n          messageText = iframeViewerContents.find(settings.selectors.errors.message).text();\r\n        }\r\n        if ($B.appConfig.controlCorrespondenciaVirtualMensajesPdf && settings.miniatura) {\r\n          errorWrapper.html(_.c_mensajes_informativoRefuerzo2({\r\n              titulo: $B.app.literals.visor_pdf.errores.tituloAdvertenciaUps,\r\n              message: '',\r\n              iconoGrande: true,\r\n              opciones: {\r\n                classAside: 'informativo-Error-visor-pdf',\r\n                conContenedorTextoGestionable: true\r\n              }\r\n            }))\r\n            /*.find('.c-mensajes-informativoRefuerzo').find('.contenedor-texto-gestionable').append(_.tmpl('#c-contenedores-visor-pdf-botones-informativo-refuerzo-error-visor')).find('[data-download]').on('click.pdfViewer', function (ev) {\r\n                        ev.preventDefault();\r\n                        iframeViewerContents.find(settings.selectors.download).click();\r\n                      })*/\r\n          ;\r\n          $.publish('errorPdfviewer', {\r\n            interiorVisor: iframeContainer.find('.interiorVisor')\r\n          });\r\n\r\n        } else {\r\n          errorWrapper.html(_.c_mensajes_informativoRefuerzo2({\r\n            titulo: $B.app.literals.visor_pdf.errores.tituloAdvertencia,\r\n            message: messageText,\r\n            srcImg: 'ico-aviso-alerta'\r\n          })).find('.c-mensajes-informativoRefuerzo').append(_.tmpl('#c-contenedores-visor-pdf-botones-informativo-refuerzo')).find('[data-download]').on('click.pdfViewer', function(ev) {\r\n            ev.preventDefault();\r\n            iframeViewerContents.find(settings.selectors.download).click();\r\n          });\r\n        }\r\n\r\n        if (iframeViewerContents.find('#tituloPdf').text() === 'null') {\r\n          iframeViewerContents.find('#tituloPdf').hide();\r\n        }\r\n        if (errorWrapper.attr('id') === 'errorWrapperForced') {\r\n          errorWrapper.find('.c-mensajes-informativoRefuerzo').append(_.tmpl('#c-contenedores-visor-pdf-boton-cerrar')).find('[data-close]').on('click.pdfViewer', function(ev) {\r\n            ev.preventDefault();\r\n            errorWrapper.remove();\r\n          });\r\n        }\r\n      },\r\n      messageError = function() {\r\n        errorWrapper.html(_.c_v07_mensajes_errorAplicacion({\r\n          titulo: $B.app.literals.visor_pdf.errores.tituloError,\r\n          descripcion: iframeViewerContents.find(settings.selectors.errors.message).text()\r\n        }));\r\n        iframeViewerContents.find(settings.selectors.download).parent().hide();\r\n      },\r\n      manageErrors = function(isDownloadable) {\r\n        if (!_.isEmpty(settings.error) || $.trim(iframeViewerContents.find(settings.selectors.errors.message).text()).length > 0) {\r\n          iframeViewerContents.find('.paginador').hide();\r\n          iframeViewerContents.find(settings.selectors.zoomOut).parent().hide();\r\n          iframeViewerContents.find(settings.selectors.zoomIn).parent().hide();\r\n          iframeViewerContents.find(settings.selectors.print).parent().hide();\r\n\r\n          if (settings.isCrossDomain) {\r\n            iframeViewerContents.find(settings.selectors.errors.message).text($B.app.literals.visor_pdf.errores.noEsPosibleCarga);\r\n          }\r\n\r\n          if (!isDownloadable) {\r\n            messageError();\r\n          } else {\r\n            messageWarning();\r\n          }\r\n\r\n          sizeError();\r\n        }\r\n      },\r\n      isError500 = function() {\r\n        var errorMessageText = iframeViewerContents.find(settings.selectors.errors.message).text();\r\n        return errorMessageText === 'ERROR_500' || errorMessageText === 'Missing PDF file.';\r\n      },\r\n      getPdfFileName = function getPdfFileName() {\r\n        var a, file;\r\n        if (settings.urlPdf) {\r\n          a = document.createElement('a');\r\n          a.href = settings.urlPdf;\r\n          file = a.pathname.substr(a.pathname.lastIndexOf('/') + 1);\r\n          if (file.indexOf('.pdf') > -1) {\r\n            return file;\r\n          }\r\n        }\r\n        return null;\r\n      },\r\n      trackDownload = function trackDownload() {\r\n        var pdfname = settings.name || getPdfFileName() || 'Documento PDF';\r\n        var data = settings.model ? settings.model.get('infoContratacion') : null;\r\n        var producto = 'sin producto';\r\n        var checkProduct = function(product) {\r\n          if (!product) {\r\n            return '';\r\n          }\r\n          return product.replace(/^\\s+|\\s+$/g, '');\r\n        };\r\n\r\n        if (data && _.isObject(data.registroContrato)) {\r\n          if (!_.isEmpty(checkProduct(data.registroContrato.descripcionProducto))) {\r\n            producto = data.registroContrato.descripcionProducto;\r\n          } else {\r\n            producto = data.registroContrato.idProducto;\r\n          }\r\n        }\r\n\r\n        if (settings.tmpFile) {\r\n          pdfname = settings.tmpFile.fileName;\r\n          if ($B.clientFlow.utils.isBrowserCompatible() && $B.clientFlow.utils.isIE10orEdge()) {\r\n            window.navigator.msSaveOrOpenBlob(settings.tmpFile.blob, pdfname + '.' + settings.tmpFile.fileExt);\r\n          } else if (!$B.clientFlow.utils.isBrowserCompatible()) {\r\n            $B.modalBrowserNotCompatible(\r\n              { \r\n                message : $B.app.literals.browserNotCompatible.blockedBrowserMessage,\r\n                logoutOnClose : false,\r\n                hideCloseBtn : false,\r\n                closeOnEscape : true\r\n              }\r\n            );\r\n          }\r\n        }\r\n\r\n        if ($B.tracking) {\r\n          $B.tracking.trackEvent({\r\n            id: 'descarga',\r\n            type: 'click',\r\n            data: 'producto=' + producto + '|documento=' + pdfname\r\n          });\r\n        }\r\n      },\r\n      addDocumentToReadStateIfNotExist = function(doc) {\r\n        var found = false;\r\n        _.each(docToSetReadState, function(item, index) {\r\n          if (item === doc) {\r\n            found = true\r\n          };\r\n        });\r\n        if (!found) {\r\n          docToSetReadState.push(doc)\r\n        };\r\n      },\r\n      iframeLoaded = function(ev) {\r\n        var printButton,\r\n          loadingInterval,\r\n          renderErrorInterval,\r\n          isDownloadable = true,\r\n          srcImgArrowLeftEnabled = 'img/arrow_left_active.png',\r\n          srcImgArrowLeftDisabled = 'img/arrow_left.png',\r\n          srcImgArrowRightEnabled = 'img/arrow_right_active.png',\r\n          srcImgArrowRightDisabled = 'img/arrow_right.png';\r\n        iframeViewer = $(ev.currentTarget);\r\n        iframeViewerContents = iframeViewer.contents();\r\n        printButton = iframeViewerContents.find('#print');\r\n        iframeViewerContents.find('.cerrarVisor').on('click.closeViewer', closeViewer);\r\n\r\n        if (!_.isUndefined(settings.pdfList)) {\r\n          settings.urlPdf = decodeURIComponent(iframeViewer.attr('src').split('file=')[1]);\r\n        }\r\n\r\n        iframeViewerContents.find(settings.selectors.download).attr('href', settings.urlPdf);\r\n        iframeViewerContents.find(settings.selectors.download).attr('href', settings.urlPdf).on('click', trackDownload);\r\n\r\n        loadingInterval = setInterval(function() {\r\n          if (iframeViewerContents.find(settings.nativeLoadingSelector).length || loadingCounter > 240) {\r\n            clearInterval(loadingInterval);\r\n            if (isError500()) {\r\n              isDownloadable = false;\r\n            }\r\n            localization();\r\n            errorWrapper = iframeViewerContents.find(settings.selectors.errors.wrapper);\r\n            if (!errorWrapper.is('[hidden=\"true\"]')) {\r\n              settings.error = null;\r\n              manageErrors(isDownloadable);\r\n            }\r\n\r\n            if (iframeViewerContents.find(settings.selectors.numPages).text() === '/ 1') {\r\n              iframeViewerContents.find(settings.selectors.paginator).hide();\r\n            }\r\n\r\n            if (!iframeViewerContents.find(settings.selectors.errors.wrapper).find('.c-mensajes-informativoRefuerzo, .c-mensajes-errorAplicacion').length) {\r\n              renderErrorInterval = setInterval(function() {\r\n                if (!errorWrapper.is('[hidden=\"true\"]') || lateErrorCounter > 200) {\r\n                  clearInterval(renderErrorInterval);\r\n                  localization();\r\n                  manageErrors(isDownloadable);\r\n                }\r\n                lateErrorCounter += 1;\r\n              }, 100);\r\n            }\r\n\r\n            if (!_.isEmpty(settings.error)) {\r\n              manageErrors(isDownloadable);\r\n            } else {\r\n              if ($B.appConfig.controlCorrespondenciaVirtualMensajesPdf && !settings.miniatura) {\r\n                if (iframeViewer.attr('src').indexOf('iframeIndex%3D') > -1) {\r\n                  addDocumentToReadStateIfNotExist(iframeViewer.attr('src').split('iframeIndex%3D')[1].split('%')[0]);\r\n                }\r\n              }\r\n            }\r\n\r\n            if (!_.isUndefined(settings.pdfList)) {\r\n              iframeViewerContents.find(settings.selectors.paginator).show();\r\n            }\r\n\r\n            removeViewerLoading();\r\n          }\r\n          loadingCounter += 1;\r\n        }, 250);\r\n\r\n        if (_.isUndefined(settings.pdfList)) {\r\n\r\n          getPrintButton(printButton);\r\n\r\n          if (!settings.miniatura) {\r\n\r\n            escKey(iframeViewer);\r\n            $(window).on('resize.pdfViewer', resizeViewer);\r\n            $(window).on('orientationchange.pdfViewer', resizeViewer);\r\n            iframeViewerContents.find('.prevDocument').hide();\r\n            iframeViewerContents.find('.nextDocument').hide();\r\n            iframeViewerContents.find('.opciones').removeClass('opcionesConFlechas');\r\n\r\n            if (settings.headerPdf && settings.headerPdf !== '') {\r\n              if (parseInt(settings.iframeIndex) !== parseInt(iframeViewer.attr('src').split('iframeIndex%3D')[1])) {\r\n                settings.iframeIndex = parseInt(iframeViewer.attr('src').split('iframeIndex%3D')[1]);\r\n                iframeViewerContents.find('#tituloPdf').text(settings.listaDocumentos[settings.iframeIndex].header);\r\n                _.each(settings.literals, function(item) {\r\n                  if (item.selector === '#tituloPdf') {\r\n                    item.text = settings.listaDocumentos[settings.iframeIndex].header;\r\n                  }\r\n                });\r\n              }\r\n            }\r\n\r\n            if (settings.conFlechasNavegacion) {\r\n\r\n              iframeViewerContents.find('.prevDocument').show();\r\n              iframeViewerContents.find('.nextDocument').show();\r\n              iframeViewerContents.find('.opciones').addClass('opcionesConFlechas');\r\n              if (parseInt(settings.iframeIndex) === 0 && settings.listaDocumentos.length > 1) {\r\n                /* DESHABILITAMOS ANTERIOR */\r\n                iframeViewerContents.find('#prevDocLink').find('img').attr('src', srcImgArrowLeftDisabled);\r\n                iframeViewerContents.find('#prevDocLink').attr('href', '#').off('click');\r\n                /* HABILITAMOS SIGUIENTE */\r\n                iframeViewerContents.find('#nextDocLink').find('img').attr('src', srcImgArrowRightEnabled);\r\n                iframeViewerContents.find('#nextDocLink').attr('href',\r\n                  iframeViewer.attr('src').replace('iframeIndex%3D0', 'iframeIndex%3D' + 1)\r\n                  .replace('ficheroADescargar%3D0', 'ficheroADescargar%3D' + 1)\r\n                ).off('click').on('click', function(ev) {\r\n                  ev.preventDefault();\r\n                  ev.stopPropagation();\r\n                  iframeViewer.attr('src', $(ev.currentTarget).attr('href'));\r\n                });\r\n              } else if (parseInt(settings.iframeIndex) === settings.listaDocumentos.length - 1 && settings.listaDocumentos.length > 1) {\r\n                /* DESHABILITAMOS SIGUIENTE */\r\n                iframeViewerContents.find('#nextDocLink').find('img').attr('src', srcImgArrowRightDisabled);\r\n                iframeViewerContents.find('#nextDocLink').attr('href', '#').off('click');\r\n                /* HABILITAMOS ANTERIOR */\r\n                iframeViewerContents.find('#prevDocLink').find('img').attr('src', srcImgArrowLeftEnabled);\r\n                iframeViewerContents.find('#prevDocLink').attr('href',\r\n                  iframeViewer.attr('src').replace('iframeIndex%3D' + settings.iframeIndex, 'iframeIndex%3D' + (parseInt(settings.iframeIndex) - 1))\r\n                  .replace('ficheroADescargar%3D' + settings.iframeIndex, 'ficheroADescargar%3D' + (parseInt(settings.iframeIndex) - 1))\r\n                ).off('click').on('click', function(ev) {\r\n                  ev.preventDefault();\r\n                  ev.stopPropagation();\r\n                  iframeViewer.attr('src', $(ev.currentTarget).attr('href'));\r\n                });\r\n              } else {\r\n                if (settings.listaDocumentos.length > 1) {\r\n                  /* HABILITAMOS ANTERIOR Y SIGUIENTE */\r\n                  iframeViewerContents.find('#nextDocLink').find('img').attr('src', srcImgArrowRightEnabled);\r\n                  iframeViewerContents.find('#nextDocLink').attr('href',\r\n                    iframeViewer.attr('src').replace('iframeIndex%3D' + settings.iframeIndex, 'iframeIndex%3D' + (parseInt(settings.iframeIndex) + 1))\r\n                    .replace('ficheroADescargar%3D' + settings.iframeIndex, 'ficheroADescargar%3D' + (parseInt(settings.iframeIndex) + 1))\r\n                  ).off('click').on('click', function(ev) {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    iframeViewer.attr('src', $(ev.currentTarget).attr('href'));\r\n                  });\r\n                  iframeViewerContents.find('#prevDocLink').find('img').attr('src', srcImgArrowLeftEnabled);\r\n                  iframeViewerContents.find('#prevDocLink').attr('href',\r\n                    iframeViewer.attr('src').replace('iframeIndex%3D' + settings.iframeIndex, 'iframeIndex%3D' + (parseInt(settings.iframeIndex) - 1))\r\n                    .replace('ficheroADescargar%3D' + settings.iframeIndex, 'ficheroADescargar%3D' + (parseInt(settings.iframeIndex) - 1))\r\n                  ).off('click').on('click', function(ev) {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    iframeViewer.attr('src', $(ev.currentTarget).attr('href'));\r\n                  });\r\n                } else {\r\n                  /*DESHABILITAMOS ANTERIOR Y SIGUIENTE*/\r\n                  iframeViewerContents.find('#nextDocLink').find('img').attr('src', srcImgArrowRightDisabled);\r\n                  iframeViewerContents.find('#nextDocLink').attr('href', '#').off('click');\r\n                  iframeViewerContents.find('#prevDocLink').find('img').attr('src', srcImgArrowLeftDisabled);\r\n                  iframeViewerContents.find('#prevDocLink').attr('href', '#').off('click');\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            errorWrapper = iframeViewerContents.find(settings.selectors.errors.wrapper);\r\n            if (iframeViewerContents.find(settings.selectors.errors.wrapper).find('.c-mensajes-informativoRefuerzo, .c-mensajes-errorAplicacion').length || errorWrapper.is('[hidden=\"true\"]')) {\r\n              if (settings.whiteOverlay) {\r\n                $('.iconoLupaOverlayMiniatura#iconoLupaOverlayMiniatura' + settings.iframeIndex).show();\r\n                $('.white-overlay#white-overlay' + settings.iframeIndex).show();\r\n              }\r\n            }\r\n            iframeViewerContents.find('.page').css('borderImage', 'none');\r\n          }\r\n        }\r\n      },\r\n      getPdfUrl = function() {\r\n        var regex = new RegExp($B.staticPath, 'i'),\r\n          url = settings.urlPdf;\r\n        return (url.match(regex)) ? url + '?' + $B.version : url;\r\n      },\r\n      getPdfFromUrl = function(url) {\r\n        var regex = new RegExp($B.staticPath, 'i');\r\n        return (url.match(regex)) ? url + '?' + $B.version : url;\r\n      },\r\n      parsePdfUrls = function(listPdfUrls) {\r\n        return _.map(listPdfUrls, function(pdf, index) {\r\n          return {\r\n            name: pdf.name,\r\n            url: encodeURIComponent(getPdfFromUrl(pdf.url))\r\n          };\r\n        });\r\n      },\r\n      loadTemplate = function() {\r\n        var $templateTarget = $(document.body),\r\n          viewerHeight = $(window).height(),\r\n          viewerWidth = settings.width,\r\n          idIframe = '#iframe-' + settings.divId;\r\n\r\n        if (_.isUndefined(settings.pdfList)) {\r\n\r\n          if ($B.appConfig.controlCorrespondenciaVirtualMensajesPdf && settings.miniatura) {\r\n            $templateTarget = $(settings.$contenedorMiniatura);\r\n            viewerHeight = $templateTarget.css('height');\r\n            if (viewerHeight === '0px') {\r\n              viewerHeight = '340px';\r\n            }\r\n            viewerWidth = $templateTarget.css('width');\r\n            settings.urlViewer = $B.staticPath + '/pdf_viewer_2015_onContainer.html?nocache=' + $B.version + '&file=';\r\n            idIframe = idIframe + settings.iframeIndex;\r\n            settings.divId = settings.divId + settings.iframeIndex;\r\n          }\r\n\r\n          //Cargamos el visor sin tabs\r\n          $templateTarget.append(_.c_contenedores_visor_pdf({\r\n            viewerId: settings.divId,\r\n            viewerClass: settings.divClass,\r\n            urlViewer: settings.urlViewer,\r\n            urlPdf: encodeURIComponent(getPdfUrl()),\r\n            viewerWidth: viewerWidth,\r\n            viewerWidthMobile: settings.widthMobile,\r\n            isMobile: _.isMobile(),\r\n            viewerHeight: viewerHeight,\r\n            miniatura: settings.miniatura,\r\n            idIframe: idIframe.split('#')[1]\r\n          })).find('iframe' + idIframe).on('load.pdfViewer', iframeLoaded);\r\n\r\n        } else {\r\n\r\n          if (viewerHeight > 898) {\r\n            viewerHeight = 898\r\n          };\r\n          //Cargamos el visor con tabs\r\n          $templateTarget.append(_.c_contenedores_visorTabspdfs({\r\n            viewerId: settings.divId,\r\n            viewerClass: settings.divClass,\r\n            urlViewer: $B.staticPath + '/pdf_viewer_2015_tabs.html?nocache=' + $B.version + '&file=',\r\n            viewerWidth: viewerWidth,\r\n            viewerHeight: viewerHeight,\r\n            pdfList: parsePdfUrls(settings.pdfList),\r\n            idIframe: idIframe.split('#')[1]\r\n          }));\r\n          $iframesTemplate = $templateTarget.find('iframe' + idIframe);\r\n          $iframesTemplate.on('load.pdfViewer', iframeLoaded);\r\n          $('.cerrar').on('click', closeViewer);\r\n          $('ul.tabs li').on('click', changeCurrentTab);\r\n        }\r\n\r\n        if ($B.appConfig.controlCorrespondenciaVirtualMensajesPdf && settings.miniatura) {\r\n          iframeContainer = $templateTarget.find('#' + settings.divId);\r\n        } else {\r\n          iframeContainer = body.find('#' + settings.divId);\r\n        }\r\n\r\n        $B.ui.loading.add({\r\n          parent: iframeContainer.find('.interiorVisor'),\r\n          autoStyle: true,\r\n          loadingVisorPdf: true\r\n        });\r\n\r\n        if (!settings.miniatura) {\r\n          escKey($(window));\r\n        }\r\n\r\n        $('[data-pdf-window]').off('click.pdfViewer').on('click.pdfViewer', closeViewer);\r\n      };\r\n\r\n    if (options) {\r\n      $.extend(settings, options);\r\n    }\r\n    //settings.error = 'ERROR_FORZADO';\r\n    disableBodyScroll(true);\r\n\r\n    if (!_.isFunction(_.c_contenedores_visor_pdf)) {\r\n      if (settings.miniatura) {\r\n        $pdfViewerContainer = settings.$contenedorMiniatura;\r\n      }\r\n      require(['text!' + $B.mixinPath + 'c_main_contenedores_visor_pdf.tmpl.html'], function(template_visor_pdf) {\r\n        $.when($pdfViewerContainer.append(template_visor_pdf)).then(function() {\r\n          loadTemplate();\r\n        });\r\n      });\r\n    } else {\r\n      if (!_.isFunction(_.c_contenedores_visorTabspdfs)) {\r\n        require(['text!' + $B.mixinPath + 'c_main_contenedores_visorTabspdfs.tmpl.html'], function(template_visor_pdf) {\r\n          $.when($pdfViewerContainer.append(template_visor_pdf)).then(function() {\r\n            loadTemplate();\r\n          });\r\n        });\r\n      } else {\r\n        loadTemplate();\r\n      }\r\n    }\r\n  };\r\n\r\n  $B_ui.createOpinator = function($viewEl, options) {\r\n    if ($B.appConfig.opinatorEnabled && $viewEl.find('#ph_opinator').length === 0) {\r\n      $.when($viewEl.append(_.tmpl('#c-widget-opinator-container'))).then(function() {\r\n        var Opinator = new $B.app.Opinator(options);\r\n      });\r\n    }\r\n  };\r\n\r\n  /* $B.ui.avoidPaste\r\n   *\r\n   * parametros:\r\n   *\r\n   *\r\n   * inicializar:\r\n   *\r\n   */\r\n  /* \r\n  $B_ui.avoidPaste = function (data) {\r\n    var defaults = {\r\n      context: $('body'),\r\n      fieldSelector: '[data-no-paste]'\r\n    },\r\n      options = $.extend(true, {}, defaults, data);\r\n\r\n    options.context.find(options.fieldSelector).on('paste', function (ev) {\r\n      ev.preventDefault();\r\n    });\r\n  };*/\r\n\r\n  $B_ui.avoidPaste = (function(defaults, options) {\r\n    return function(data) {\r\n      options = $.extend(true, {}, defaults, data);\r\n      options.context.find(options.fieldSelector).on('paste', function(ev) {\r\n        ev.preventDefault();\r\n      });\r\n    };\r\n  }({\r\n    context: $('body'),\r\n    fieldSelector: '[data-no-paste]'\r\n  }, {}));\r\n\r\n\r\n  $B_ui.tabsInHeader = (function() {\r\n    var $tabsCopy = null,\r\n      fn = {\r\n        getTabs: function($pestanas) {\r\n          var tabs = [];\r\n          $.each($pestanas, function() {\r\n            tabs.push({\r\n              id: $(this).attr('data-tab'),\r\n              text: $(this).text(),\r\n              isSelected: $(this).is('.activo')\r\n            });\r\n          });\r\n          return tabs;\r\n        },\r\n        tabsMenu: function($context) {\r\n          var $pestanas = $context.find('[data-tab]:not([data-notfixed])');\r\n          fn.getTabsCopy();\r\n          if ($pestanas.length > 0) {\r\n\r\n            $tabsCopy.html(_.tmpl('#app_menu_pestanas_tmpl', {\r\n              tabs: this.getTabs($pestanas)\r\n            }));\r\n          } else {\r\n            $tabsCopy.empty();\r\n          }\r\n        },\r\n        getTabsCopy: function() {\r\n          if (_.isNull($tabsCopy)) {\r\n            $tabsCopy = $('#app_menu_pestanas');\r\n          }\r\n        }\r\n      };\r\n    return {\r\n      set: function(view) {\r\n        var $context = !_.isEmpty(view) ? view.$el : $('.contenedorEncabezadoSeccion').eq(0);\r\n        fn.tabsMenu($context);\r\n      },\r\n      unset: function() {\r\n        fn.getTabsCopy();\r\n        $tabsCopy.empty();\r\n      }\r\n    };\r\n  }());\r\n\r\n  $B_ui.fixedHeader = (function() {\r\n    var $cabecera = null,\r\n      $body = $('body'),\r\n      headerHeight = null,\r\n      classHeaderDefault = 'cabeceraDefault',\r\n      classHeaderFixed = 'cabeceraFixed',\r\n      dataPosition = 'data-position',\r\n      fn = {\r\n        getHeader: function() {\r\n          if (_.isNull($cabecera)) {\r\n            $cabecera = $('#ph_cabecera');\r\n          }\r\n        },\r\n        getHeaderHeight: function() {\r\n          this.getHeader();\r\n          if (_.isNull(headerHeight)) {\r\n            headerHeight = $cabecera.height();\r\n          }\r\n          return headerHeight;\r\n        },\r\n        publishHeaderPosition: function(newPosition) {\r\n          $.publish('headerPosition', {\r\n            position: newPosition\r\n          });\r\n        },\r\n        headerGap: function(gap) {\r\n          $body.css({\r\n            paddingTop: gap\r\n          });\r\n        },\r\n        headerManipulation: function(data) {\r\n          fn.getHeader();\r\n          $cabecera.removeClass(data.classes.remove)\r\n            .addClass(data.classes.add)\r\n            .attr(data.attr.position.name, data.attr.position.value)\r\n            .data('position', data.attr.position.value);\r\n          fn.headerGap(data.gap);\r\n          fn.publishHeaderPosition(data.attr.position.value);\r\n        }\r\n      };\r\n    return {\r\n      set: function() {\r\n        fn.headerManipulation({\r\n          classes: {\r\n            add: classHeaderFixed,\r\n            remove: classHeaderDefault\r\n          },\r\n          attr: {\r\n            position: {\r\n              name: dataPosition,\r\n              value: 'fixed'\r\n            }\r\n          },\r\n          gap: fn.getHeaderHeight()\r\n        });\r\n      },\r\n      unset: function() {\r\n        fn.headerManipulation({\r\n          classes: {\r\n            add: classHeaderDefault,\r\n            remove: classHeaderFixed\r\n          },\r\n          attr: {\r\n            position: {\r\n              name: dataPosition,\r\n              value: 'default'\r\n            }\r\n          },\r\n          gap: 0\r\n        });\r\n      },\r\n      goTop: function() {\r\n        this.unset();\r\n        $B.ui.documentScrollTop();\r\n      }\r\n    };\r\n  }());\r\n\r\n  $B_ui.anclaArriba = (function() {\r\n    var $anclaArriba = null,\r\n      fn = {\r\n        getAncla: function() {\r\n          if (_.isNull($anclaArriba)) {\r\n            $anclaArriba = $('#anclaArriba');\r\n          }\r\n        },\r\n        anclaHide: function() {\r\n          $anclaArriba.hide();\r\n        },\r\n        anclaShow: function(windowScrollTop) {\r\n          var posicionBottom;\r\n          if (windowScrollTop === ($(document).height() - $(window).height())) {\r\n            posicionBottom = 60;\r\n          } else {\r\n            posicionBottom = 10;\r\n          }\r\n          $anclaArriba.css({\r\n            bottom: posicionBottom\r\n          }).show();\r\n        }\r\n      };\r\n    return {\r\n      set: function() {\r\n        fn.getAncla();\r\n        var windowScrollTop = $(window).scrollTop();\r\n        if (windowScrollTop > $B.appConfig.posicionAncla) {\r\n          fn.anclaShow(windowScrollTop);\r\n        } else {\r\n          fn.anclaHide();\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  $B_ui.stickyElements = (function() {\r\n    var elementList = {\r\n        header: {\r\n          selector: '.c-menu-auxiliar_R2',\r\n          callback: 'fixedHeader',\r\n          sticked: false,\r\n          offset: null\r\n        },\r\n        tabs: {\r\n          selector: '.contenedorEncabezadoSeccion',\r\n          callback: 'tabsInHeader',\r\n          sticked: false,\r\n          offset: null\r\n        },\r\n        ancla: {\r\n          selector: '#anclaArriba',\r\n          callback: 'anclaArriba',\r\n          customPosition: true\r\n        }\r\n      },\r\n      scrollTimeout,\r\n      fnCallback = {\r\n        fixedHeader: function(scroll) {\r\n          /*if (scroll) {\r\n            $B_ui.fixedHeader.set();\r\n          } else {\r\n            $B_ui.fixedHeader.unset();\r\n          }*/\r\n        },\r\n        tabsInHeader: function(scroll) {\r\n          if (scroll) {\r\n            $B_ui.tabsInHeader.set();\r\n          } else {\r\n            $B_ui.tabsInHeader.unset();\r\n          }\r\n        },\r\n        anclaArriba: function() {\r\n          $B_ui.anclaArriba.set();\r\n        }\r\n      },\r\n      fn = {\r\n        cached: {\r\n          headerHeight: null\r\n        },\r\n        headerHeight: function() {\r\n          if (_.isNull(this.cached.headerHeight)) {\r\n            //this.cached.headerHeight = $(elementList.header.selector).height();\r\n            //this.cached.headerHeight = $(elementList.header.selector).css('margin-top');\r\n            this.cached.headerHeight = $('#ph_cabecera').height();\r\n          }\r\n          return this.cached.headerHeight;\r\n        },\r\n        isHeaderFixed: function() {\r\n          return (elementList.header.sticked) ? this.headerHeight() : 0;\r\n        },\r\n        getScrollTop: function($context) {\r\n          return (!_.isUndefined($context)) ? $context.offset().top : $(window).scrollTop();\r\n        },\r\n        windowIsBelowElement: function(element, $element) {\r\n          var elementScrollTop,\r\n            elementHeight = $element.height();\r\n          if (_.isNull(element.offset)) {\r\n            elementScrollTop = this.getScrollTop($element);\r\n            element.offset = elementScrollTop;\r\n          } else {\r\n            elementScrollTop = element.offset;\r\n          }\r\n          return ((elementScrollTop - ((element.selector === elementList.header.selector) ? 30 : this.isHeaderFixed()) + elementHeight) < this.getScrollTop());\r\n        },\r\n        makeCallback: function(callback, windowIsBelowElement) {\r\n          fnCallback[callback](windowIsBelowElement);\r\n        },\r\n        afterCheck: function() {\r\n          // Hay que hacer algunas verificaciones para evitar el each cuando no es necesario: en determinados tramos del scroll no necesitamos que se haga ninguna comprobacin...\r\n          var self = this;\r\n          _.each(elementList, function(element) {\r\n            var windowIsBelowElement = null,\r\n              $element = $(element.selector);\r\n            if ($element.length) {\r\n              if (element.customPosition === true) {\r\n                self.makeCallback(element.callback, null);\r\n              } else {\r\n                windowIsBelowElement = self.windowIsBelowElement(element, $element); // TODO: quitar repetidos\r\n                if (element.sticked !== windowIsBelowElement) {\r\n                  element.sticked = windowIsBelowElement;\r\n                  self.makeCallback(element.callback, windowIsBelowElement);\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      };\r\n\r\n    return {\r\n      elementList: elementList,\r\n      initialize: function() {\r\n        fn.headerHeight();\r\n        $(window).off('scroll.sticky').on('scroll.sticky', null, {\r\n          self: this\r\n        }, this.check);\r\n      },\r\n      check: function(ev) {\r\n        if (!scrollTimeout) {\r\n          scrollTimeout = setTimeout(function() {\r\n            scrollTimeout = null;\r\n            fn.afterCheck(ev);\r\n          }, 100);\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  $B_ui.eventOutsideElement = function(options) {\r\n    var defaults = {\r\n        eventType: 'click',\r\n        eventNamespace: 'outside',\r\n        fn: {\r\n          condition: function() {\r\n            return false;\r\n          },\r\n          callback: function() {\r\n            return false;\r\n          }\r\n        }\r\n      },\r\n      settings = $.extend(true, {}, defaults, options),\r\n      idJsEvent = settings.eventType + '.' + settings.eventNamespace,\r\n      $clickables = $(document).add('[role=\"link\"], [role=\"button\"], [role=\"tab\"]');\r\n\r\n\r\n    $clickables.off(idJsEvent).on(idJsEvent, function(ev) {\r\n      if (settings.fn['condition'](ev)) {\r\n        $clickables.off(idJsEvent);\r\n        settings.fn['callback']();\r\n      }\r\n    });\r\n  };\r\n\r\n  $B_ui.documentScrollTop = function(options) {\r\n    var defaults = {\r\n        top: 0,\r\n        duration: 500,\r\n        effect: 'swing',\r\n        context: 'html, body'\r\n      },\r\n      options = $.extend(true, {}, defaults, options);\r\n    $(options.context).animate({\r\n      scrollTop: options.top\r\n    }, {\r\n      duration: options.duration,\r\n      easing: options.effect\r\n    });\r\n  };\r\n\r\n  $B_ui.slideTour = function(data) {\r\n    var $contenedorAyuda = $('body').append(_.c_contenedores_ayudas_slide(data)).find('.c-contenedores-ayudas-slide'),\r\n      $html = $('html'),\r\n      $closeButton = $contenedorAyuda.find('[data-close-tour]'),\r\n      fn = {\r\n        hideTour: function() {\r\n          $contenedorAyuda.fadeOut('fast', 'swing', function() {\r\n            $contenedorAyuda.remove();\r\n          });\r\n          $html.css({\r\n            overflow: 'visible'\r\n          });\r\n        }\r\n      };\r\n    $html.css({\r\n      overflow: 'hidden'\r\n    });\r\n    $closeButton.off('click.slideTour').on('click.slideTour', function() {\r\n      fn.hideTour();\r\n    });\r\n    $contenedorAyuda.find('[data-slide-control]').off('click.slideTour').on('click.slideTour', function() {\r\n      $B.ui.documentScrollTop({\r\n        context: '.c-contenedores-ayudas-slide'\r\n      });\r\n    });\r\n    $B.ui.documentScrollTop({\r\n      context: '.c-contenedores-ayudas-slide'\r\n    });\r\n    $contenedorAyuda.off('keydown.closeTour').on('keydown.closeTour', function(ev) {\r\n      if ((ev.keyCode === 13 && $closeButton.is(':focus')) || ev.keyCode === 27) {\r\n        fn.hideTour();\r\n      }\r\n    });\r\n    $closeButton.focus();\r\n  };\r\n\r\n  // expose module with custom alias\r\n  /*define('$B.ui', function(){\r\n    return $B_ui;\r\n  });*/\r\n\r\n\r\n  /*\\\r\n   * Funcion para inicializar el conmutador de productos en la ficha de cada producto. \r\n   * $B.ui.initConmutadorProductosFicha(listasListaProductos); \r\n   * listasListaProductos ->  List<com.bbva.kqof.webcore.forms.dtos.comun.ListaProductosNombreComponenteFicha> necesario en el form de la ficha\r\n   * Desarrollo: Producto por familia\r\n   * Author: Accenture \r\n   * Responsable: xe36814\r\n  \\*/\r\n  $B_ui.initConmutadorProductosFicha = function(listasListaProductos, modelo_ficha) {\r\n    var alreadyExecuted = false,\r\n      posicion = 'titular',\r\n      functions = {\r\n        eventoAbrirConmutador: function() {\r\n          var self = this;\r\n          $('.botonConmutador_productos').addClass('desplegable_abierto');\r\n          $('.conmutador-listado-productos').removeClass('conmutador_productos_cerrado');\r\n          $('.conmutador-listado-productos').addClass('conmutador_productos_abierto');\r\n          $('#contenedor-c-v01-conmutador-listado-productos').addClass('contenedorAbierto');\r\n          $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').addClass('encabezadoConmutadorAbierto');\r\n\r\n          if (listasListaProductos[0].listaTmplName !== 'Cuentas' && listasListaProductos[0].listaTmplName !== 'Tarjetas') {\r\n            $('.c-encabezado-descripcionProducto').addClass('encabezadoConmutadorAbierto');\r\n            $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').removeClass('encabezadoConmutadorAbierto');\r\n          } else {\r\n            $('.c-encabezado-descripcionProducto').removeClass('encabezadoConmutadorAbierto');\r\n          }\r\n          if (!alreadyExecuted) {\r\n            $('span[role=\"button\"][data-action=\"listAll\"]').click();\r\n            alreadyExecuted = true;\r\n          }\r\n          $.unsubscribe('clickOn_botonConmutador_productos');\r\n          $.subscribe('clickOn_botonConmutador_productos', function() {\r\n            self.eventoCerrarConmutador();\r\n          });\r\n        },\r\n        eventoCerrarConmutador: function() {\r\n          var self = this;\r\n          $('.botonConmutador_productos').removeClass('desplegable_abierto');\r\n          $('.conmutador-listado-productos').removeClass('conmutador_productos_abierto');\r\n          $('.conmutador-listado-productos').addClass('conmutador_productos_cerrado');\r\n          $('#contenedor-c-v01-conmutador-listado-productos').removeClass('contenedorAbierto');\r\n          $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').removeClass('encabezadoConmutadorAbierto');\r\n          $('.c-encabezado-descripcionProducto').removeClass('encabezadoConmutadorAbierto');\r\n          $.unsubscribe('clickOn_botonConmutador_productos');\r\n          $.subscribe('clickOn_botonConmutador_productos', function() {\r\n            self.eventoAbrirConmutador();\r\n          });\r\n        },\r\n        cambiarBuscador: function(p_nombreLista) {\r\n          var objetoEncontrado = -1,\r\n            prodActual = false,\r\n            indiceProductoActual = 0,\r\n            self = this;\r\n\r\n          _.each(listasListaProductos, function(item, index) {\r\n            if (item.listaTmplName === p_nombreLista) {\r\n              objetoEncontrado = index;\r\n              if (index === indiceProductoActual) {\r\n                prodActual = true;\r\n              }\r\n            }\r\n          });\r\n          if (objetoEncontrado > -1) {\r\n            $('#contenedorBuscadores_conmutador_listado_productos').html(_.tmpl('#vista_buscador_' + p_nombreLista, {\r\n              listaProductos: listasListaProductos[objetoEncontrado],\r\n              prodActual: prodActual,\r\n              modelo_ficha: modelo_ficha\r\n            }));\r\n          }\r\n          $B.ui.initFormComponents();\r\n          $('span[role=\"button\"][data-action=\"listAll\"]').click();\r\n          if ($B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            self.registrarEventoCambioProducto();\r\n          }\r\n        },\r\n        cambiarBuscadorVisualizadores: function(p_nombreLista, listaProductos) {\r\n          var listaAuxiliar = [],\r\n            prodActual = false,\r\n            indiceProductoActual = 0,\r\n            self = this;\r\n\r\n          listaAuxiliar = listaProductos.listaProductos;\r\n          listaProductos.listaProductos = listaProductos.listaProductosVisualizadores;\r\n\r\n          _.each(listasListaProductos, function(item, index) {\r\n            if (item.listaTmplName === p_nombreLista) {\r\n              objetoEncontrado = index;\r\n              if (index === indiceProductoActual) {\r\n                prodActual = true;\r\n              }\r\n            }\r\n          });\r\n\r\n          $('#contenedorBuscadores_conmutador_listado_productos').html(\r\n            _.tmpl('#vista_buscador_' + p_nombreLista, {\r\n              listaProductos: listaProductos,\r\n              prodActual: prodActual,\r\n              modelo_ficha: modelo_ficha\r\n            }));\r\n          $B.ui.initFormComponents();\r\n          $('span[role=\"button\"][data-action=\"listAll\"]').click();\r\n          $('.nombreComercialProductosFicha').parent().append('<span class=\"labelAutorizado\"> Autorizado </span>');\r\n          listaProductos.listaProductos = listaAuxiliar;\r\n          self.registrarEventoCambioProducto();\r\n        },\r\n        cambiarBuscadorTodos: function(p_nombreLista) {\r\n          var objetoEncontrado = -1,\r\n            prodActual = false,\r\n            indiceProductoActual = 0,\r\n            self = this,\r\n            listaSeleccionada = [],\r\n            listaAuxiliar = [],\r\n            longitudFilas = 0,\r\n            longitudAutorizados = 0;\r\n\r\n          _.each(listasListaProductos, function(item, index) {\r\n            if (item.listaTmplName === p_nombreLista) {\r\n              objetoEncontrado = index;\r\n              if (index === indiceProductoActual) {\r\n                prodActual = true;\r\n              }\r\n            }\r\n          });\r\n\r\n          listaSeleccionada = listasListaProductos[objetoEncontrado];\r\n          listaAuxiliar = $.merge(listaAuxiliar, listaSeleccionada.listaProductos);\r\n          listaSeleccionada.listaProductos = $.merge(listaSeleccionada.listaProductos, listaSeleccionada.listaProductosVisualizadores);\r\n\r\n          if (objetoEncontrado > -1) {\r\n            $('#contenedorBuscadores_conmutador_listado_productos').html(_.tmpl('#vista_buscador_' + p_nombreLista, {\r\n              listaProductos: listaSeleccionada,\r\n              prodActual: prodActual,\r\n              modelo_ficha: modelo_ficha\r\n            }));\r\n          }\r\n          longitudFilas = $('.filaProducosFicha').length;\r\n          longitudAutorizados = listaSeleccionada.listaProductosVisualizadores.length;\r\n          listaSeleccionada.listaProductos = listaAuxiliar;\r\n          for (i = 0; i < longitudAutorizados; i++) {\r\n            $($('.filaProducosFicha')[longitudFilas - (longitudAutorizados - i)]).addClass('filaProductoAutorizado');\r\n          }\r\n          $('.filaProductoAutorizado .nombreComercialProductosFicha').parent().append('<span class=\"labelAutorizado\"> Autorizado </span>');\r\n          $B.ui.initFormComponents();\r\n          $('span[role=\"button\"][data-action=\"listAll\"]').click();\r\n          self.registrarEventoCambioProducto();\r\n        },\r\n        cambiarComboTitulares: function() {\r\n          if (this.posicion === 'autorizado') {\r\n            $('#select_comboProductos-Ficha').val($('#select_comboProductos-Ficha-visualizadores').val()).trigger('click').trigger('change');\r\n          } else {\r\n            $('#select_comboProductos-Ficha').val($('#select_comboProductos-Ficha-todos').val()).trigger('click').trigger('change');\r\n          }\r\n          $('#select_comboProductos-Ficha').parent().show();\r\n          $('#select_comboProductos-Ficha-visualizadores').parent().hide();\r\n          $('#select_comboProductos-Ficha-todos').parent().hide();\r\n          this.posicion = 'titular';\r\n        },\r\n        cambiarComboAutorizados: function() {\r\n          if (this.posicion === 'titular') {\r\n            $('#select_comboProductos-Ficha-visualizadores').val($('#select_comboProductos-Ficha').val()).trigger('click').trigger('change');\r\n          } else {\r\n            $('#select_comboProductos-Ficha-visualizadores').val($('#select_comboProductos-Ficha-todos').val()).trigger('click').trigger('change');\r\n          }\r\n          $('#select_comboProductos-Ficha-visualizadores').parent().show();\r\n          $('#select_comboProductos-Ficha').parent().hide();\r\n          $('#select_comboProductos-Ficha-todos').parent().hide();\r\n          this.posicion = 'autorizado';\r\n        },\r\n        cambiarComboTodos: function() {\r\n          if (this.posicion === 'titular') {\r\n            $('#select_comboProductos-Ficha-todos').val($('#select_comboProductos-Ficha').val()).trigger('click').trigger('change');\r\n          }\r\n          if (this.posicion === 'autorizado') {\r\n            $('#select_comboProductos-Ficha-todos').val($('#select_comboProductos-Ficha-visualizadores').val()).trigger('click').trigger('change');\r\n          }\r\n          $('#select_comboProductos-Ficha-todos').parent().show();\r\n          $('#select_comboProductos-Ficha-visualizadores').parent().hide();\r\n          $('#select_comboProductos-Ficha').parent().hide();\r\n          this.posicion = 'todos';\r\n        },\r\n        actualizarPosicionLinkAutorizado: function() {\r\n          if ($('[data-action=\"listAll\"]').length <= 0) {\r\n            $('.linkAutorizados').addClass('linkAutorizadosSinBuscador');\r\n            $('#comboPosiciones-ficha').addClass('comboAutorizadosSinBuscador');\r\n          } else {\r\n            $('.linkAutorizados').removeClass('linkAutorizadosSinBuscador');\r\n            $('#comboPosiciones-ficha').removeClass('comboAutorizadosSinBuscador');\r\n          }\r\n        },\r\n        mostarCargandoEncabezado: function() {\r\n          var anchoLoading = '',\r\n            anchoLoadingSinPx = '';\r\n          $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').before(_.c_v06_mensajes_cargando({\r\n            text: $B.app.literals.cargando,\r\n            image: 'preload_secundario_mini.gif',\r\n            newUroboroText: true\r\n          })).hide();\r\n          $('.newUroboroLoadingP').hide();\r\n          anchoLoading = $('.newUroboroLoadingDiv').css('width');\r\n          anchoLoadingSinPx = anchoLoading.substring(0, anchoLoading.length - 2);\r\n          $('.newUroboroLoadingDiv')\r\n            .css('maxHeight', '90px')\r\n            .css('paddingTop', '30px')\r\n            .addClass('encabezadoConmutadorAbierto')\r\n            .css('width', (parseInt(anchoLoadingSinPx) - 2) + 'px');\r\n        },\r\n        ocultarCargandoEncabezado: function() {\r\n          $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').show();\r\n          $('.newUroboroLoadingDiv').remove();\r\n        },\r\n        establecerEventoFlagVisualizadores: function(posicion, flagVisualizadores, esProductoAutorizado) {\r\n          var eventId = '';\r\n          if ((posicion === '1' && !flagVisualizadores) || (posicion === '0' && flagVisualizadores) || ((posicion !== '0' && posicion !== '1') && esProductoAutorizado)) {\r\n\r\n            eventId = 'ponerFlagAutorizado';\r\n          } else {\r\n            eventId = 'ponerFlagTitular';\r\n          }\r\n          return eventId;\r\n        },\r\n        comprobarCambioPosicion: function(posicion, flagVisualizadores, esProductoAutorizado) {\r\n          var seHaCambiadoPosicionVisualizadores = false;\r\n          if ((posicion === '0') || (posicion === '2' && (flagVisualizadores && esProductoAutorizado)) || (posicion === '2' && (!flagVisualizadores && !esProductoAutorizado))) {\r\n            seHaCambiadoPosicionVisualizadores = false;\r\n          } else {\r\n            seHaCambiadoPosicionVisualizadores = true;\r\n          }\r\n          return seHaCambiadoPosicionVisualizadores;\r\n        },\r\n        lanzarEventoCambioFlagVisualizadores: function(nuevoEstadoFlagVisualizadores, urlProducto, cambioPosicionVisualizadores) {\r\n          var self = this;\r\n          modelo_ficha.save({\r\n            _eventId: nuevoEstadoFlagVisualizadores\r\n          }, {\r\n            success: function() {\r\n              if (cambioPosicionVisualizadores) {\r\n                $B.storage.session.clear();\r\n              }\r\n              setTimeout(function() {\r\n                $B.utils.navigate({\r\n                  url: urlProducto,\r\n                  forcedNavigation: true\r\n                });\r\n              }, 550);\r\n            },\r\n            error: function() {\r\n              self.ocultarCargandoEncabezado();\r\n            },\r\n            validationError: function() {\r\n              self.ocultarCargandoEncabezado();\r\n            }\r\n          });\r\n        },\r\n        registrarEventoCambioProducto: function() {\r\n          var self = this;\r\n          if ($B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            $('.filaProducosFicha').off('click').on('click', function(ev) {\r\n              var estamosEnVisualizadores = modelo_ficha.get('estamosEnVisualizadores'),\r\n                _posicion = $('[name=\"comboPosiciones-ficha\"]').val(),\r\n                nuevoEstadoFlagVisualizadores = '',\r\n                cambioPosicion = false,\r\n                esProductoAutorizado = $(ev.currentTarget).hasClass('filaProductoAutorizado'),\r\n                urlProducto = $(ev.currentTarget).data('link');\r\n\r\n              ev.preventDefault();\r\n              ev.stopPropagation();\r\n\r\n              nuevoEstadoFlagVisualizadores = self.establecerEventoFlagVisualizadores(_posicion, estamosEnVisualizadores, esProductoAutorizado);\r\n              cambioPosicion = self.comprobarCambioPosicion(_posicion, estamosEnVisualizadores, esProductoAutorizado);\r\n              self.mostarCargandoEncabezado();\r\n              self.lanzarEventoCambioFlagVisualizadores(nuevoEstadoFlagVisualizadores, urlProducto, cambioPosicion);\r\n            });\r\n          }\r\n        },\r\n        registrarEventos: function() {\r\n          var self = this;\r\n          $.subscribe('clickOn_botonConmutador_productos', function() {\r\n            self.eventoAbrirConmutador();\r\n          });\r\n          $('.botonConmutador_productos').off('click').on('click', function() {\r\n            $.publish('clickOn_botonConmutador_productos');\r\n          });\r\n\r\n          $('#select_comboProductos-Ficha').off('change').on('change', function(ev) {\r\n            var listaSeleccionada = listasListaProductos[ev.target.value].listaTmplName;\r\n\r\n            self.cambiarBuscador(listaSeleccionada);\r\n            if ($B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n              self.actualizarPosicionLinkAutorizado();\r\n            }\r\n          });\r\n          if ($B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            $('#select_comboPosiciones-ficha').off('change').on('change', function(ev) {\r\n              var _posicion = ev.currentTarget.value;\r\n              if (!modelo_ficha.get('estamosEnVisualizadores')) {\r\n                if (_posicion === '0') {\r\n                  self.cambiarComboTitulares();\r\n                } else if (_posicion === '1') {\r\n                  self.cambiarComboAutorizados();\r\n                } else {\r\n                  self.cambiarComboTodos();\r\n                }\r\n              } else {\r\n                if (_posicion === '0') {\r\n                  self.cambiarComboAutorizados();\r\n                } else if (_posicion === '1') {\r\n                  self.cambiarComboTitulares();\r\n                } else {\r\n                  self.cambiarComboTodos();\r\n                }\r\n              }\r\n            });\r\n            $('#select_comboProductos-Ficha-visualizadores').off('change').on('change', function(ev) {\r\n              var listaSeleccionada = {},\r\n                listasVisualizadores = [];\r\n              _.each(listasListaProductos, function(item) {\r\n                if (item.tieneVisualizadores) {\r\n                  listasVisualizadores.push(item);\r\n                }\r\n              });\r\n              listaSeleccionada = listasVisualizadores[ev.target.value].listaTmplName;\r\n              self.cambiarBuscadorVisualizadores(listaSeleccionada, listasVisualizadores[ev.target.value]);\r\n              self.actualizarPosicionLinkAutorizado();\r\n            });\r\n            $('#select_comboProductos-Ficha-todos').off('change').on('change', function(ev) {\r\n              var listaSeleccionada = {},\r\n                listaTodos = [],\r\n                nombreListaSeleccionada = '';\r\n              _.each(listasListaProductos, function(item) {\r\n                if (item.tieneVisualizadores) {\r\n                  listaTodos.push(item);\r\n                } else {\r\n                  if (item.listaProductos.length > 0) {\r\n                    listaTodos.push(item);\r\n                  }\r\n                }\r\n              });\r\n              listaSeleccionada = listaTodos[ev.target.value];\r\n              nombreListaSeleccionada = listaSeleccionada.listaTmplName;\r\n              self.cambiarBuscadorTodos(nombreListaSeleccionada);\r\n              self.actualizarPosicionLinkAutorizado();\r\n            });\r\n            self.registrarEventoCambioProducto();\r\n          }\r\n        },\r\n        initialize: function() {\r\n          var listaAuxiliar = [],\r\n            primeraLista = '',\r\n            listaProductosCliente = listasListaProductos[0],\r\n            listaCambiada = false;\r\n\r\n          primeraLista = listaProductosCliente.listaTmplName;\r\n\r\n          if (modelo_ficha.get('estamosEnVisualizadores') && $B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            this.posicion = 'autorizado';\r\n            listaAuxiliar = listaProductosCliente.listaProductos;\r\n            listaProductosCliente.listaProductos = listaProductosCliente.listaProductosVisualizadores;\r\n            listaCambiada = true;\r\n          } else {\r\n            this.posicion = 'titular';\r\n          }\r\n\r\n          $('.c-encabezado-descripcionProducto').addClass('encabezadoConmutador' + listaProductosCliente.listaTmplName);\r\n          $('.c-encabezado-descripcionProducto').addClass('encabezadoConmutadorProducto');\r\n          $('.c-form-combo').cSelectMenu();\r\n\r\n          $('#contenedorBuscadores_conmutador_listado_productos').html(_.tmpl('#vista_buscador_' + primeraLista, {\r\n            listaProductos: listaProductosCliente,\r\n            prodActual: true,\r\n            modelo_ficha: modelo_ficha\r\n          }));\r\n          if (modelo_ficha.get('estamosEnVisualizadores') && $B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            $('.nombreComercialProductosFicha').parent().append('<span class=\"labelAutorizado\"> Autorizado </span>');\r\n          }\r\n          this.registrarEventos();\r\n          if (listaCambiada && $B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            listaProductosCliente.listaProductos = listaAuxiliar;\r\n          }\r\n          if (listasListaProductos[0].listaTmplName === 'Tarjetas') {\r\n            $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').addClass('encabezadoProductoTarjeta');\r\n            $('.c-encabezado-descripcionProducto').removeClass('encabezadoConmutadorProducto');\r\n            $('.c-encabezado-descripcionProducto').addClass('encabezadoConmutadorProductoTarjeta');\r\n          }\r\n          if (listasListaProductos[0].listaTmplName === 'depos' || listasListaProductos[0].listaTmplName === 'Cuentas') {\r\n\r\n            $('[data-tmpl-placeholder=\"encabezadoDescripcionProducto\"]').css('paddingTop', '0');\r\n          }\r\n          if ($('.c-contenedores-encabezadoProducto .c-menu-pestanasOperativasConsultas').length > 0) {\r\n            $('.c-contenedores-encabezadoProducto .c-menu-pestanasOperativasConsultas').addClass('mt50');\r\n          } else {\r\n            $('#contenedor-c-v01-conmutador-listado-productos').next().addClass('mt50');\r\n          }\r\n\r\n          if (listasListaProductos[0].listaTmplName === 'prestamos') {\r\n            $('.saldo1ProductosFicha-extra-top').removeClass('saldo1ProductosFicha-extra-top');\r\n          }\r\n          if ($B.appConfig.controlProductoFamiliaComboAutorizado) {\r\n            this.actualizarPosicionLinkAutorizado();\r\n            if ($('.newUroboroLoadingDiv').length > 0) {\r\n              this.ocultarCargandoEncabezado();\r\n            }\r\n          }\r\n\r\n        }\r\n      };\r\n    functions.initialize();\r\n  };\r\n\r\n}($B, jQuery, _));"],"file":"bbva.ui.js"}